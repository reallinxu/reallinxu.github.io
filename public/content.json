{"pages":[{"title":"404","text":"","path":"404/index.html","date":"03-21","excerpt":""},{"title":"search","text":"","path":"search/index.html","date":"03-21","excerpt":""}],"posts":[{"title":" java8初识\t\t","text":"1.接口里允许使用default关键字，为接口声明添加非抽象的方法实现。这个特性又被称为扩展方法。默认方法可以直接使用。默认方法无法在lambda表达式内部被访问。(test1) 2.一个所谓的函数式接口必须要有且仅有一个抽象方法声明。每个与之对应的lambda表达式必须要与抽象方法的声明相匹配。由于默认方法不是抽象的，因此你可以在你的函数式接口里任意添加默认方法。(test1) 3.Java8允许你通过::关键字获取方法或者构造函数的的引用。(test1) 4.我们通过Person::new来创建一个Person类构造函数的引用。Java编译器会自动地选择合适的构造函数来匹配PersonFactory.create函数的签名，并选择正确的构造函数形式。(test2) 5.lambda表达式可以访问外部的final局部变量，变量并不需要一定是final，然而，在编译的时候被隐式地当做final变量来处理。(test2,test3) 6.lambda表达式可以访问全部变量。(test3) 7.当一个函数不修改数据流的底层数据源，它就是无干扰的。即没有任何lambda表达式通过添加或删除修改元素。(test4) 8.当一个函数的操作的执行是确定性的，它就是无状态的。即在上面的例子中，没有任何lambda表达式依赖于外部作用域中任何在操作过程中可变的变量或状态。(test4) 9.数据流基础操作。(test5) 9数据流衔接操作只在终止操作调用时被执行。(test6) 10.衔接操作是垂直进行的，数据流执行顺序研究.(test6) 11.Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了.(test7) 12.要克服第10点这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作。(test7) 13.Executors类提供了便利的工厂方法来创建不同类型的 executor services。Executors必须显式的停止。(test8) 14.executor 可以返回一个Future类型的结果，它可以用来在稍后某个时间取出实际的结果。(test9) PS:括号内为测试代码，代码地址：https://github.com/reallinxu/java8Test","path":"2018/03/13/java8-e5-88-9d-e8-af-86/","date":"03-13","excerpt":""},{"title":" 网站同时支持http和https访问\t\t","text":"1.在腾讯云申请SSL证书https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。 2.证书申请成功后，下载证书上传到服务器，将crt和key两个文件放到/usr/local/httpscrt文件夹中 3.修改nginx配置文件如下： vi /etc/nginx/conf.d/virtual.conf #没有该文件，直接新建，内容如下 #转发给wordpress网站server { listen 80; listen 443 ssl; #此处监听443端口，https默认443，下面注释ssl on同时支持http和https server_name www.reallinxu.com; access_log /var/log/nginx/aaa/access.log; #access_log属于ngx_http_log_module的设置, 缺省level为info error_log /var/log/nginx/aaa/error.log; #error_log属于core module, 缺省的level是error #ssl on; #此处注释 ssl_certificate /usr/local/httpscrt/1_www.reallinxu.com_bundle.crt; #证书位置 ssl_certificate_key /usr/local/httpscrt/2_www.reallinxu.com.key; #key位置 location / { root /data/www/www.reallinxu.com; index index.php index.html index.htm; #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些 try_files $uri $uri/ /index.php?$args; #普通php网站因为没有rewrite的话，这个不需要 } error_page 404 /404.html; #error_page errcode uri (也就是说出现了404错误，会请求/404.html) location = /404.html { #这是一个典型的location root /data/www/www.reallinxu.com; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /data/www/www.reallinxu.com; } # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错) location ~ [^/]\\.php(/|$) { root /data/www/www.reallinxu.com; fastcgi_split_path_info ^(.+?\\.php)(/.*)$; if (!-f $document_root$fastcgi_script_name) { return 404; } #try_files $uri =404; #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击 (目前看，最安全的方式，是用上面那一句话，官方推荐的） # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } location ~ /\\.ht { deny all; } rewrite /wp-admin$ $scheme://$host$uri/ permanent; }4.重启nginx即可。","path":"2018/01/29/e7-bd-91-e7-ab-99-e5-90-8c-e6-97-b6-e6-94-af-e6-8c-81http-e5-92-8chttps-e8-ae-bf-e9-97-ae/","date":"01-29","excerpt":""},{"title":" WordPress从Apache迁移到nginx\t\t","text":"参考：http://xxx.onlymyzhongyi.com/?p=345 1.停掉httpd当前服务，禁用重启 #停掉httpdservice httpd stop #开机重启后，apache服务不再启动pchkconfig httpd off2.安装nginx yum -y install nginx3.安装php-fpm yum install php-fpm/etc/init.d/php-fpm start #该目录下没有执行文件，采用直接下一步设置开机自启chkconfig php-fpm on4.编辑nginx配置文件 vi /etc/nginx/conf.d/virtual.conf #没有该文件，直接新建，内容如下 #转发给wordpress网站server { listen 80; server_name www.reallinxu.com; access_log /var/log/nginx/aaa/access.log; #access_log属于ngx_http_log_module的设置, 缺省level为info error_log /var/log/nginx/aaa/error.log; #error_log属于core module, 缺省的level是error location / { root /data/www/www.reallinxu.com; index index.php index.html index.htm; #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些 try_files $uri $uri/ /index.php?$args; #普通php网站因为没有rewrite的话，这个不需要 } error_page 404 /404.html; #error_page errcode uri (也就是说出现了404错误，会请求/404.html) location = /404.html { #这是一个典型的location root /data/www/www.reallinxu.com; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /data/www/www.reallinxu.com; } # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错) location ~ [^/]\\.php(/|$) { root /data/www/www.reallinxu.com; fastcgi_split_path_info ^(.+?\\.php)(/.*)$; if (!-f $document_root$fastcgi_script_name) { return 404; } #try_files $uri =404; #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击 (目前看，最安全的方式，是用上面那一句话，官方推荐的） # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } location ~ /\\.ht { deny all; } rewrite /wp-admin$ $scheme://$host$uri/ permanent; }5.新建日志目录并赋权限 mkdir -p /var/log/nginx/aaachown -R nginx:adm /var/log/nginx/aaa6.安装最新的php-mysql yum updateyum install php-mysql7.启动nginx service nginx start8.此时访问可能会出现数据库错误 vi wp-config.php #修改以下部分define( ‘WP_DEBUG’, true );再进行访问时，会出现具体错误，此时发现是数据库连接错误，本人是需要修改配置文件如下 define( ‘DB_HOST’, ‘127.0.0.1’ ); #原为localhost9.修改线程数，优化内存 vi /etc/php-fpm.d/www.conf #修改如下;最大线程数pm.max_children = 3;初始线程数pm.start_servers = 1;最小空余线程数pm.min_spare_servers = 1;最大空余线程数pm.max_spare_servers = 1;php_admin内存最大限制php_admin_value[memory_limit] = 128M&nbsp; &nbsp; &nbsp;","path":"2018/01/29/wordpress-e4-bb-8eapache-e8-bf-81-e7-a7-bb-e5-88-b0nginx/","date":"01-29","excerpt":""},{"title":" Redis集群搭建\t\t","text":"redis安装请参考： http://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/ 1.单台机器redis集群搭建 [root@linxu ~]# mkdir /usr/local/redis-cluster #创建集群目录[root@linxu ~]# cd /usr/local/redis-cluster[root@linxu redis-cluster]# mkdir -p 9001/data 9002/data 9003/data 9004/data 9005/data 9006/data #创建六个节点目录[root@linxu redis-cluster]# mkdir bin[root@linxu bin]# cd /usr/local/redis/redis-4.0.6/src #redis安装目录下src[root@linxu src]# cp /usr/local/redis-cluster/bin #将redis安装目录src文件copy到bin中[root@linxu redis-4.0.6]# cd /usr/local/redis/redis-4.0.6 #redis安装目录[root@linxu redis-4.0.6]# cp /usr/local/redis-cluster/9001 #其他9002-9006同样操作[root@linxu 9001]# cd /usr/local/redis-cluster/9001 #先修改9001，其他几台需要同样操作[root@linxu redis-4.0.6]# vi redis.conf #修改配置文件port 9001（每个节点的端口号）daemonize yes(修改daemonize为yes，即默认以后台程序方式运行，效果同使用&amp;号强制后台运行)bind 192.168.43.163（绑定当前机器 IP）dir /usr/local/redis-cluster/9001/data/（数据文件存放位置）pidfile /var/run/redis_9001.pid（pid 9001和port要对应）cluster-enabled yes（启动集群模式）cluster-config-file nodes-9001.conf（9001和port要对应）cluster-node-timeout 15000appendonly yes(是否开启AOF，默认关闭no) PS:9002-9006同样修改，只是端口号不同，此处省略，可以将9001的redis.conf拷贝到所有目录，通过vi的:%s/9001/9002替换(此处9001替换为9002)，共四处修改 [root@linxu bin]# cd /usr/local/redis-cluster/bin[root@linxu bin]# ./redis-server ../9001/redis.conf #启动六个节点[root@linxu bin]# ./redis-server ../9002/redis.conf[root@linxu bin]# ./redis-server ../9003/redis.conf[root@linxu bin]# ./redis-server ../9004/redis.conf[root@linxu bin]# ./redis-server ../9005/redis.conf[root@linxu bin]# ./redis-server ../9006/redis.conf[root@linxu bin]# ps -ef|grep redis #查看是否启动成功（成功有六个redis进程）[root@linxu bin]# cd #返回根目录[root@linxu ~]# wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz #下载rubby，yum下载为2.0.0版本，redis支持版本需大于2.2.2，此处为官网下载[root@linxu ~]# tar zxvf ruby-2.5.0.tar.gz[root@linxu ~]# mv ruby-2.5.0 /usr/local/ruby/[root@linxu ~]# cd /usr/local/ruby/ruby-2.5.0[root@linxu ruby-2.5.0]# ./configure[root@linxu ruby-2.5.0]# make[root@linxu ruby-2.5.0]# make install[root@linxu ruby-2.5.0]# ruby -v #查看版本[root@linxu ruby-2.5.0]# yum install rubygems #安装rubygems[root@linxu ~]# gem install redis PS：此处如果先通过yum安装ruby版本低于2.2.2会报错，可以移除旧版本，再安装新版本,再安装rvm进行，步骤如下 [root@linxu ~]# yum install curl #安装curl [root@linxu ~]# curl -L get.rvm.io | bash -s stable 如果执行无法完成，替换为\\curl -sSL https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash [root@linxu ~]# source /etc/profile.d/rvm.sh 此时再执行[root@linxu ~]# gem install redis即可 [root@linxu bin]# ./redis-trib.rb create –replicas 1 192.168.43.216:9001 192.168.43.216:9002 192.168.43.216:9003 192.168.43.216:9004 192.168.43.216:9005 192.168.43.216:9006 #搭建集群[root@linxu bin]# ./redis-cli -c -h 192.168.43.216 -p 9001 #验证192.168.43.216:9001&gt; set name da-&gt; Redirected to slot [5798] located at 192.168.43.216:9002OK192.168.43.216:9002&gt; PS：此处需要加参数-c，否则不会自动跳转到分配的节点，会报错(error) MOVED 5798 192.168.43.216:90022.不同机器搭建redis集群 #此处使用两台机器，通过单台机器一样的方法在每台机器各创建三个节点 #第一台 192.168.43.216 节点 10001 10002 10003 #第二台 192.168.43.163 节点 10004 10005 10006 #将六个节点全部启动[root@linxu bin]# ./redis-server ../10001/redis.conf #其他节点同样启动 #启动后创建集群./redis-trib.rb create –replicas 1 192.168.43.163:10004 192.168.43.163:10005 192.168.43.163:10006 192.168.43.216:10001 192.168.43.216:10002 192.168.43.216:10003[root@linxu bin]# ./redis-cli -c -h 192.168.43.216 -p 10001 #验证192.168.43.216:10001&gt; set a 1-&gt; Redirected to slot [15495] located at 192.168.43.163:10005OK&nbsp;","path":"2018/01/26/redis-e9-9b-86-e7-be-a4-e6-90-ad-e5-bb-ba/","date":"01-26","excerpt":""},{"title":" vi文件Found a swap file by the name \t\t","text":"在vi文件时出现 Found a swap file by the name “.Test.java.swp” 提示，是因为之前vi异常中断. ls -a可以查看隐藏文件*.swap rm *.swap即可","path":"2018/01/24/vi-e6-96-87-e4-bb-b6found-a-swap-file-by-the-name/","date":"01-24","excerpt":""},{"title":" redis入门\t\t","text":"1.安装redis [root@linxu ~]# wget http://download.redis.io/releases/redis-4.0.6.tar.gz[root@linxu ~]# tar xzf redis-4.0.6.tar.gz[root@linxu ~]# mkdir /usr/local/redis[root@linxu ~]# mv redis-4.0.6 /usr/local/redis[root@linxu ~]# cd /usr/local/redis/redis-4.0.6[root@linxu redis-4.0.6]# make[root@linxu redis]# cd src[root@linxu src]# ./redis-server #运行[root@linxu src]# ./redis-server redis.conf #使用指定配置文件运行2.测试redis 第一个窗口:[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src[root@linxu src]# ./redis-server redis.conf #使用指定配置文件运行第二个窗口:[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src[root@linxu src]# ./redis-cli127.0.0.1:6379&gt; set test hahaahOK127.0.0.1:6379&gt; get test“hahaah”127.0.0.1:6379&gt;3.利用jedis测试java连接redis //pom.xml中添加&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt;测试代码： package com.redis.demo; import redis.clients.jedis.Jedis; public class TestRedis { public static void main(String[] args) { //连接本地的 Redis 服务 Jedis jedis = new Jedis(&quot;192.168.43.163&quot;,6379); System.out.println(&quot;连接成功&quot;); //查看服务是否运行 System.out.println(&quot;服务正在运行: &quot;+jedis.ping()); } }运行时报异常： Exception in thread “main” redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command ‘CONFIG SET protected-mode no’ from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to ‘no’, and then restarting the server. 3) If you started the server manually just for testing, restart it with the ‘–protected-mode no’ option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.此时需要修改配置文件redis.conf，修改如下 1.#注释掉bind #bind 127.0.0.12.protected-mode yes改为protected-mode no重新启动redis即可 &nbsp;","path":"2018/01/24/redis-e5-85-a5-e9-97-a8/","date":"01-24","excerpt":""},{"title":" 更新本地代码到github\t\t","text":"第一步：查看当前的git仓库状态，可以使用git status git status 第二步：更新全部 git add * 第三步：接着输入git commit -m “更新说明” git commit -m \"更新说明\" 第四步：先git pull,拉取当前分支最新代码 git pull 第五步：push到远程master分支上 git push origin master","path":"2018/01/23/e6-9b-b4-e6-96-b0-e6-9c-ac-e5-9c-b0-e4-bb-a3-e7-a0-81-e5-88-b0github/","date":"01-23","excerpt":""},{"title":" 本地代码上传到github\t\t","text":"第一步：建立git仓库cd到你的本地项目根目录下，执行git命令 git init **第二步：将项目的所有文件添加到仓库中** git add . **如果想添加某个特定的文件，只需把.换成特定的文件名即可** **第三步：将add的文件commit到仓库** git commit -m \"注释语句\" 第四步：去github上创建自己的Repository 第五步：重点来了，将本地的仓库关联到github上 git remote add origin https://github.com/reallinxu/spring-boot-dubbo **后面的https链接地址换成你自己的仓库url地址** **第六步：上传github之前，要先pull一下，执行如下命令：** git pull origin master **第七步，也就是最后一步，上传代码到github远程仓库** git push -u origin master","path":"2018/01/23/e6-9c-ac-e5-9c-b0-e4-bb-a3-e7-a0-81-e4-b8-8a-e4-bc-a0-e5-88-b0github/","date":"01-23","excerpt":""},{"title":" Dubbo+Zookeeper+Spring-boot+dubbo-simple 搭建入门\t\t","text":"1.安装Zookeeper [root@linxu ~]# wget http://mirrors.shu.edu.cn/apache/zookeeper/zookeeper-3.5.3-beta/zookeeper-3.5.3-beta.tar.gz[root@linxu ~]# tar -zxvf zookeeper-3.5.3-beta.tar.gz #此时可能会报错使用[root@linxu ~]# tar -xvf zookeeper-3.5.3-beta.tar.gz[root@linxu ~]# mv zookeeper-3.5.3-beta /usr/local/zookeeper #没有目录请先mkdir[root@linxu ~]# cd /usr/local/zookeeper/zookeeper-3.5.3-beta/conf[root@linxu conf]# cp zoo_sample.cfg zoo.cfg[root@linxu conf]# vi zoo.cfg #修改配置对应项dataDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/datadataLogDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/logs[root@linxu conf]# vi /etc/profile末尾添加export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.5.3-beta/export PATH=$ZOOKEEPER_HOME/bin:$PATHexport PATH[root@linxu conf]# source /etc/profile #使生效[root@linxu conf]# zkServer.sh start #启动[root@linxu conf]# zkServer.sh status #查看状态[root@linxu conf]# zkServer.sh stop #停止[root@linxu conf]# zkServer.sh restart #重启 2.部署dubbo-admin 从github上下载dubbo源码，编译dubbo-admin(最新版已没有dubbo-admin，下载历史版本) dubbo地址：https://github.com/alibaba/dubbo/tree/dubbo-2.5.8 编译：mvn package -Dmaven.test.skip=true 编译成功后将target目录下的war包放到tomcat下webapps中，启动tomcat即可访问http://localhost:8080/dubbo-admin-2.5.8/ 3.本地使用spring-boot创建提供者（provider）和消费者(consume) 代码：https://github.com/reallinxu/spring-boot-dubbo 分别启动provider和consume，查看dubbo主页，可以看到提供者和消费者。 PS：provider和consume的接口位置必须一致 4.搭建dubbo-simple监控 从github上下载dubbox源码，编译dubbo-monitor-simple dubbox地址：https://github.com/reallinxu/dubbox 编译：mvn package -Dmaven.test.skip=true 编译成功后将dubbo-monitor-simple-2.8.4-assembly.tar.gz放入服务器 [root@linxu dubbo-simple]# tar -zxvf dubbo-monitor-simple-2.8.4-assembly.tar.gz[root@linxu bin]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/conf修改dubbo.propertiesdubbo.container=log4j,spring,registry,jettydubbo.application.name=simple-monitordubbo.application.owner= #dubbo.registry.address=multicast://224.5.6.7:1234dubbo.registry.address=zookeeper://192.168.43.163:2181 #Zookeeper地址 #dubbo.registry.address=redis://127.0.0.1:6379 #dubbo.registry.address=dubbo://127.0.0.1:9090dubbo.protocol.port=7070dubbo.jetty.port=7072 #jetty端口，避免冲突dubbo.jetty.directory=${user.home}/monitordubbo.charts.directory=${dubbo.jetty.directory}/chartsdubbo.statistics.directory=${user.home}/monitor/statisticsdubbo.log4j.file=logs/dubbo-monitor-simple.logdubbo.log4j.level=WARN启动dubbo-simple [root@linxu ~]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/bin[root@linxu bin]# sh start.sh启动成功后登陆访问http://192.168.43.163:7072 (端口为jetty端口) 如果查看不到监控提供者 com.alibaba.dubbo.monitor.MonitorService 请核对dubbo.properties zookeeper地址和端口是否正确 &nbsp;","path":"2018/01/23/Dubbo+Zookeeper+Spring-boot+dubbo-simple 搭建入门/","date":"01-23","excerpt":""},{"title":" centos服务器安装mysql\t\t","text":"1.安装mysql [root@localhost ~]rpm -qa | grep mysql #搜索指定rpm包是否安装。[root@localhost ~]yum install mysql #安装客户端[root@localhost ~]yum install mysql-server #安装服务端(此时安装失败，需要下载)[root@localhost ~]wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm[root@localhost ~]rpm -ivh mysql-community-release-el7-5.noarch.rpm[root@localhost ~]yum install mysql-community-server #安装server[root@localhost ~]yum install mysql-devel #服务端安装好后，需要安装 ，包含了所需要的库和文件，如果需要编译其他Mysql客户程序，必须要安装2.服务器安装完成后，通过本机DbVisualizer连接时会连接不上，此时需要赋予权限 [root@localhost ~]grant all on . to test@’%’ identified by ‘123456’;.，表示赋予用户操作服务器上所有数据库所有表的权限。%，表示所有ipgrant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘密码’3.删除权限 [root@localhost ~]grant all on . to test@’%’ identified by ‘123456’;.，表示赋予用户操作服务器上所有数据库所有表的权限。%，表示所有iprevoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址&nbsp;","path":"2018/01/12/centos服务器安装mysql/","date":"01-12","excerpt":""},{"title":" 微信小程序初探\t\t","text":"前言：冬至项目组聚会，喝酒时玩助兴游戏猜数字，架构师提出做一个小程序，所以准备做一个简单的小程序。 花了一天时间边学习边摸索，初步实现功能的小程序1.0已开发完成，此处对学习中的坑和细节点进行记录。 小程序代码github地址为：https://github.com/reallinxu/NumBomb.git 笔记： 1.微信小程序主要有四种文件：.js；.json；.wxss；.wxml，具体作用google即可。 2.js文件中page中方法data为初始化数据，可以在wxml文件中通过来获取，也可在js定义的方法中通过setData进行修改。 3.传值，可以通过在wxml中使用data-id传值，在方法中使用如下可以获取date-id的值 var numjson = e.currentTarget.dataset.id;4.将获取的json转换为json对象，通过下面方法可以实现。 var numjson = {“num1”: “1”, “num2”: “2”};var numobj = JSON.parse(numjson);console.log(numobj.num1);console.log(numobj.num2);5.页面跳转，js中使用下面方法进行跳转，此方法会销毁原page。 wx.redirectTo({ url: ‘../boom/boom’ })当页面在tabbar时，用此方法不会跳转，应使用： wx.switchTab({url: ‘../index/index’})同时，跳转的页面都必须确保在app.json中page里已配置。 &nbsp;","path":"2017/12/26/e5-be-ae-e4-bf-a1-e5-b0-8f-e7-a8-8b-e5-ba-8f-e5-88-9d-e6-8e-a2/","date":"12-26","excerpt":""},{"title":" Spring-batch restart重拉机制\t\t","text":"对于Spring-batch中的Reader-processor-writer模式，例如 &lt;batch:step id=”test-01”&gt; &lt;batch:tasklet&gt; &lt;batch:chunk reader=”testR” processor=”testP” commit-interval=”1”&gt; &lt;batch:writer&gt; &lt;bean class=”com.test.TestW” /&gt; &lt;/batch:writer&gt; &lt;/batch:chunk&gt; &lt;/batch:tasklet&gt;&lt;/batch:step&gt;如果reader读取为两条数据，第二条数据异常断批，由于commint-interval为1，第一条会执行processor和writer，且成功commit，第二条Processor会回滚，writer不会执行。当restart时，会从第二条数据重新处理，第一条已处理不会再重复处理。 如果此时将 &lt;batch:chunk reader=”testR” processor=”testP” commit-interval=”1”&gt;改为 &lt;batch:chunk reader=”testR” processor=”testP” commit-interval=”2”&gt;这时，reader读取两条数据，第二条数据异常断批，则两条数据都会回滚掉，restart时会重新执行。 以上，目前已验证Reader-processor-writer模式重拉不会导致数据重复处理。","path":"2017/12/22/spring-batch-restart-e9-87-8d-e6-8b-89-e6-9c-ba-e5-88-b6/","date":"12-22","excerpt":""},{"title":" WordPress搭建\t\t","text":"具体参考 http://www.bandwagonhost.net/401.html http://www.bandwagonhost.net/403.html","path":"2017/12/22/wordpress-e6-90-ad-e5-bb-ba/","date":"12-22","excerpt":""},{"title":" WordPress TwentyFourteen页面不居中问题解决\t\t","text":"选择 仪表盘–&gt;外观–&gt;编辑 选择style.css，找到如下代码： html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td { border: 0; font-family: inherit; font-size: 100%; font-style: inherit; font-weight: inherit; margin: 0; outline: 0; padding: 0; vertical-align: baseline;}将 margin: 0;改为 margin: auto;更新文件即可居中。","path":"2017/12/22/wordpress-twentyfourteen-e9-a1-b5-e9-9d-a2-e4-b8-8d-e5-b1-85-e4-b8-ad-e9-97-ae-e9-a2-98-e8-a7-a3-e5-86-b3/","date":"12-22","excerpt":""},{"title":" CentOS下安装JDK、NEXUS、TOMCAT、RABBITMQ集群\t\t","text":"1.CentOS联网设置 网络接口配置文件[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33 Intel Corporation 82545EM Gigabit Ethernet Controller (Copper)TYPE=Ethernet #网卡类型DEVICE=eth0 #网卡接口名称ONBOOT=yes #系统启动时是否自动加载BOOTPROTO=static #启用地址协议 –static:静态协议 –bootp协议 –dhcp协议IPADDR=192.168.1.11 #网卡IP地址NETMASK=255.255.255.0 #网卡网络地址GATEWAY=192.168.1.1 #网卡网关地址DNS1=10.203.104.41 #网卡DNS地址HWADDR=00:0C:29:13:5D:74 #网卡设备MAC地址BROADCAST=192.168.1.255 #网卡广播地址 PS:该文件名ifcfg-ens33不固定，找差不多类型文件即可。联网只要设置为自动加载即可，即ONBOOT设置为yes(一般默认为no)。设置完后reboot重启，命令ifconfig查看ip。2.CentOS安装jdk 使用WinSCP连接虚拟机，centOS可以直接通过FTP和SSH连接。将jdk-8u144-linux-x64.tar.gz下载好通过WinSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装jdk。1.创建Java文件夹[root@localhost ~]# cd /usr/local[root@localhost local]# mkdir java[root@localhost local]# lsbin etc games include java lib lib64 libexec sbin share src2.将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下[root@localhost ~]# tar zxvf jdk-8u144-linux-x64.tar.gz[root@localhost ~]# mv jdk1.8.0_144 /usr/local/java3.设置环境变量[root@localhost ~]# vi ~/.bashrc文件末尾加上以下几行：export JAVA_HOME=/usr/local/java/jdk1.8.0_144export CLASSPATH=.:${JAVA_HOME}/libexport PATH=${JAVA_HOME}/bin:$PATH使生效：[root@localhost jdk1.8.0_144]# source ~/.bashrc4.验证是否安装成功[root@localhost jdk1.8.0_144]# java[root@localhost jdk1.8.0_144]# javac[root@localhost jdk1.8.0_144]# java -version3.CentOS安装Nexus 将nexus-3.5.2-01-unix.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装nexus。1.创建Nexus文件夹[root@localhost ~]# cd /usr/local[root@localhost local]# lsbin etc games include java lib lib64 libexec sbin share src[root@localhost local]# mkdir nexus[root@localhost local]# lsbin etc games include java lib lib64 libexec nexus sbin share src2.将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压[root@localhost ~]# mv nexus-3.5.2-01-unix.tar.gz /usr/local/nexus[root@localhost ~]# cd /usr/local/nexus[root@localhost ~]# tar zxvf nexus-3.5.2-01-unix.tar.gz3.启动nexus[root@localhost ~]# cd /usr/local/nexus/nexus-3.5.2-01/bin[root@localhost bin]# ./nexus startWARNING: **WARNING: Detected execution as “root” user. This is NOT recommended!WARNING: **Starting nexus[root@localhost bin]# ./nexus statusWARNING: **WARNING: Detected execution as “root” user. This is NOT recommended!WARNING: **nexus is running.4.验证是否启动成功在浏览器中输入{ip}:8081(默认为8081端口)。此时并不能打开，因为防火墙的原因，此处我是关闭防火墙(也可以开放相应端口解决)，为了简单直接关闭啦。关闭防火墙命令如下：[root@localhost bin]# systemctl stop firewalld.service #停止firewall(此时重启后防火墙会自动开启)[root@localhost bin]# systemctl disable firewalld.service #禁止firewall开机启动[root@localhost bin]# firewall-cmd –state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running）此时再通过浏览器进入即可。4.CentOS安装Tomcat 将apache-tomcat-8.5.23.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装tomcat。1.创建Tomcat文件夹[root@localhost ~]# cd /usr/local[root@localhost local]# mkdir tomcat[root@localhost local]# lsbin etc games include java lib lib64 libexec nexus sbin share src tomcat2.将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压[root@localhost ~]# mv apache-tomcat-8.5.23.tar.gz /usr/local/tomcat/[root@localhost ~]# cd /usr/local/tomcat/[root@localhost tomcat]# tar zxvf apache-tomcat-8.5.23.tar.gz3.启动Tomcat[root@localhost ~]# cd /usr/local/tomcat/apache-tomcat-8.5.23/bin[root@localhost bin]# ./startup.shUsing CATALINA_BASE: /usr/local/tomcat/apache-tomcat-8.5.23Using CATALINA_HOME: /usr/local/tomcat/apache-tomcat-8.5.23Using CATALINA_TMPDIR: /usr/local/tomcat/apache-tomcat-8.5.23/tempUsing JRE_HOME: /usr/local/java/jdk1.8.0_144Using CLASSPATH: /usr/local/tomcat/apache-tomcat-8.5.23/bin/bootstrap.jar:/usr/local/tomcat/apache-tomcat-8.5.23/bin/tomcat-juli.jarTomcat started.4.验证是否安装成功用浏览器输入{IP}:8080(默认为8080端口)。 PS：注意防火墙设置。5.CentOS安装RabbitMq 1.安装Erlang使用SecureCRT连接虚拟机，开始准备安装Erlang。[root@localhost bin]# rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm[root@localhost bin]# yum install erlang安装 1 软件包 (+110 依赖软件包) 总下载量：51 M安装大小：117 MIs this ok [y/d/N]:输入：y是否继续？[y/N]：输入: y 2.安装RabbitMq1.将rabbitmq-signing-key-public.asc、rabbitmq-server-3.3.5-1.noarch.rpm通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装RabbitMq。[root@localhost ~]# rpm –import rabbitmq-signing-key-public.asc[root@localhost ~]# rpm -ivh rabbitmq-server-3.3.5-1.noarch.rpm准备中… ################################# [100%]正在升级/安装… 1:rabbitmq-server-3.3.5-1 ################################# [100%][root@localhost ~]# rabbitmq-plugins enable rabbitmq_managementThe following plugins have been enabled: mochiweb webmachine rabbitmq_web_dispatch amqp_client rabbitmq_management_agent rabbitmq_managementPlugin configuration has changed. Restart RabbitMQ for changes to take effect.[root@localhost ~]# chkconfig –level 3 rabbitmq-server on2.配置文件路径[root@localhost ~]# vi /etc/init.d/rabbitmq-server寻找行：PID_FILE=/var/run/rabbitmq/pid在以上内容之下，插入行export RABBITMQ_MNESIA=/rabbitmq/mnesia3.配置访问权限[root@localhost ~]# chmod 644 /etc/rabbitmq/enabled_plugins4.启动RabbitMq[root@localhost ~]# service rabbitmq-server start[root@localhost ~]# rabbitmqctl add_user admin admin[root@localhost ~]# rabbitmqctl set_user_tags admin administrator5.验证RabbitMq用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙) 3.配置RabbitMq集群1.修改hosts文件 vi /etc/hosts 将两台虚拟机的Ip配置进去： 192.168.43.69 test1 192.168.43.216 test2 重启两台虚拟机reboot2.启动第一台虚拟机的Rabbitmq: service rabbitmq-server start 将/var/lib/rabbitmq的.erlang.cookie文件拷贝到第二台虚拟机相同位置覆盖 更改.erlang.cookie的访问权限为400 chmod 400 /var/lib/rabbitmq/.erlang.cookie 更改.erlang.cookie的文件所有人为rabbitmq chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie 启动第二台虚拟机的Rabbitmq： service rabbitmq-server start rabbitmqctl stop_app rabbitmqctl join_cluster rabbit@test1 rabbitmqctl start_app3.验证集群是否成功 用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙) PS：cookie文件会有两处都存在，root目录下cookie可以直接删除。 如果使用虚拟机使用桥接模式，主机名hostname会自动修改成和hosts配置一致，如果使用仅主机网络等，hostname没有修改，可以使用hostnamectl set-hostname test1命令就行修改。&lt;/pre&gt; 软件包地址：http://download.csdn.net/download/anonymous_l/10021072","path":"2017/12/22/CentOS下安装JDK、NEXUS、TOMCAT、RABBITMQ集群/","date":"12-22","excerpt":""},{"title":" Hello，World！\t\t","text":"第一次搭建，有点小激动，感谢夏某某的服务器和指导。","path":"2017/12/18/hello-world-1/","date":"12-18","excerpt":""}]}