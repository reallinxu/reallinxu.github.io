{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/favicon.ico","path":"favicon.ico","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/touxiang.jpg","path":"images/touxiang.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/alipay.jpg","path":"images/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/wechatpay.jpg","path":"images/wechatpay.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/love.js","path":"js/src/love.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/apple-touch-icon.png","path":"apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.svg","path":"iconfont/iconfont.svg","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.ttf","path":"iconfont/iconfont.ttf","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.eot","path":"iconfont/iconfont.eot","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/iconfont/iconfont.woff","path":"iconfont/iconfont.woff","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/js/search.json.js","path":"js/search.json.js","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/js/toctotop.js","path":"js/toctotop.js","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/js/totop.js","path":"js/totop.js","modified":0,"renderable":1},{"_id":"themes/BlueLake/source/img/bg.jpg","path":"img/bg.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"a994532c1fe72df4a634dd248d2865ed9569af88","modified":1522135603613},{"_id":"source/favicon.ico","hash":"20c59e96f042970753776c92420583340cb3c6ae","modified":1521705964470},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1514806389000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1514806389000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1514806389000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1514806389000},{"_id":"themes/next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1514806389000},{"_id":"themes/next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1514806389000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1514806389000},{"_id":"themes/next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1514806389000},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1514806389000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1514806389000},{"_id":"themes/next/README.cn.md","hash":"58ffe752bc4b7f0069fcd6304bbc2d5ff7b80f89","modified":1514806389000},{"_id":"themes/next/README.md","hash":"898213e66d34a46c3cf8446bf693bd50db0d3269","modified":1514806389000},{"_id":"themes/next/_config.yml","hash":"ecd535a1239c1667bbf48e87d3e6b9a8e7b4801a","modified":1525921492027},{"_id":"themes/next/bower.json","hash":"0674f11d3d514e087a176da0e1d85c2286aa5fba","modified":1514806389000},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1514806389000},{"_id":"themes/next/package.json","hash":"036d3a1346203d2f1a3958024df7f74e7ac07bfe","modified":1514806389000},{"_id":"themes/next/编辑1","hash":"ca618245c526e543ef98f0e7904cb46a1b15acb8","modified":1524795337581},{"_id":"source/404/index.md","hash":"1c4b3981d11aafdc2e2d96aac956a4fd0505a917","modified":1521681905608},{"_id":"source/about/index.md","hash":"61b029e9dd475b1bc3f102ff1d44fffe0d293e18","modified":1521711511478},{"_id":"source/categories/index.md","hash":"d3b2563a93ace1872d8639bc229a22c1b514c1df","modified":1524791303607},{"_id":"source/_posts/Dockerfile构建java环境镜像.md","hash":"35978e3b08d2d6f94e5da4a13178831e2e8579de","modified":1527679002233},{"_id":"source/_posts/Docker-Learning.md","hash":"b225564098571e62daa3db929a8924168e510d56","modified":1527493426241},{"_id":"source/_posts/P1.md","hash":"91d7a198594f64021d10f3212187f35fbc617854","modified":1525918551065},{"_id":"source/_posts/P10.md","hash":"a873bb99fb0a94656815bc1ac525bfd23c990656","modified":1525920356173},{"_id":"source/_posts/Docker容器中搭建rabbitmq集群.md","hash":"0a6050b5e544cf9a5f6f083e9a0e37b5c9ac703c","modified":1527668220173},{"_id":"source/_posts/P12.md","hash":"103cde307169a11efdb3ea33b15c86a1c0779c4e","modified":1525919944906},{"_id":"source/_posts/P11.md","hash":"636f9c65838ebee40a65c5c2e5733005177d52d9","modified":1525919713578},{"_id":"source/_posts/P13.md","hash":"ee0b1186a9c840e043556d4841eebb891ec6f54f","modified":1525920068629},{"_id":"source/_posts/P15.md","hash":"de325f44f2b10e27c0c029afaf3f31267092c8c2","modified":1525920303670},{"_id":"source/_posts/P14.md","hash":"39959e48b6a873dd4a527196b0e22d1aeefed01e","modified":1521682083520},{"_id":"source/_posts/P3.md","hash":"51b662b6587b0bc5709323d6ee963b916e601536","modified":1525918789760},{"_id":"source/_posts/P16.md","hash":"26f86fe52d008ade4da0b52867cdc35e0debcd5c","modified":1521682083520},{"_id":"source/_posts/P4.md","hash":"9f8fd62cec3b1f705712be0c89d7ee7def9a357e","modified":1525918909515},{"_id":"source/_posts/P6.md","hash":"e2674d34b820ef8b4ba43c3f150e61b597bb398b","modified":1526539502087},{"_id":"source/_posts/P5.md","hash":"c20498541fa20791b27f319ca5cae0959dcfaa20","modified":1525918339634},{"_id":"source/_posts/P8.md","hash":"91df0371896100ddfb9a99b2407ff073e30138ba","modified":1525919275781},{"_id":"source/_posts/P9.md","hash":"4b7424e62d895f885fb6be6ef73ced78872b1009","modified":1521682083519},{"_id":"source/_posts/java a=a++引发的思考.md","hash":"8b040b00dd803d7dc46d20e5b53d543655bd8754","modified":1524885575145},{"_id":"source/_posts/自己搭建小项目.md","hash":"285c1afe33f0b87f9615b082083988a6ddfa40a6","modified":1527678832650},{"_id":"source/search/index.md","hash":"49d2479a820ffb525f426aad6bd3057801058ece","modified":1521681905609},{"_id":"source/tags/index.md","hash":"ec80d4cf36641e3180cd525c1fe78e50aa2942d9","modified":1524791328354},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1514806389000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"352093a1b210c72136687fd2eee649244cee402c","modified":1514806389000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1514806389000},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1514806389000},{"_id":"themes/next/languages/default.yml","hash":"44ef3f26917f467459326c2c8be2f73e4d947f35","modified":1514806389000},{"_id":"themes/next/languages/en.yml","hash":"7e680d9bb8f3a3a9d1ba1c9d312b3d257183dded","modified":1514806389000},{"_id":"themes/next/languages/de.yml","hash":"057e7df11ddeb1c8c15a5d7c5ff29430d725ec6b","modified":1514806389000},{"_id":"themes/next/languages/fr-FR.yml","hash":"7e4eb7011b8feee641cfb11c6e73180b0ded1c0f","modified":1514806389000},{"_id":"themes/next/languages/it.yml","hash":"aa595f2bda029f73ef7bfa104b4c55c3f4e9fb4c","modified":1514806389000},{"_id":"themes/next/languages/ko.yml","hash":"ea5b46056e73ebcee121d5551627af35cbffc900","modified":1514806389000},{"_id":"themes/next/languages/ja.yml","hash":"3c76e16fd19b262864475faa6854b718bc08c4d8","modified":1514806389000},{"_id":"themes/next/languages/id.yml","hash":"b5de1ea66dd9ef54cac9a1440eaa4e3f5fc011f5","modified":1514806389000},{"_id":"themes/next/languages/nl-NL.yml","hash":"edca4f3598857dbc3cbf19ed412213329b6edd47","modified":1514806389000},{"_id":"themes/next/languages/pt-BR.yml","hash":"b1694ae766ed90277bcc4daca4b1cfa19cdcb72b","modified":1514806389000},{"_id":"themes/next/languages/pt.yml","hash":"44b61f2d085b827b507909a0b8f8ce31c6ef5d04","modified":1514806389000},{"_id":"themes/next/languages/ru.yml","hash":"98ec6f0b7183282e11cffc7ff586ceb82400dd75","modified":1514806389000},{"_id":"themes/next/languages/vi.yml","hash":"fd08d3c8d2c62965a98ac420fdaf95e54c25d97c","modified":1514806389000},{"_id":"themes/next/languages/zh-CN.yml","hash":"16ef56d0dea94638de7d200984c90ae56f26b4fe","modified":1514806389000},{"_id":"themes/next/languages/zh-tw.yml","hash":"50b71abb3ecc0686f9739e179e2f829cd074ecd9","modified":1514806389000},{"_id":"themes/next/languages/zh-hk.yml","hash":"9396f41ae76e4fef99b257c93c7354e661f6e0fa","modified":1514806389000},{"_id":"themes/next/layout/_layout.swig","hash":"6476caa34d9c93b172e64affdcce87bba741bf26","modified":1524878014404},{"_id":"themes/next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1514806389000},{"_id":"themes/next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1514806389000},{"_id":"themes/next/layout/archive.swig","hash":"f0a8225feafd971419837cdb4bcfec98a4a59b2f","modified":1514806389000},{"_id":"themes/next/layout/page.swig","hash":"969caaee05bdea725e99016eb63d810893a73e99","modified":1514806389000},{"_id":"themes/next/layout/post.swig","hash":"b3589a8e46288a10d20e41c7a5985d2493725aec","modified":1514806389000},{"_id":"themes/next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1514806389000},{"_id":"themes/next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1514806389000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1514806389000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1514806389000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1514806389000},{"_id":"themes/next/scripts/merge-configs.js","hash":"81e86717ecfb775986b945d17f0a4ba27532ef07","modified":1514806389000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1514806389000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1514806389000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1514806389000},{"_id":"themes/next/layout/_partials/head.swig","hash":"6b94fe8f3279daea5623c49ef4bb35917ba57510","modified":1514806389000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"4a6f5b1792b2e5262b7fdab9a716b3108e2f09c7","modified":1514806389000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"1a9b8301735dc5247a51799d59b077c4f8cdd501","modified":1524880547580},{"_id":"themes/next/layout/_partials/header.swig","hash":"ed042be6252848058c90109236ec988e392d91d4","modified":1514806389000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1514806389000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1514806389000},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1514806389000},{"_id":"themes/next/layout/_partials/编辑1","hash":"3201abb0bfad6053001d6ad5206992345e9265b3","modified":1526378989393},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1514806389000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1514806389000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"a266f96ad06ee87bdeae6e105a4b53cd587bbd04","modified":1514806389000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1514806389000},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1514806389000},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"5fe0447cc88a5a63b530cf0426f93c4634811876","modified":1514806389000},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1514806389000},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1514806389000},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1514806389000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1514806389000},{"_id":"themes/next/layout/_macro/passage-end-tag.swig","hash":"02187433e00bcda612a89e349fe7d30789901205","modified":1524878839142},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1514806389000},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"665a928604f99d2ba7dc4a4a9150178229568cc6","modified":1514806389000},{"_id":"themes/next/layout/_macro/post.swig","hash":"ce5131f00bd3560d7e9dc3dec5eda1db04b99982","modified":1524878735052},{"_id":"themes/next/layout/_macro/reward.swig","hash":"56e8d8556cf474c56ae1bef9cb7bbd26554adb07","modified":1514806389000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"39852700e4084ecccffa6d4669168e5cc0514c9e","modified":1514806389000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"6a54c3c85ff6b19d275827a327abbf4bd99b2ebf","modified":1514806389000},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1514806389000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1514806389000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1514806389000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1514806389000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1514806389000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1514806389000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1514806389000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1514806389000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1514806389000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1514806389000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1514806389000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1514806389000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1514806389000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1514806389000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1514806389000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1514806389000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1514806389000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1514806389000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1514806389000},{"_id":"themes/next/source/images/touxiang.jpg","hash":"af327665f3847d3b77c7c500416d2c3299a15f5b","modified":1521595499859},{"_id":"themes/next/scripts/tags/button.js","hash":"d023f10a00077f47082b0517e2ad666e6e994f60","modified":1514806389000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1514806389000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1514806389000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1514806389000},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"eeeabede68cf263de9e6593ecf682f620da16f0a","modified":1514806389000},{"_id":"themes/next/scripts/tags/label.js","hash":"2f8f41a7316372f0d1ed6b51190dc4acd3e16fff","modified":1514806389000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1514806389000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1514806389000},{"_id":"themes/next/scripts/tags/note.js","hash":"64de4e9d01cf3b491ffc7d53afdf148ee5ad9779","modified":1514806389000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1514806389000},{"_id":"themes/next/source/images/alipay.jpg","hash":"3f70bd1b2f6f06b1dc7a7129636ef297fdb08510","modified":1521595426371},{"_id":"themes/next/source/images/wechatpay.jpg","hash":"01d3ef9a5bcdd3b528f0e0f6afded1993dbf94de","modified":1521595400207},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1514806389000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1514806389000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1514806389000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1514806389000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1514806389000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1514806389000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1514806389000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1514806389000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1514806389000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1514806389000},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1514806389000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"1cd01c6e92ab1913d48e556a92bb4f28b6dc4996","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"fc65b9c98a0a8ab43a5e7aabff6c5f03838e09c8","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1514806389000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"10160daceaa6f1ecf632323d422ebe2caae49ddf","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"aa0629277d751c55c6d973e7691bf84af9b17a60","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"8a2e393d2e49f7bf560766d8a07cd461bf3fce4f","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"fcabbb241f894c9a6309c44e126cf3e8fea81fd4","modified":1514806389000},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"8b6650f77fe0a824c8075b2659e0403e0c78a705","modified":1514806389000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1514806389000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"385c066af96bee30be2459dbec8aae1f15d382f5","modified":1514806389000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1514806389000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1514806389000},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1514806389000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"a99b62ddec9be7e454ae661710dcd04a5bb256c0","modified":1524879075349},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"9ab65361ba0a12a986edd103e56492644c2db0b8","modified":1514806389000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"82f9055955920ed88a2ab6a20ab02169abb2c634","modified":1514806389000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1514806389000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"99fbb4686ea9a3e03a4726ed7cf4d8f529034452","modified":1514806389000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"f29165e36489a87ba32d17dddfd2720d84e3f3ec","modified":1514806389000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"29c261fa6b4046322559074d75239c6b272fb8a3","modified":1514806389000},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1514806389000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1514806389000},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1514806389000},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1514806389000},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1514806389000},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1514806389000},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1514806389000},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1514806389000},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1514806389000},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1514806389000},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1514806389000},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1514806389000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1514806389000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1514806389000},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1514806389000},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1514806389000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1514806389000},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1514806389000},{"_id":"themes/next/source/js/src/love.js","hash":"9e8e79d69ad8338761272f86fe5cad0ad5e503cc","modified":1524878178861},{"_id":"themes/next/source/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1514806389000},{"_id":"themes/next/source/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1514806389000},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1514806389000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1514806389000},{"_id":"themes/next/source/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1514806389000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1514806389000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1514806389000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"f7c44b0ee46cf2cf82a4c9455ba8d8b55299976f","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1514806389000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1514806389000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"18c3336ee3d09bd2da6a876e1336539f03d5a973","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"3b25edfa187d1bbbd0d38b50dd013cef54758abf","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9d16fa3c14ed76b71229f022b63a02fd0f580958","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"02fb8fa6b6c252b6bed469539cd057716606a787","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1514806389000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1514806389000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1514806389000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1514806389000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1514806389000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"7905a7f625702b45645d8be1268cb8af3f698c70","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"25dc25f61a232f03ca72472b7852f882448ec185","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"0a6c0efffdf18bddbc1d1238feaed282b09cd0fe","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"17e4df556a1001fc2a4e8fba9cf69574fea095f1","modified":1524878911562},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"12937cae17c96c74d5c58db6cb29de3b2dfa14a2","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"50305b6ad7d09d2ffa4854e39f41ec1f4fe984fd","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"535b3b4f8cb1eec2558e094320e7dfb01f94c0e7","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"aea21141015ca8c409d8b33e3e34ec505f464e93","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"d5a4e4fc17f1f7e7c3a61b52d8e2e9677e139de7","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"29a7ab7e908054c4c8d82b2556dbf3d72580efb8","modified":1524878360581},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"37e951e734a252fe8a81f452b963df2ba90bfe90","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1514806389000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1ccfbd4d0f5754b2dc2719a91245c95f547a7652","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1514806389000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1514806389000},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1514806389000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1514806389000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1514806389000},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1514806389000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1514806389000},{"_id":"public/content.json","hash":"eddd434f22167ca50d1a9bf4230513f3a7aaaaef","modified":1527736482674},{"_id":"public/atom.xml","hash":"3cafcaab3cbe49b753d8dfb48aea6f76f49a70a2","modified":1527736482674},{"_id":"public/categories/index.html","hash":"18eae403ce45e5f50afaa88c6b23f6fe1e325728","modified":1527737029975},{"_id":"public/404/index.html","hash":"ace26d768f15b548b48b7d5bc550aff7de916594","modified":1527737029975},{"_id":"public/tags/index.html","hash":"94fa8a4ba888d29c806ecc3af959fe22b649e39a","modified":1527737029975},{"_id":"public/about/index.html","hash":"bb7eeb59168198c5077a86aaefd408258559d03d","modified":1527737029975},{"_id":"public/search/index.html","hash":"de23545babf5cd5d4456de6007fb43c23da7aad0","modified":1527737029975},{"_id":"public/archives/2017/index.html","hash":"9162febf0dc183b50f2d77ef05c493e98f38044d","modified":1527737029975},{"_id":"public/archives/2017/12/index.html","hash":"9162febf0dc183b50f2d77ef05c493e98f38044d","modified":1527737029975},{"_id":"public/archives/2018/page/2/index.html","hash":"b3673b0d8e1aaff382dd9c977a489cddb8530f88","modified":1527737029975},{"_id":"public/archives/2018/03/index.html","hash":"e8a9292f9cb548365536399d007c213c19bcc2b0","modified":1527737029975},{"_id":"public/archives/2018/04/index.html","hash":"72cc728d2ed274b7ad4606c3ed8a7ac426cd1c45","modified":1527737029975},{"_id":"public/categories/WeChat小程序/index.html","hash":"0bba0df0027cffc475e84d647f6e77f0ec269a40","modified":1527737029975},{"_id":"public/categories/Spring-batch/index.html","hash":"d2a33cfa15b9dba3a271ccceccb97426126b8c81","modified":1527737029975},{"_id":"public/categories/杂项/index.html","hash":"2b7a33c02a077bcfdfc9e754ec9eb6da53bc7b61","modified":1527737029975},{"_id":"public/categories/Redis/index.html","hash":"282c41fc257149906ea97c0112b9907d7323b5ea","modified":1527737029975},{"_id":"public/categories/WordPress/index.html","hash":"954966a02a42055449925c3950791612ee0321e0","modified":1527737029975},{"_id":"public/categories/CentOS/index.html","hash":"d41c012053c60dfb12e5b8669ec7ff056f23145a","modified":1527737029975},{"_id":"public/categories/Dubbo/index.html","hash":"2546587d3789f459475023ab6a24dead44a5652b","modified":1527737029975},{"_id":"public/aticle/java a=a++引发的思考.html","hash":"aac9c9ce5bbf9a070e789f1047161e8598bee0fb","modified":1527737029975},{"_id":"public/aticle/P10.html","hash":"2535fe8e6b5a1e4978b97247701f5ddc869fb6aa","modified":1527737029975},{"_id":"public/aticle/P15.html","hash":"7005a8eedbfc0cb5791f4724bab99eb7984b6672","modified":1527737029975},{"_id":"public/aticle/P8.html","hash":"2dc6dfd7459c6bd7fcd71511418ba25f24774a66","modified":1527737029975},{"_id":"public/aticle/P12.html","hash":"3c1adf78965b20e4ab09c7640c08b0129dcb06d9","modified":1527737029975},{"_id":"public/aticle/P11.html","hash":"893f4f1a9096f123811f39f4e41fa9cce7e9a602","modified":1527737029975},{"_id":"public/aticle/P14.html","hash":"8a7f9cb6a1271fa4b53234c677b37be356fe0863","modified":1527737029975},{"_id":"public/aticle/P6.html","hash":"da4283584d326255a5c921beb99beddfaf842d41","modified":1527737029975},{"_id":"public/aticle/P4.html","hash":"aa04795e8df40b7a969920a39dad389cd183f6a8","modified":1527737029975},{"_id":"public/aticle/P3.html","hash":"9eda4572e1e89c9919b450bcde16569afc93db50","modified":1527737029975},{"_id":"public/aticle/P13.html","hash":"08e516e11ec45be5c50fa1ca52c5c1c35bbcd4ce","modified":1527737029975},{"_id":"public/aticle/P16.html","hash":"7391af463282e0d7f461faa01893187842381c96","modified":1527737029975},{"_id":"public/aticle/P5.html","hash":"41f5b1814552b0be1dfb4f2ca305f583f374b8c9","modified":1527737029975},{"_id":"public/aticle/P1.html","hash":"44838c654beb9fdc79227bad7aa23970f5f6f1c0","modified":1527737029975},{"_id":"public/aticle/P9.html","hash":"b3a10cc523fbcf744e0b531436a1bc99f1f31064","modified":1527737029975},{"_id":"public/archives/index.html","hash":"0c218e15762faccee2a790afd440bafafd5d5d68","modified":1527737029975},{"_id":"public/archives/page/2/index.html","hash":"59c88f31759e6ca1fe066bc94f39d1883cded3dc","modified":1527737029975},{"_id":"public/archives/2018/index.html","hash":"cffdbe34bda6007ed53655c3f08a417812e2c8e1","modified":1527737029975},{"_id":"public/archives/2018/01/index.html","hash":"08433ea62465dd9caab28b8736ed167fc0dbdaed","modified":1527737029975},{"_id":"public/categories/noname/index.html","hash":"f1e95e9b4d7b3662e5a6167034a47a1ce035b9b6","modified":1527737029975},{"_id":"public/categories/Docker/index.html","hash":"e54a58b6054e143578f5e928938639d854152613","modified":1527737029975},{"_id":"public/archives/2018/05/index.html","hash":"2206318daf4caeeec51fa7b9cc7419a7f81b148f","modified":1527737029975},{"_id":"public/tags/noname/index.html","hash":"5499fa2771e2c2b2ccd16281b86f2119d5e7e456","modified":1527737029975},{"_id":"public/categories/github/index.html","hash":"e1990c6f14410ddc7c7cdf2618ee1e0cac71c334","modified":1527737029975},{"_id":"public/categories/CentOS/杂项/index.html","hash":"5db9946f528fbad5c121b5d539f8c53b534f5d6a","modified":1527737029975},{"_id":"public/categories/java/index.html","hash":"60fc31cea78e2cd41660ffc006cc835026af4ed1","modified":1527737029975},{"_id":"public/tags/CentOS/index.html","hash":"ee84bea4204d72ff3143622f860616fefdc92bff","modified":1527737029975},{"_id":"public/tags/java基础/index.html","hash":"43ab286802a4a50fb5d4c9afc21da2cf517c905f","modified":1527737029975},{"_id":"public/tags/微信，小程序/index.html","hash":"92577d23a03ffae69611eb1f548f93a598c03aeb","modified":1527737029975},{"_id":"public/aticle/Dockerfile构建java环境镜像.html","hash":"3ebbafa98c95cca5df143e7efc09875815a507fe","modified":1527737029975},{"_id":"public/aticle/Docker容器中搭建rabbitmq集群.html","hash":"a2892da46b442dba6964082150c06d325d32c7a3","modified":1527737029975},{"_id":"public/aticle/Docker-Learning.html","hash":"78d5dad21a523f6353ec9665f54525dbf208f356","modified":1527737029975},{"_id":"public/aticle/自己搭建小项目.html","hash":"1072f89c48587222fbf2e12496e30844504385db","modified":1527675012024},{"_id":"public/index.html","hash":"5ad0ab97d506dd99dcfb7a18b1053ef3cea360b0","modified":1527737029975},{"_id":"public/page/2/index.html","hash":"b3086963a14018f159d93fa3d08ecd83b47bbf84","modified":1527737029975},{"_id":"public/tags/Docker/index.html","hash":"a8870c86c2d7dad3920484ff7e5f7a323edc53b6","modified":1527737029975},{"_id":"public/CNAME","hash":"a994532c1fe72df4a634dd248d2865ed9569af88","modified":1527555880712},{"_id":"public/favicon.ico","hash":"94e5d25d942bff5479470322454c951f2ddebac6","modified":1527736585396},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1527555880712},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1527555880712},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1527555880712},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1527555880712},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1527555880712},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1527555880712},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1527555880712},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1527555880712},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1527555880712},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1527555880713},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1527555880713},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1527555880713},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1527555880713},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1527555880713},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1527555880713},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1527555880713},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1527555880713},{"_id":"public/images/touxiang.jpg","hash":"af327665f3847d3b77c7c500416d2c3299a15f5b","modified":1527555880713},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1527555880713},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1527555880713},{"_id":"public/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1527555880713},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1527555880713},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1527555880713},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1527555880713},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1527555880713},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1527555880713},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1527555880713},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1527555880714},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1527555880714},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1527555880714},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1527555880714},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1527555880714},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1527555880714},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1527555880714},{"_id":"public/images/alipay.jpg","hash":"3f70bd1b2f6f06b1dc7a7129636ef297fdb08510","modified":1527555881935},{"_id":"public/images/wechatpay.jpg","hash":"01d3ef9a5bcdd3b528f0e0f6afded1993dbf94de","modified":1527555881938},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1527555881973},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1527555881973},{"_id":"public/lib/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1527555882006},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1527555882006},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1527555882006},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1527555882006},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1527555882006},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1527555882006},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1527555882006},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1527555882006},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1527555882006},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1527555882006},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1527555882007},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1527555882007},{"_id":"public/css/main.css","hash":"3caa210bea60a8d62b2ae636f5e4100a33208150","modified":1527555882007},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1527555882007},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1527555882007},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1527555882007},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1527555882007},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1527555882007},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1527555882007},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1527555882007},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1527555882041},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1527555882041},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1527555882041},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1527555882041},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1527555882041},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1527555882041},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1527555882041},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1527555882045},{"_id":"public/js/src/love.js","hash":"9e8e79d69ad8338761272f86fe5cad0ad5e503cc","modified":1527555882045},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1527555882045},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1527555882045},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1527555882045},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1527555882045},{"_id":"public/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1527555882045},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1527555882045},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1527555882045},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1527555882046},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1527555882046},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1527555882046},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1527555882046},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1527555882046},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1527555882046},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1527555882046},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1527555882046},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1527555882046},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1527555882046},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1527555882046},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1527555882046},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1527555882047},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1527555882047},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1527555882047},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1527555882047},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1527555882047},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1527555882047},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1527555882047},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1527555882047},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1527555882047},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1527555882047},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1527555882047},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1527555882047},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1527555882048},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1527555882048},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1527555882048},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1527555882168},{"_id":"source/_posts/Docker容器中搭建Redis集群.md","hash":"e5ae94c23c0ed689491a7876e2e7fab2e880c482","modified":1527675193384},{"_id":"public/aticle/Docker容器中搭建Redis集群.html","hash":"89c86d1ffb22ed1eeb90f8414d58383d229891b2","modified":1527737029975},{"_id":"source/_posts/Docker容器中构建mysql环境.md","hash":"2f3e6bdd80a3d84064beebceaaf93e7b7750527b","modified":1527679277252},{"_id":"themes/BlueLake/README.en.md","hash":"6cc6e346635bf26dd71030b9c3c6443507cd4108","modified":1527736218061},{"_id":"themes/BlueLake/LICENSE","hash":"4c3927c82d0aa4fac5cdf945e07afe5e24335891","modified":1527736218059},{"_id":"themes/BlueLake/README.md","hash":"66c3ef7a779b6d65bad90daa2e03bcb7a1bb742f","modified":1527736218063},{"_id":"themes/BlueLake/_config.yml","hash":"5f61722a584c185ba849d63fa5496b4365b0c047","modified":1527737020188},{"_id":"themes/BlueLake/package.json","hash":"cdef382c442618b24305fd3e38ac7a3accf87aa9","modified":1527736218134},{"_id":"themes/BlueLake/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1527736218019},{"_id":"themes/BlueLake/.git/config","hash":"05165d804714e9c1a0e5d4a99a95a77f34d4fac6","modified":1527736218038},{"_id":"themes/BlueLake/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1527736185452},{"_id":"themes/BlueLake/.git/index","hash":"3c496480a8df0701e2e8e9751a5ae457d713d05c","modified":1527736218161},{"_id":"themes/BlueLake/.git/packed-refs","hash":"e3b56de922e8682abdbf326de2487788e3f46c69","modified":1527736218004},{"_id":"themes/BlueLake/languages/de-DE.yml","hash":"a127deb32d1df69bbe50a3824a5f90472513c9c3","modified":1527736218069},{"_id":"themes/BlueLake/languages/en.yml","hash":"95bac2c366505d016b5defc47370679b9f5f3c4b","modified":1527736218071},{"_id":"themes/BlueLake/languages/es-ES.yml","hash":"baa68725feeec6643f875a532a9d55ba8aacdb2c","modified":1527736218072},{"_id":"themes/BlueLake/languages/fr-FR.yml","hash":"bd97d5e4b39d30da1644b90256dfc4e6b1d76988","modified":1527736218074},{"_id":"themes/BlueLake/languages/ko.yml","hash":"fc8826724f570136d9a2d3ec2705b7b7000e0f14","modified":1527736218076},{"_id":"themes/BlueLake/languages/tr.yml","hash":"5f13d55fdd5bdd1115075736e3e26a1ea1dd1dea","modified":1527736218078},{"_id":"themes/BlueLake/languages/zh-CN.yml","hash":"d7f5842295509746f878e627c4c7e298f3f1613a","modified":1527736218080},{"_id":"themes/BlueLake/languages/zh-TW.yml","hash":"d4d587ba81864910715c0c3879605cc6a9362e09","modified":1527736218082},{"_id":"themes/BlueLake/layout/base.jade","hash":"ee19d63543f898336dee846ed45d932239c40fe0","modified":1527736218124},{"_id":"themes/BlueLake/layout/archive.jade","hash":"98d9fb812edbc180878fdadb65bc38499eef2cc4","modified":1527736218122},{"_id":"themes/BlueLake/layout/page.jade","hash":"415404398931d98db28bff723886b07dcb8bbbc3","modified":1527736218128},{"_id":"themes/BlueLake/layout/category.jade","hash":"9f3a9f1d6f0bbad258b308ad8d49128c05b422cf","modified":1527736218125},{"_id":"themes/BlueLake/layout/post.jade","hash":"0305258c33e4d02f977ee1aaf7f2429b993fda17","modified":1527736218130},{"_id":"themes/BlueLake/layout/tag.jade","hash":"50c7af7565751db5d7672beb434768885fb224cb","modified":1527736218132},{"_id":"themes/BlueLake/layout/index.jade","hash":"dd81d9f7a6b388de2ab731b17b3ba55f70df4a5f","modified":1527736218127},{"_id":"themes/BlueLake/source/apple-touch-icon.png","hash":"98f0ecbdcdc1a0e8e52f4d786cbc011e5e06fa65","modified":1527736218136},{"_id":"themes/BlueLake/source/favicon.ico","hash":"94e5d25d942bff5479470322454c951f2ddebac6","modified":1527736218142},{"_id":"themes/BlueLake/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1527736185459},{"_id":"themes/BlueLake/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1527736185460},{"_id":"themes/BlueLake/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1527736185463},{"_id":"themes/BlueLake/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1527736185475},{"_id":"themes/BlueLake/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1527736185477},{"_id":"themes/BlueLake/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1527736185479},{"_id":"themes/BlueLake/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1527736185481},{"_id":"themes/BlueLake/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1527736185490},{"_id":"themes/BlueLake/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1527736185485},{"_id":"themes/BlueLake/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1527736185484},{"_id":"themes/BlueLake/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1527736185493},{"_id":"themes/BlueLake/.git/logs/HEAD","hash":"4a963bdac0813581a726efe05740e2f1b97e59ff","modified":1527736218026},{"_id":"themes/BlueLake/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1527736185496},{"_id":"themes/BlueLake/layout/_partial/comment_count.jade","hash":"21d05990aa5a19632f9ed51085ef7727adeea17a","modified":1527736218086},{"_id":"themes/BlueLake/layout/_partial/after_footer.jade","hash":"3f11d2b5a4c647bf2b37c4d00bdc250cda80b770","modified":1527736218085},{"_id":"themes/BlueLake/layout/_partial/comments_js.jade","hash":"d970c81b5cdbd7c0348ee28e93bcbb006d613b6d","modified":1527736218091},{"_id":"themes/BlueLake/layout/_partial/footer.jade","hash":"e0aa5d7adc1218a324a484abe3513e9545f89067","modified":1527736218092},{"_id":"themes/BlueLake/layout/_partial/helpers.jade","hash":"9e44f6d32f2449b4109c33118f8285fa2fc7b023","modified":1527736218094},{"_id":"themes/BlueLake/layout/_partial/comments.jade","hash":"c1f1955d12aee22a931a3f4ad9d0e9a408e80f3c","modified":1527736218089},{"_id":"themes/BlueLake/layout/_partial/mathjax.jade","hash":"ac6e3a92bf18ab6bbd0e041b6796b295bae963ee","modified":1527736218096},{"_id":"themes/BlueLake/layout/_partial/mathjax2.jade","hash":"234a792e64ba208fa97d2f99772ece23056a53ec","modified":1527736218097},{"_id":"themes/BlueLake/layout/_partial/paginator.jade","hash":"03ad0c49ae6f8a999ae35b38d08e25775f51f52a","modified":1527736218099},{"_id":"themes/BlueLake/layout/_partial/search.jade","hash":"4f2fba7fcb39a6bf70ff04dad9a3dab2563b21e7","modified":1527736218103},{"_id":"themes/BlueLake/layout/_partial/post_nav.jade","hash":"b11d9e6000449838b17f508429f29ffb60f53096","modified":1527736218101},{"_id":"themes/BlueLake/layout/_partial/share.jade","hash":"ba0839518db2cb9dafee67ca5e471219bfba2e90","modified":1527736218105},{"_id":"themes/BlueLake/layout/_partial/tag.jade","hash":"6145b483b271bba05ad1db7c039fe352a768215b","modified":1527736218106},{"_id":"themes/BlueLake/layout/_partial/totop.jade","hash":"c632919f04194dcf6e0e8ccc572554a859aa922b","modified":1527736218108},{"_id":"themes/BlueLake/layout/_widget/category.jade","hash":"0107affa0c6b22e09546fcf82a6f71ba2dd1e315","modified":1527736218112},{"_id":"themes/BlueLake/layout/_widget/archive.jade","hash":"6e587b7d254d0d92b959ba58262f5e81b618eba2","modified":1527736218110},{"_id":"themes/BlueLake/layout/_widget/links.jade","hash":"9af40206a525db1cb9761fa6facb36332057acf3","modified":1527736218113},{"_id":"themes/BlueLake/layout/_widget/recent_comments.jade","hash":"164a83faaf92ec19d268fd303bf6e30348ddef5c","modified":1527736218115},{"_id":"themes/BlueLake/layout/_widget/recent_posts.jade","hash":"c6f778d5d2f13bacbd83a56a9e9faaeac0dda0ed","modified":1527736218116},{"_id":"themes/BlueLake/layout/_widget/weibo.jade","hash":"4e90378aa88c5694126dc8ea5bed3bb2f8642e53","modified":1527736218120},{"_id":"themes/BlueLake/layout/_widget/tag.jade","hash":"c75308c2b72456cfb98cb80f280c66e58f171705","modified":1527736218118},{"_id":"themes/BlueLake/source/css/highlight.styl","hash":"92b5c306f276f8ea6a134e303b1b63612d25ecfe","modified":1527736218138},{"_id":"themes/BlueLake/source/css/style.styl","hash":"45776bc176bc8ed0d664e953e23d6a0a9a030929","modified":1527736218140},{"_id":"themes/BlueLake/source/iconfont/iconfont.svg","hash":"a910f5840f8e25b7a6e5c47b9a04ae49b9db8c32","modified":1527736218146},{"_id":"themes/BlueLake/source/iconfont/iconfont.ttf","hash":"5770696cc0d19d9c9479912a5cf54c9dd4ab24c4","modified":1527736218148},{"_id":"themes/BlueLake/source/iconfont/iconfont.eot","hash":"e664dd848ca65fe3aca4acfc234ff9c18ffd4c33","modified":1527736218144},{"_id":"themes/BlueLake/source/iconfont/iconfont.woff","hash":"df2bd849134cbd02beb385e5061a30b923c99058","modified":1527736218150},{"_id":"themes/BlueLake/source/js/search.json.js","hash":"7ce826f7b678ff3c524fce8bbd480c188e50c7ee","modified":1527736218156},{"_id":"themes/BlueLake/source/js/toctotop.js","hash":"9e68d688f2f12ec193ce9496beb0fd42e1de2288","modified":1527736218158},{"_id":"themes/BlueLake/source/js/totop.js","hash":"d9367c6fa3e973bc5f32ce38d951858455726a02","modified":1527736218160},{"_id":"themes/BlueLake/source/img/bg.jpg","hash":"d23d92484e98adcbea7266ebfdfef7fb3fc42ee0","modified":1527736218153},{"_id":"themes/BlueLake/.git/refs/heads/master","hash":"c292cfc66fa6a171bcb9e25157b4ee8f09da6755","modified":1527736218025},{"_id":"themes/BlueLake/.git/objects/pack/pack-40a558e4c44e2a17370a67137d6ceed12664167e.idx","hash":"a139f0bed0851253cd7035abcbfb5d53feea144b","modified":1527736217808},{"_id":"themes/BlueLake/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1527736218015},{"_id":"themes/BlueLake/.git/logs/refs/heads/master","hash":"4a963bdac0813581a726efe05740e2f1b97e59ff","modified":1527736218030},{"_id":"themes/BlueLake/.git/logs/refs/remotes/origin/HEAD","hash":"4a963bdac0813581a726efe05740e2f1b97e59ff","modified":1527736218014},{"_id":"themes/BlueLake/.git/objects/pack/pack-40a558e4c44e2a17370a67137d6ceed12664167e.pack","hash":"3365ddefed60bbd7a6422d83c31ea15144f5a80f","modified":1527736217864},{"_id":"public/apple-touch-icon.png","hash":"98f0ecbdcdc1a0e8e52f4d786cbc011e5e06fa65","modified":1527736585396},{"_id":"public/iconfont/iconfont.svg","hash":"a910f5840f8e25b7a6e5c47b9a04ae49b9db8c32","modified":1527736585396},{"_id":"public/iconfont/iconfont.woff","hash":"df2bd849134cbd02beb385e5061a30b923c99058","modified":1527736585396},{"_id":"public/iconfont/iconfont.ttf","hash":"5770696cc0d19d9c9479912a5cf54c9dd4ab24c4","modified":1527736585396},{"_id":"public/iconfont/iconfont.eot","hash":"e664dd848ca65fe3aca4acfc234ff9c18ffd4c33","modified":1527736585396},{"_id":"public/css/highlight.css","hash":"932879716cbce6f9a1b830070ed514082398f1ca","modified":1527736586142},{"_id":"public/img/bg.jpg","hash":"d23d92484e98adcbea7266ebfdfef7fb3fc42ee0","modified":1527736586142},{"_id":"public/js/search.json.js","hash":"a0e8dfee9b9845aabd64360d497df7c0767b7235","modified":1527736586176},{"_id":"public/js/toctotop.js","hash":"ad6386bc746ff375715ca9da17af4716ea86e06a","modified":1527736586176},{"_id":"public/css/style.css","hash":"45a02c24123d7107ed700c695506d5ef7c274fc1","modified":1527736586176},{"_id":"public/js/totop.js","hash":"5b1131830209c2daaf6fe34c5e39ab7c1059bfa4","modified":1527736586176}],"Category":[{"name":"noname","_id":"cjhqzbtli000484gpfsrn7lbe"},{"name":"Docker","_id":"cjhqzbtlx000c84gpatvs9rpu"},{"name":"WeChat小程序","_id":"cjhqzbtm3000j84gpr9d581tx"},{"name":"Redis","_id":"cjhqzbtma000q84gp526mm3fq"},{"name":"杂项","_id":"cjhqzbtmp000y84gpl91ogy81"},{"name":"Spring-batch","_id":"cjhqzbtmt001484gp1dxhf233"},{"name":"WordPress","_id":"cjhqzbtmy001984gpr2239dkd"},{"name":"CentOS","_id":"cjhqzbtn3001i84gpeyamvyck"},{"name":"Dubbo","_id":"cjhqzbtn4001l84gpfzvktw83"},{"name":"github","_id":"cjhqzbtn6001o84gpok97mp5c"},{"name":"java","_id":"cjhqzbtne001u84gp47qilb9j"},{"name":"杂项","parent":"cjhqzbtn3001i84gpeyamvyck","_id":"cjhqzbtni001x84gpaditwqjn"}],"Data":[],"Page":[{"title":"404","date":"2018-03-21T12:50:55.000Z","_content":"","source":"404/index.md","raw":"---\ntitle: 404\ndate: 2018-03-21 20:50:55\n---\n","updated":"2018-03-22T01:25:05.608Z","path":"404/index.html","comments":1,"layout":"page","_id":"cjhqzbtl1000084gpo1yrae8m","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2018-04-26T09:08:23.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-04-26 17:08:23\ntype: \"categories\"\ncomments: false  \n\n---\n","updated":"2018-04-27T01:08:23.607Z","path":"categories/index.html","layout":"page","_id":"cjhqzbtle000284gpna351v1p","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"404","date":"2018-03-21T12:50:55.000Z","_content":"\n自我审核中。。。。\n","source":"about/index.md","raw":"---\ntitle: 404\ndate: 2018-03-21 20:50:55\n---\n\n自我审核中。。。。\n","updated":"2018-03-22T09:38:31.478Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjhqzbtln000684gp0x8fjpek","content":"<p>自我审核中。。。。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>自我审核中。。。。</p>\n"},{"title":"search","date":"2018-03-21T12:50:47.000Z","_content":"","source":"search/index.md","raw":"---\ntitle: search\ndate: 2018-03-21 20:50:47\n---\n","updated":"2018-03-22T01:25:05.609Z","path":"search/index.html","comments":1,"layout":"page","_id":"cjhqzbtls000884gp6o5ak1ca","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2018-04-26T09:10:39.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-04-26 17:10:39\ntype: \"tags\"\ncomments: false\n\n---\n","updated":"2018-04-27T01:08:48.354Z","path":"tags/index.html","layout":"page","_id":"cjhqzbtlv000a84gpqftc2fpt","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Dockerfile构建java环境镜像","id":"521","date":"2018-05-28T10:20:31.000Z","author":["linxu"],"_content":"\n# dockerfile详解 #\nDockerfile是一个文本格式的配置文件，用户可以使用Dockerfile快速构建自定义的镜像。\n\n## dockerfile基本结构 ##\ndockerfile一般分为四部分:\n1. 基础镜像信息\n2. 维护者信息\n3. 镜像操作指令\n4. 容器启动时执行指令\n\n## dockerfile基本命令 ##\n1. FROM命令，选择一个基础镜像，如果有多个，可以使用多个from\n\t```\n\tFROM <image> 或 FROM <image>:<tag>\n\t```\n2. MAINTAINER命令，说明作者信息\n\t```\n\tMAINTAINER <name> <email>\n\t```\n3. RUN命令，RUN指令将在当前镜像基础上执行指定命令\n\t```\n\tRUN <command> \n\tRUN [\"executable\",\"param1\",\"param2\"] \n\t```\n4. cMD命令，指定启动容器时执行的命令，每个Dockerfile只能有一条CMD命令。如果指定了多条命令，只有最后一条会被执行。如果用户启动容器的时候指定了运行的命令，则会覆盖掉CMD指定的命令\n\t```\n\t支持三种格式：\n\tCMD [\"executable\",\"param1\",\"param2\"]使用exec执行，推荐方式。\n\tCMD command param1 prarm2 在/bin/sh中执行，提供给需要交互的应用\n\tCMD [\"prarm1\",\"param2\"]提供给ENTRYPOINT的默认参数\n\t```\n5. EXPOSE命令，暴露容器端口\n\t```\n\tEXPOSE <port> <port> ...\n\t```\n6. ENV命令，指定环境变量\n\t```\n\tENV <key> <value>\n\t```\n7. ADD命令，复制宿主机文件或目录到容器中，其中src可以是Dockerfile所在目录的一个相对路径(文件或目录)，也可以是一个URL，还可以是一个tar文件\n\t```\n\tADD <src> <dest>\n\t```\n8. COPY命令，复制本地主机的src为容器中的dest，目标路径不存在时，会自动创建\n\t```\n\tCOPY <src> <dest>\n\t```\n9. ENTRYPOINT命令，配置容器启动后执行的命令，并且不可被docker run 提供的参数覆盖。每个Dockerfile中只能有一个ENTRYPOINT，当指定多个ENTRYPOINT时，只有最后一个生效。\n\t```\t\n\tENTRYPOINT [\"executable\",\"param1\",\"param2\"]\n\tENTRYPOING command param1 param2 (shell中执行)\n\t```\n10. VOLUME命令，创建一个可以从本地主机或其他容器挂载的挂载点，一般用来存放数据库和需要保持的数据等。\n\t```\n\tVOLUME [\"/data\"]\n\t```\n11. USER命令，指定运行容器时的用户名或UID，后续的RUN也会使用指定用户\n\t```\n\tUSER daemon\n\t```\n12. WORKDIR命令，为后续的RUN、CMD、ENTRYPOINT指令配置工作目录，可以使用多个WORKDIR指令，后续命令如果参数是相对路径，则会基于之前命令指定的路径。\n\t```\n\tWORKDIR /path/to/workdir\n\t```\n13. ONBUILD命令，配置当所创建的镜像作为其他新创建镜像的基础镜像时，所执行的操作指令\n\t```\n\tONBUILD [INSTRUCTION]\n\t```\n\n# Dockerfile构建java环境镜像 #  \n## 创建Dockerfile文件 ##\n```\nmkdir /usr/file\nvi /usr/file/Dockfile #文件名必须是Dockfile\n#以下是文件内容\nfrom centos\nMAINTAINER reallinxu\n\nRUN yum install -y wget\nRUN mkdir /usr/software\nRUN mkdir /usr/jdk\nRUN wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" -P /usr/software http://download.oracle.com/otn-pub/java/jdk/8u171-b11/512cd62ec5174c3487ac17c61aaa89e8/jdk-8u171-linux-x64.tar.gz\nRUN tar xzf /usr/software/jdk-8u171-linux-x64.tar.gz -C /usr/jdk\nENV JAVA_HOME /usr/jdk/jdk1.8.0_171\nENV PATH $PATH:$JAVA_HOME/bin\nEXPOSE 8080\n```\n\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/javaimage:v1\" .\n```\n\n## 运行容器 ##\n```\ndocker run -i -t reallinxu/javaimage:v1 /bin/bash\n```\n\n# 构建noname镜像 #\n使用本地jdk创建，首先将jdk-8u144-linux-x64.tar.gz，放到Dockerfile同一个文件夹下\n```\n#Dockerfile文件\nfrom centos\nMAINTAINER reallinxu\n\nCOPY jdk-8u144-linux-x64.tar.gz /usr/software/jdk-8u144-linux-x64.tar.gz\nWORKDIR /usr/software\nRUN mkdir /usr/jdk\nRUN tar xzf /usr/software/jdk-8u144-linux-x64.tar.gz -C /usr/jdk\nENV JAVA_HOME /usr/jdk/jdk1.8.0_171\nENV PATH $PATH:$JAVA_HOME/bin\nEXPOSE 8080\n\ndocker build -t=\"reallinxu/noname\" .\n```","source":"_posts/Dockerfile构建java环境镜像.md","raw":"---\ntitle: \"Dockerfile构建java环境镜像\"\ntags:\n  - noname\nid: 521\ncategories:\n  - noname\ndate: 2018-05-28 18:20:31\nauthor: \n  - linxu\n---\n\n# dockerfile详解 #\nDockerfile是一个文本格式的配置文件，用户可以使用Dockerfile快速构建自定义的镜像。\n\n## dockerfile基本结构 ##\ndockerfile一般分为四部分:\n1. 基础镜像信息\n2. 维护者信息\n3. 镜像操作指令\n4. 容器启动时执行指令\n\n## dockerfile基本命令 ##\n1. FROM命令，选择一个基础镜像，如果有多个，可以使用多个from\n\t```\n\tFROM <image> 或 FROM <image>:<tag>\n\t```\n2. MAINTAINER命令，说明作者信息\n\t```\n\tMAINTAINER <name> <email>\n\t```\n3. RUN命令，RUN指令将在当前镜像基础上执行指定命令\n\t```\n\tRUN <command> \n\tRUN [\"executable\",\"param1\",\"param2\"] \n\t```\n4. cMD命令，指定启动容器时执行的命令，每个Dockerfile只能有一条CMD命令。如果指定了多条命令，只有最后一条会被执行。如果用户启动容器的时候指定了运行的命令，则会覆盖掉CMD指定的命令\n\t```\n\t支持三种格式：\n\tCMD [\"executable\",\"param1\",\"param2\"]使用exec执行，推荐方式。\n\tCMD command param1 prarm2 在/bin/sh中执行，提供给需要交互的应用\n\tCMD [\"prarm1\",\"param2\"]提供给ENTRYPOINT的默认参数\n\t```\n5. EXPOSE命令，暴露容器端口\n\t```\n\tEXPOSE <port> <port> ...\n\t```\n6. ENV命令，指定环境变量\n\t```\n\tENV <key> <value>\n\t```\n7. ADD命令，复制宿主机文件或目录到容器中，其中src可以是Dockerfile所在目录的一个相对路径(文件或目录)，也可以是一个URL，还可以是一个tar文件\n\t```\n\tADD <src> <dest>\n\t```\n8. COPY命令，复制本地主机的src为容器中的dest，目标路径不存在时，会自动创建\n\t```\n\tCOPY <src> <dest>\n\t```\n9. ENTRYPOINT命令，配置容器启动后执行的命令，并且不可被docker run 提供的参数覆盖。每个Dockerfile中只能有一个ENTRYPOINT，当指定多个ENTRYPOINT时，只有最后一个生效。\n\t```\t\n\tENTRYPOINT [\"executable\",\"param1\",\"param2\"]\n\tENTRYPOING command param1 param2 (shell中执行)\n\t```\n10. VOLUME命令，创建一个可以从本地主机或其他容器挂载的挂载点，一般用来存放数据库和需要保持的数据等。\n\t```\n\tVOLUME [\"/data\"]\n\t```\n11. USER命令，指定运行容器时的用户名或UID，后续的RUN也会使用指定用户\n\t```\n\tUSER daemon\n\t```\n12. WORKDIR命令，为后续的RUN、CMD、ENTRYPOINT指令配置工作目录，可以使用多个WORKDIR指令，后续命令如果参数是相对路径，则会基于之前命令指定的路径。\n\t```\n\tWORKDIR /path/to/workdir\n\t```\n13. ONBUILD命令，配置当所创建的镜像作为其他新创建镜像的基础镜像时，所执行的操作指令\n\t```\n\tONBUILD [INSTRUCTION]\n\t```\n\n# Dockerfile构建java环境镜像 #  \n## 创建Dockerfile文件 ##\n```\nmkdir /usr/file\nvi /usr/file/Dockfile #文件名必须是Dockfile\n#以下是文件内容\nfrom centos\nMAINTAINER reallinxu\n\nRUN yum install -y wget\nRUN mkdir /usr/software\nRUN mkdir /usr/jdk\nRUN wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" -P /usr/software http://download.oracle.com/otn-pub/java/jdk/8u171-b11/512cd62ec5174c3487ac17c61aaa89e8/jdk-8u171-linux-x64.tar.gz\nRUN tar xzf /usr/software/jdk-8u171-linux-x64.tar.gz -C /usr/jdk\nENV JAVA_HOME /usr/jdk/jdk1.8.0_171\nENV PATH $PATH:$JAVA_HOME/bin\nEXPOSE 8080\n```\n\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/javaimage:v1\" .\n```\n\n## 运行容器 ##\n```\ndocker run -i -t reallinxu/javaimage:v1 /bin/bash\n```\n\n# 构建noname镜像 #\n使用本地jdk创建，首先将jdk-8u144-linux-x64.tar.gz，放到Dockerfile同一个文件夹下\n```\n#Dockerfile文件\nfrom centos\nMAINTAINER reallinxu\n\nCOPY jdk-8u144-linux-x64.tar.gz /usr/software/jdk-8u144-linux-x64.tar.gz\nWORKDIR /usr/software\nRUN mkdir /usr/jdk\nRUN tar xzf /usr/software/jdk-8u144-linux-x64.tar.gz -C /usr/jdk\nENV JAVA_HOME /usr/jdk/jdk1.8.0_171\nENV PATH $PATH:$JAVA_HOME/bin\nEXPOSE 8080\n\ndocker build -t=\"reallinxu/noname\" .\n```","slug":"Dockerfile构建java环境镜像","published":1,"updated":"2018-05-30T11:16:42.233Z","_id":"cjhqzbtl6000184gpg2mn357m","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"dockerfile详解\"><a href=\"#dockerfile详解\" class=\"headerlink\" title=\"dockerfile详解\"></a>dockerfile详解</h1><p>Dockerfile是一个文本格式的配置文件，用户可以使用Dockerfile快速构建自定义的镜像。</p>\n<h2 id=\"dockerfile基本结构\"><a href=\"#dockerfile基本结构\" class=\"headerlink\" title=\"dockerfile基本结构\"></a>dockerfile基本结构</h2><p>dockerfile一般分为四部分:</p>\n<ol>\n<li>基础镜像信息</li>\n<li>维护者信息</li>\n<li>镜像操作指令</li>\n<li>容器启动时执行指令</li>\n</ol>\n<h2 id=\"dockerfile基本命令\"><a href=\"#dockerfile基本命令\" class=\"headerlink\" title=\"dockerfile基本命令\"></a>dockerfile基本命令</h2><ol>\n<li><p>FROM命令，选择一个基础镜像，如果有多个，可以使用多个from</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM &lt;image&gt; 或 FROM &lt;image&gt;:&lt;tag&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>MAINTAINER命令，说明作者信息</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MAINTAINER &lt;name&gt; &lt;email&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>RUN命令，RUN指令将在当前镜像基础上执行指定命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RUN &lt;command&gt; </span><br><span class=\"line\">RUN [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>cMD命令，指定启动容器时执行的命令，每个Dockerfile只能有一条CMD命令。如果指定了多条命令，只有最后一条会被执行。如果用户启动容器的时候指定了运行的命令，则会覆盖掉CMD指定的命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">支持三种格式：</span><br><span class=\"line\">CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]使用exec执行，推荐方式。</span><br><span class=\"line\">CMD command param1 prarm2 在/bin/sh中执行，提供给需要交互的应用</span><br><span class=\"line\">CMD [&quot;prarm1&quot;,&quot;param2&quot;]提供给ENTRYPOINT的默认参数</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>EXPOSE命令，暴露容器端口</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPOSE &lt;port&gt; &lt;port&gt; ...</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ENV命令，指定环境变量</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ENV &lt;key&gt; &lt;value&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ADD命令，复制宿主机文件或目录到容器中，其中src可以是Dockerfile所在目录的一个相对路径(文件或目录)，也可以是一个URL，还可以是一个tar文件</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ADD &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>COPY命令，复制本地主机的src为容器中的dest，目标路径不存在时，会自动创建</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COPY &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ENTRYPOINT命令，配置容器启动后执行的命令，并且不可被docker run 提供的参数覆盖。每个Dockerfile中只能有一个ENTRYPOINT，当指定多个ENTRYPOINT时，只有最后一个生效。</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ENTRYPOINT [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br><span class=\"line\">ENTRYPOING command param1 param2 (shell中执行)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>VOLUME命令，创建一个可以从本地主机或其他容器挂载的挂载点，一般用来存放数据库和需要保持的数据等。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">VOLUME [&quot;/data&quot;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>USER命令，指定运行容器时的用户名或UID，后续的RUN也会使用指定用户</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USER daemon</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>WORKDIR命令，为后续的RUN、CMD、ENTRYPOINT指令配置工作目录，可以使用多个WORKDIR指令，后续命令如果参数是相对路径，则会基于之前命令指定的路径。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WORKDIR /path/to/workdir</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ONBUILD命令，配置当所创建的镜像作为其他新创建镜像的基础镜像时，所执行的操作指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ONBUILD [INSTRUCTION]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"Dockerfile构建java环境镜像\"><a href=\"#Dockerfile构建java环境镜像\" class=\"headerlink\" title=\"Dockerfile构建java环境镜像\"></a>Dockerfile构建java环境镜像</h1><h2 id=\"创建Dockerfile文件\"><a href=\"#创建Dockerfile文件\" class=\"headerlink\" title=\"创建Dockerfile文件\"></a>创建Dockerfile文件</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/file</span><br><span class=\"line\">vi /usr/file/Dockfile #文件名必须是Dockfile</span><br><span class=\"line\">#以下是文件内容</span><br><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">RUN yum install -y wget</span><br><span class=\"line\">RUN mkdir /usr/software</span><br><span class=\"line\">RUN mkdir /usr/jdk</span><br><span class=\"line\">RUN wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; -P /usr/software http://download.oracle.com/otn-pub/java/jdk/8u171-b11/512cd62ec5174c3487ac17c61aaa89e8/jdk-8u171-linux-x64.tar.gz</span><br><span class=\"line\">RUN tar xzf /usr/software/jdk-8u171-linux-x64.tar.gz -C /usr/jdk</span><br><span class=\"line\">ENV JAVA_HOME /usr/jdk/jdk1.8.0_171</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class=\"line\">EXPOSE 8080</span><br></pre></td></tr></table></figure>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/javaimage:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"运行容器\"><a href=\"#运行容器\" class=\"headerlink\" title=\"运行容器\"></a>运行容器</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t reallinxu/javaimage:v1 /bin/bash</span><br></pre></td></tr></table></figure>\n<h1 id=\"构建noname镜像\"><a href=\"#构建noname镜像\" class=\"headerlink\" title=\"构建noname镜像\"></a>构建noname镜像</h1><p>使用本地jdk创建，首先将jdk-8u144-linux-x64.tar.gz，放到Dockerfile同一个文件夹下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#Dockerfile文件</span><br><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">COPY jdk-8u144-linux-x64.tar.gz /usr/software/jdk-8u144-linux-x64.tar.gz</span><br><span class=\"line\">WORKDIR /usr/software</span><br><span class=\"line\">RUN mkdir /usr/jdk</span><br><span class=\"line\">RUN tar xzf /usr/software/jdk-8u144-linux-x64.tar.gz -C /usr/jdk</span><br><span class=\"line\">ENV JAVA_HOME /usr/jdk/jdk1.8.0_171</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class=\"line\">EXPOSE 8080</span><br><span class=\"line\"></span><br><span class=\"line\">docker build -t=&quot;reallinxu/noname&quot; .</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"dockerfile详解\"><a href=\"#dockerfile详解\" class=\"headerlink\" title=\"dockerfile详解\"></a>dockerfile详解</h1><p>Dockerfile是一个文本格式的配置文件，用户可以使用Dockerfile快速构建自定义的镜像。</p>\n<h2 id=\"dockerfile基本结构\"><a href=\"#dockerfile基本结构\" class=\"headerlink\" title=\"dockerfile基本结构\"></a>dockerfile基本结构</h2><p>dockerfile一般分为四部分:</p>\n<ol>\n<li>基础镜像信息</li>\n<li>维护者信息</li>\n<li>镜像操作指令</li>\n<li>容器启动时执行指令</li>\n</ol>\n<h2 id=\"dockerfile基本命令\"><a href=\"#dockerfile基本命令\" class=\"headerlink\" title=\"dockerfile基本命令\"></a>dockerfile基本命令</h2><ol>\n<li><p>FROM命令，选择一个基础镜像，如果有多个，可以使用多个from</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM &lt;image&gt; 或 FROM &lt;image&gt;:&lt;tag&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>MAINTAINER命令，说明作者信息</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MAINTAINER &lt;name&gt; &lt;email&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>RUN命令，RUN指令将在当前镜像基础上执行指定命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RUN &lt;command&gt; </span><br><span class=\"line\">RUN [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>cMD命令，指定启动容器时执行的命令，每个Dockerfile只能有一条CMD命令。如果指定了多条命令，只有最后一条会被执行。如果用户启动容器的时候指定了运行的命令，则会覆盖掉CMD指定的命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">支持三种格式：</span><br><span class=\"line\">CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]使用exec执行，推荐方式。</span><br><span class=\"line\">CMD command param1 prarm2 在/bin/sh中执行，提供给需要交互的应用</span><br><span class=\"line\">CMD [&quot;prarm1&quot;,&quot;param2&quot;]提供给ENTRYPOINT的默认参数</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>EXPOSE命令，暴露容器端口</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EXPOSE &lt;port&gt; &lt;port&gt; ...</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ENV命令，指定环境变量</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ENV &lt;key&gt; &lt;value&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ADD命令，复制宿主机文件或目录到容器中，其中src可以是Dockerfile所在目录的一个相对路径(文件或目录)，也可以是一个URL，还可以是一个tar文件</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ADD &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>COPY命令，复制本地主机的src为容器中的dest，目标路径不存在时，会自动创建</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COPY &lt;src&gt; &lt;dest&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ENTRYPOINT命令，配置容器启动后执行的命令，并且不可被docker run 提供的参数覆盖。每个Dockerfile中只能有一个ENTRYPOINT，当指定多个ENTRYPOINT时，只有最后一个生效。</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ENTRYPOINT [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br><span class=\"line\">ENTRYPOING command param1 param2 (shell中执行)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>VOLUME命令，创建一个可以从本地主机或其他容器挂载的挂载点，一般用来存放数据库和需要保持的数据等。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">VOLUME [&quot;/data&quot;]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>USER命令，指定运行容器时的用户名或UID，后续的RUN也会使用指定用户</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USER daemon</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>WORKDIR命令，为后续的RUN、CMD、ENTRYPOINT指令配置工作目录，可以使用多个WORKDIR指令，后续命令如果参数是相对路径，则会基于之前命令指定的路径。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WORKDIR /path/to/workdir</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ONBUILD命令，配置当所创建的镜像作为其他新创建镜像的基础镜像时，所执行的操作指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ONBUILD [INSTRUCTION]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"Dockerfile构建java环境镜像\"><a href=\"#Dockerfile构建java环境镜像\" class=\"headerlink\" title=\"Dockerfile构建java环境镜像\"></a>Dockerfile构建java环境镜像</h1><h2 id=\"创建Dockerfile文件\"><a href=\"#创建Dockerfile文件\" class=\"headerlink\" title=\"创建Dockerfile文件\"></a>创建Dockerfile文件</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/file</span><br><span class=\"line\">vi /usr/file/Dockfile #文件名必须是Dockfile</span><br><span class=\"line\">#以下是文件内容</span><br><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">RUN yum install -y wget</span><br><span class=\"line\">RUN mkdir /usr/software</span><br><span class=\"line\">RUN mkdir /usr/jdk</span><br><span class=\"line\">RUN wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; -P /usr/software http://download.oracle.com/otn-pub/java/jdk/8u171-b11/512cd62ec5174c3487ac17c61aaa89e8/jdk-8u171-linux-x64.tar.gz</span><br><span class=\"line\">RUN tar xzf /usr/software/jdk-8u171-linux-x64.tar.gz -C /usr/jdk</span><br><span class=\"line\">ENV JAVA_HOME /usr/jdk/jdk1.8.0_171</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class=\"line\">EXPOSE 8080</span><br></pre></td></tr></table></figure>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/javaimage:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"运行容器\"><a href=\"#运行容器\" class=\"headerlink\" title=\"运行容器\"></a>运行容器</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t reallinxu/javaimage:v1 /bin/bash</span><br></pre></td></tr></table></figure>\n<h1 id=\"构建noname镜像\"><a href=\"#构建noname镜像\" class=\"headerlink\" title=\"构建noname镜像\"></a>构建noname镜像</h1><p>使用本地jdk创建，首先将jdk-8u144-linux-x64.tar.gz，放到Dockerfile同一个文件夹下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#Dockerfile文件</span><br><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">COPY jdk-8u144-linux-x64.tar.gz /usr/software/jdk-8u144-linux-x64.tar.gz</span><br><span class=\"line\">WORKDIR /usr/software</span><br><span class=\"line\">RUN mkdir /usr/jdk</span><br><span class=\"line\">RUN tar xzf /usr/software/jdk-8u144-linux-x64.tar.gz -C /usr/jdk</span><br><span class=\"line\">ENV JAVA_HOME /usr/jdk/jdk1.8.0_171</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class=\"line\">EXPOSE 8080</span><br><span class=\"line\"></span><br><span class=\"line\">docker build -t=&quot;reallinxu/noname&quot; .</span><br></pre></td></tr></table></figure></p>\n"},{"title":"Docker入门及基础命令","id":"101","date":"2018-05-16T02:20:31.000Z","author":["linxu"],"_content":"# Docker入门 #  \n## Docker介绍 ##\n>关于 Docker 是什么，有个著名的隐喻：集装箱。但是它却起了个“码头工人”（docker 的英文翻译）的名字。这无疑给使用者很多暗示：“快来用吧！用了 Docker，就像世界出现了集装箱，这样你的业务就可以随意的、无拘无束的运行在任何地方（Docker 公司的口号：Build，Ship，and Run Any App，Anywhere），于是码头工人就基本都可以下岗了。”但是人们往往忽略了一个问题，隐喻的好处是方便人理解一个不容易理解的概念，但并不能解释其概念本身。 　　　　　　　　　　　　　　　　　　 　　—————————邹立巍《什么是 Docker?》\n\nDocker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。\n\nDocker主要关键词是容器和镜像，可以从仓库中获取所需要的镜像，通过镜像创建容器。每一个容器都相当于一个完全独立的虚拟机(Docker不是虚拟机)，但是所占用内存消耗和启动时间等都远远小于虚拟机。在容器中可以根据所需安装软件，部署应用服务等。\n\n## Docker与Vm对比 ##\n![](https://i.imgur.com/Vx4ilht.jpg)\n\n图中可以看出docker不需要Hypervisor实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理机的硬件资源。因此在CPU、内存利用率上docker将会在效率上有优势。docker利用的是宿主机的内核，而不需要Guest OS,因此新建一个docker容器只需要几秒钟。docker不需要增加Guest OS，所以在一台物理机上我们可以很容易建立成百上千的容器，而只能建立几个虚拟机。\n\n## 安装Docker ##\ndocker的安装非常简单，centOs中直接使用  \n\n\tyum install docker\n即可安装。\n\n## Docker基础命令 ##\n1. 启动docker  \n\t```\n\tservice docker start    \t#启动\n\tservice docker stop \t\t#停止\n\tservice docker restart \t \t#重启\n\t```\n2. 运行创建容器\n\t```\n\tsudo docker run -i -t ubuntu /bin/bash\n\t-i 保证容器中STDIN是开启的。STDIN是标准输入，一般指键盘输入到缓冲区里的东西。\n\t-t 为创建的容器分配一个伪tty终端。\n\t```\n3. 安装Vim  \n\t```\n\tapt-get update && apt-get install vim #容器中执行\n\t```\n4. 退出容器\n\t```\n\texit\n\t```\n5. 查看容器列表\n\t```\n\tdocker ps     \t\t#列出所有运行中的容器\n\tdocker ps -a  \t\t#列出所有容器\n\tdocker PS -l  \t\t#列出最后一次运行的容器\n\tdocker PS -n x    \t#列出最后一次运行的x个容器\n\t```\n6. 创建指定名称的容器\n\t```\n\tsudo docker run --name reallinxu -i -t ubuntu /bin/bash\n\t```\n7. 删除容器\n\t```\n\tdocker rm reallinxu  #可以通过容器名称、CONTAINER ID删除\n\t```\n8. 启动容器\n\t```\n\tdocker start b74cf5d6a711   #启动一个已停止的容器\n\tdocker restart b74cf5d6a711 #重新启动容器\n\t```\n9. 附着容器会话\n\t```\n\tdocker attach 48db85aa8845\n\t```\n10. 创建守护容器\n\t```\n\tsudo docker run --name daemon_aaa -d ubuntu /bin/sh -c \"while true;do echo hello world;sleep 1;done\"\n\t#-d docker会让容器后台运行\n\t#-c 设置容器CPU权重，在CPU共享场景使用\n\t```\n11. 获取容器日志  \n\t```\n\tsudo docker logs daemon_aaa \t\t#输出最后几条log\n\tsudo docker logs -f daemon_aaa\t\t#动态监控log\n\tdocker logs --tail 10 daemon_aaa\t#获取日志最后10行\n\tdocker logs --tail 0 -f daemon_aaa\t#跟踪容器最新log\n\t```\n12. 查看容器内进程\n\t```\n\tsudo docker top daemon_aaa  \n\t```\n13. 在容器内部运行进程\n\t```\n\tsudo docker exec -d daemon_aaa touch /etc/new_config_file\n\t#-d 表示需要运行一个后台进程\n\tsudo docker exec -t -i daemon_aaa /bin/bash\n\t#创建一个新的bash会话，通过docker exec可以在运行中的容器中进行操作管理\n\t```\n14. 停止守护容器\n\t```\n\tsudo docker stop daemon_aaa #向容器发送SIGTERM信号\n\tsudo docker kill daemon_aaa #向容器发送SIGKILL信号,可以快速停止\n\t```\n15. 自动重启容器\n\t```\n\tsudo docker run --restart=always --name daemon_ccc -d ubuntu /bin/sh -c \"while true;do echo hello world;sleep 1;done\"\n\t#--restart=always 无论退出代码是什么都会自动重启\n\t#--restart=on-failure 退出代码非0时重启\n\t#--restart=on-failure:5 非0时重启，最多重启5次\n\t```\n16. 获取容器信息\n\t```\n\tdocker inspect daemon_aaa   #查看容器详细信息\n\tdocker inspect --format='{{.State.Running}}' daemon_aaa #查看指定属性，区分大小写\n\tdocker inspect --format='{{.State.Running}} {{.Name}}'  daemon_aaa daemon_bbb #查看多个容器多个属性\n\t#所有容器都放在/var/lib/docker/containers文件夹下\n\t```\n17. 删除所有容器小技巧\n\t```\n\tdocker rm `docker ps -a -q`   #返回所有容器id传给rm\n\t```\n\n## 使用docker镜像和仓库 ##  \n1. 拉取指定仓库的镜像，默认为latest\n\t```\n\tdocker pull ubuntu\n\t```\n2. 查看本地镜像\n\t```\n\tdocker images\n\t```\n3. 镜像标签\n\t```\n\tdocker run -t -u --name haha ubuntu:12.04 /bin/bash\n\t#通过镜像ubuntu:12.04启动一个容器，不指定标签则为latest\n\t```\n4. docker hub上查找镜像\n\t```\n\tdocker search puppet\n\t```\n5. docker commit方法构建\n\tdockerhub注册账号：https://hub.docker.com/\n\t登录dockerhub\n\t```\n\tdocker login #登录dockerhub,个人认证信息保存在$HOME/.dockercfg\n\tsudo docker commit 9de0d8b43b0f reallinxu/ubuntu1  #提交一个镜像\n\tdocker commit -m=\"test\" --author=\"reallinxu\" 1d61b09d590d reallinxu/hah:hah\n\t#-m 提交信息\n\t#--author 作者\n\t#:hah 标签\n\t#docker commit提交的只是创建的容器与容器的当前状态有差异的部分，这使得更新非常轻量\n\t```\n6. dockerfile方法构建\n\t创建文件\n\t```\n\tmkdir static_web\n\tcd static_web\n\ttouch Dockerfile\n\tvi Dockerfile\n\t# Version: 0.0.1\n\tFROM ubuntu:14.04  #从指定镜像创建容器\n\tMAINTAINER reallinxu \"xxxxx@qq.com\" #指定用户名和作者\n\tRUN apt-get update #更新apt-get\n\tRUN apt-get install -y nginx  #安装ngnix\n\tRUN echo 'Hi,I am in your container' >/usr/share/nginx/html/index.html\n\tEXPOSE 80 #向外部公开80端口，可以公开多个端口\n\t```\n7. docker build构建镜像\n\t```\n\tsudo docker build -t=\"reallinxu/static_web\" .\t#默认latest标签\n\tsudo docker build -t=\"reallinxu/static_web:v1\" . #指定标签\n\tsudo docker build -t=\"reallinxu/static_web:v1\" gitURL  #可以通过git根目录下文件构建\n\t#build时会按照文件顺序一步步执行\n\t```\n8. 镜像推送到dockerhub\n\t```\n\tsudo docker commit 9de0d8b43b0f reallinxu/ubuntu1:test #构建镜像的时候最好加上tag，不加可能会报错\n\tsudo docker push 9de0d8b43b0f reallinxu/ubuntu1:test #推送到dockerhub\n\t```\n9. 删除镜像\n\t```\n\tdocker rmi reallinxu/ubuntu1:test\n\tdocker rmi `docker images -a -q`  #小技巧，返回所有镜像ID，再移除\n\t```\n\n# Docker进阶 #\n## 启动阿里云加速 ##\ndocker的镜像仓库在国外，下载会很慢，启用阿里云加速。在/etc/docker目录下创建daemon.json文件，添加如下内容  \n\t```\n\t{\n\t\t\"registry-mirrors\": [\"https://almtd3fa.mirror.aliyuncs.com\"]\n\t}\n\t#https://almtd3fa.mirror.aliyuncs.com为阿里云的加速地址。修改后，重启docker\n\tsystemctl daemon-reload\n\tservice docker restart\n\t```\n## Docker中运行jar ##\n1. 下载java8镜像：\n\t```\n\tdocker pull frolvlad/alpine-oraclejdk8\n\t```\n2. 创建一个简单的spring-boot项目，开放8080端口，生成可执行的jar文件。\n3. 将demo-0.0.1-SNAPSHOT.jar放到/usr下，执行命令创建容器并执行jar\n\t```\n\tdocker run -d -p 8080:8080 -v /usr/demo-0.0.1-SNAPSHOT.jar:/usr/demo-0.0.1-SNAPSHOT.jar --name springboot frolvlad/alpine-oraclejdk8 java -jar /usr/demo-0.0.1-SNAPSHOT.jar\n\t#-d 容器后台运行\n\t#-p 主机端口与容器端口映射\n\t```\n4. 浏览器中输入ip:8080验证是否启动成功。\n\n## docker宿主机与容器文件交互 ##  \n\n1. 从主机复制到容器  \n\t```\n\tsudo docker cp host_path containerID:container_path\n\t```\n   从容器复制到主机\n\t```\n\tsudo docker cp containerID:container_path host_path\n\t```\n2. 挂载数据卷\n\t```\n\tdocker run -v /path/to/hostdir:/mnt $container(image name or image id)  在容器内拷贝  \n\tcp /mnt/sourcefile /path/to/destfile \n\t```","source":"_posts/Docker-Learning.md","raw":"---\ntitle: \"Docker入门及基础命令\"\ntags:\n  - Docker\nid: 101\ncategories:\n  - Docker\ndate: 2018-05-16 10:20:31\nauthor: \n  - linxu\n---\n# Docker入门 #  \n## Docker介绍 ##\n>关于 Docker 是什么，有个著名的隐喻：集装箱。但是它却起了个“码头工人”（docker 的英文翻译）的名字。这无疑给使用者很多暗示：“快来用吧！用了 Docker，就像世界出现了集装箱，这样你的业务就可以随意的、无拘无束的运行在任何地方（Docker 公司的口号：Build，Ship，and Run Any App，Anywhere），于是码头工人就基本都可以下岗了。”但是人们往往忽略了一个问题，隐喻的好处是方便人理解一个不容易理解的概念，但并不能解释其概念本身。 　　　　　　　　　　　　　　　　　　 　　—————————邹立巍《什么是 Docker?》\n\nDocker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。\n\nDocker主要关键词是容器和镜像，可以从仓库中获取所需要的镜像，通过镜像创建容器。每一个容器都相当于一个完全独立的虚拟机(Docker不是虚拟机)，但是所占用内存消耗和启动时间等都远远小于虚拟机。在容器中可以根据所需安装软件，部署应用服务等。\n\n## Docker与Vm对比 ##\n![](https://i.imgur.com/Vx4ilht.jpg)\n\n图中可以看出docker不需要Hypervisor实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理机的硬件资源。因此在CPU、内存利用率上docker将会在效率上有优势。docker利用的是宿主机的内核，而不需要Guest OS,因此新建一个docker容器只需要几秒钟。docker不需要增加Guest OS，所以在一台物理机上我们可以很容易建立成百上千的容器，而只能建立几个虚拟机。\n\n## 安装Docker ##\ndocker的安装非常简单，centOs中直接使用  \n\n\tyum install docker\n即可安装。\n\n## Docker基础命令 ##\n1. 启动docker  \n\t```\n\tservice docker start    \t#启动\n\tservice docker stop \t\t#停止\n\tservice docker restart \t \t#重启\n\t```\n2. 运行创建容器\n\t```\n\tsudo docker run -i -t ubuntu /bin/bash\n\t-i 保证容器中STDIN是开启的。STDIN是标准输入，一般指键盘输入到缓冲区里的东西。\n\t-t 为创建的容器分配一个伪tty终端。\n\t```\n3. 安装Vim  \n\t```\n\tapt-get update && apt-get install vim #容器中执行\n\t```\n4. 退出容器\n\t```\n\texit\n\t```\n5. 查看容器列表\n\t```\n\tdocker ps     \t\t#列出所有运行中的容器\n\tdocker ps -a  \t\t#列出所有容器\n\tdocker PS -l  \t\t#列出最后一次运行的容器\n\tdocker PS -n x    \t#列出最后一次运行的x个容器\n\t```\n6. 创建指定名称的容器\n\t```\n\tsudo docker run --name reallinxu -i -t ubuntu /bin/bash\n\t```\n7. 删除容器\n\t```\n\tdocker rm reallinxu  #可以通过容器名称、CONTAINER ID删除\n\t```\n8. 启动容器\n\t```\n\tdocker start b74cf5d6a711   #启动一个已停止的容器\n\tdocker restart b74cf5d6a711 #重新启动容器\n\t```\n9. 附着容器会话\n\t```\n\tdocker attach 48db85aa8845\n\t```\n10. 创建守护容器\n\t```\n\tsudo docker run --name daemon_aaa -d ubuntu /bin/sh -c \"while true;do echo hello world;sleep 1;done\"\n\t#-d docker会让容器后台运行\n\t#-c 设置容器CPU权重，在CPU共享场景使用\n\t```\n11. 获取容器日志  \n\t```\n\tsudo docker logs daemon_aaa \t\t#输出最后几条log\n\tsudo docker logs -f daemon_aaa\t\t#动态监控log\n\tdocker logs --tail 10 daemon_aaa\t#获取日志最后10行\n\tdocker logs --tail 0 -f daemon_aaa\t#跟踪容器最新log\n\t```\n12. 查看容器内进程\n\t```\n\tsudo docker top daemon_aaa  \n\t```\n13. 在容器内部运行进程\n\t```\n\tsudo docker exec -d daemon_aaa touch /etc/new_config_file\n\t#-d 表示需要运行一个后台进程\n\tsudo docker exec -t -i daemon_aaa /bin/bash\n\t#创建一个新的bash会话，通过docker exec可以在运行中的容器中进行操作管理\n\t```\n14. 停止守护容器\n\t```\n\tsudo docker stop daemon_aaa #向容器发送SIGTERM信号\n\tsudo docker kill daemon_aaa #向容器发送SIGKILL信号,可以快速停止\n\t```\n15. 自动重启容器\n\t```\n\tsudo docker run --restart=always --name daemon_ccc -d ubuntu /bin/sh -c \"while true;do echo hello world;sleep 1;done\"\n\t#--restart=always 无论退出代码是什么都会自动重启\n\t#--restart=on-failure 退出代码非0时重启\n\t#--restart=on-failure:5 非0时重启，最多重启5次\n\t```\n16. 获取容器信息\n\t```\n\tdocker inspect daemon_aaa   #查看容器详细信息\n\tdocker inspect --format='{{.State.Running}}' daemon_aaa #查看指定属性，区分大小写\n\tdocker inspect --format='{{.State.Running}} {{.Name}}'  daemon_aaa daemon_bbb #查看多个容器多个属性\n\t#所有容器都放在/var/lib/docker/containers文件夹下\n\t```\n17. 删除所有容器小技巧\n\t```\n\tdocker rm `docker ps -a -q`   #返回所有容器id传给rm\n\t```\n\n## 使用docker镜像和仓库 ##  \n1. 拉取指定仓库的镜像，默认为latest\n\t```\n\tdocker pull ubuntu\n\t```\n2. 查看本地镜像\n\t```\n\tdocker images\n\t```\n3. 镜像标签\n\t```\n\tdocker run -t -u --name haha ubuntu:12.04 /bin/bash\n\t#通过镜像ubuntu:12.04启动一个容器，不指定标签则为latest\n\t```\n4. docker hub上查找镜像\n\t```\n\tdocker search puppet\n\t```\n5. docker commit方法构建\n\tdockerhub注册账号：https://hub.docker.com/\n\t登录dockerhub\n\t```\n\tdocker login #登录dockerhub,个人认证信息保存在$HOME/.dockercfg\n\tsudo docker commit 9de0d8b43b0f reallinxu/ubuntu1  #提交一个镜像\n\tdocker commit -m=\"test\" --author=\"reallinxu\" 1d61b09d590d reallinxu/hah:hah\n\t#-m 提交信息\n\t#--author 作者\n\t#:hah 标签\n\t#docker commit提交的只是创建的容器与容器的当前状态有差异的部分，这使得更新非常轻量\n\t```\n6. dockerfile方法构建\n\t创建文件\n\t```\n\tmkdir static_web\n\tcd static_web\n\ttouch Dockerfile\n\tvi Dockerfile\n\t# Version: 0.0.1\n\tFROM ubuntu:14.04  #从指定镜像创建容器\n\tMAINTAINER reallinxu \"xxxxx@qq.com\" #指定用户名和作者\n\tRUN apt-get update #更新apt-get\n\tRUN apt-get install -y nginx  #安装ngnix\n\tRUN echo 'Hi,I am in your container' >/usr/share/nginx/html/index.html\n\tEXPOSE 80 #向外部公开80端口，可以公开多个端口\n\t```\n7. docker build构建镜像\n\t```\n\tsudo docker build -t=\"reallinxu/static_web\" .\t#默认latest标签\n\tsudo docker build -t=\"reallinxu/static_web:v1\" . #指定标签\n\tsudo docker build -t=\"reallinxu/static_web:v1\" gitURL  #可以通过git根目录下文件构建\n\t#build时会按照文件顺序一步步执行\n\t```\n8. 镜像推送到dockerhub\n\t```\n\tsudo docker commit 9de0d8b43b0f reallinxu/ubuntu1:test #构建镜像的时候最好加上tag，不加可能会报错\n\tsudo docker push 9de0d8b43b0f reallinxu/ubuntu1:test #推送到dockerhub\n\t```\n9. 删除镜像\n\t```\n\tdocker rmi reallinxu/ubuntu1:test\n\tdocker rmi `docker images -a -q`  #小技巧，返回所有镜像ID，再移除\n\t```\n\n# Docker进阶 #\n## 启动阿里云加速 ##\ndocker的镜像仓库在国外，下载会很慢，启用阿里云加速。在/etc/docker目录下创建daemon.json文件，添加如下内容  \n\t```\n\t{\n\t\t\"registry-mirrors\": [\"https://almtd3fa.mirror.aliyuncs.com\"]\n\t}\n\t#https://almtd3fa.mirror.aliyuncs.com为阿里云的加速地址。修改后，重启docker\n\tsystemctl daemon-reload\n\tservice docker restart\n\t```\n## Docker中运行jar ##\n1. 下载java8镜像：\n\t```\n\tdocker pull frolvlad/alpine-oraclejdk8\n\t```\n2. 创建一个简单的spring-boot项目，开放8080端口，生成可执行的jar文件。\n3. 将demo-0.0.1-SNAPSHOT.jar放到/usr下，执行命令创建容器并执行jar\n\t```\n\tdocker run -d -p 8080:8080 -v /usr/demo-0.0.1-SNAPSHOT.jar:/usr/demo-0.0.1-SNAPSHOT.jar --name springboot frolvlad/alpine-oraclejdk8 java -jar /usr/demo-0.0.1-SNAPSHOT.jar\n\t#-d 容器后台运行\n\t#-p 主机端口与容器端口映射\n\t```\n4. 浏览器中输入ip:8080验证是否启动成功。\n\n## docker宿主机与容器文件交互 ##  \n\n1. 从主机复制到容器  \n\t```\n\tsudo docker cp host_path containerID:container_path\n\t```\n   从容器复制到主机\n\t```\n\tsudo docker cp containerID:container_path host_path\n\t```\n2. 挂载数据卷\n\t```\n\tdocker run -v /path/to/hostdir:/mnt $container(image name or image id)  在容器内拷贝  \n\tcp /mnt/sourcefile /path/to/destfile \n\t```","slug":"Docker-Learning","published":1,"updated":"2018-05-28T07:43:46.241Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtlf000384gpj73yegvt","content":"<h1 id=\"Docker入门\"><a href=\"#Docker入门\" class=\"headerlink\" title=\"Docker入门\"></a>Docker入门</h1><h2 id=\"Docker介绍\"><a href=\"#Docker介绍\" class=\"headerlink\" title=\"Docker介绍\"></a>Docker介绍</h2><blockquote>\n<p>关于 Docker 是什么，有个著名的隐喻：集装箱。但是它却起了个“码头工人”（docker 的英文翻译）的名字。这无疑给使用者很多暗示：“快来用吧！用了 Docker，就像世界出现了集装箱，这样你的业务就可以随意的、无拘无束的运行在任何地方（Docker 公司的口号：Build，Ship，and Run Any App，Anywhere），于是码头工人就基本都可以下岗了。”但是人们往往忽略了一个问题，隐喻的好处是方便人理解一个不容易理解的概念，但并不能解释其概念本身。 　　　　　　　　　　　　　　　　　　 　　—————————邹立巍《什么是 Docker?》</p>\n</blockquote>\n<p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>\n<p>Docker主要关键词是容器和镜像，可以从仓库中获取所需要的镜像，通过镜像创建容器。每一个容器都相当于一个完全独立的虚拟机(Docker不是虚拟机)，但是所占用内存消耗和启动时间等都远远小于虚拟机。在容器中可以根据所需安装软件，部署应用服务等。</p>\n<h2 id=\"Docker与Vm对比\"><a href=\"#Docker与Vm对比\" class=\"headerlink\" title=\"Docker与Vm对比\"></a>Docker与Vm对比</h2><p><img src=\"https://i.imgur.com/Vx4ilht.jpg\" alt=\"\"></p>\n<p>图中可以看出docker不需要Hypervisor实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理机的硬件资源。因此在CPU、内存利用率上docker将会在效率上有优势。docker利用的是宿主机的内核，而不需要Guest OS,因此新建一个docker容器只需要几秒钟。docker不需要增加Guest OS，所以在一台物理机上我们可以很容易建立成百上千的容器，而只能建立几个虚拟机。</p>\n<h2 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h2><p>docker的安装非常简单，centOs中直接使用  </p>\n<pre><code>yum install docker\n</code></pre><p>即可安装。</p>\n<h2 id=\"Docker基础命令\"><a href=\"#Docker基础命令\" class=\"headerlink\" title=\"Docker基础命令\"></a>Docker基础命令</h2><ol>\n<li><p>启动docker  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service docker start    \t#启动</span><br><span class=\"line\">service docker stop \t\t#停止</span><br><span class=\"line\">service docker restart \t \t#重启</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>运行创建容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -i -t ubuntu /bin/bash</span><br><span class=\"line\">-i 保证容器中STDIN是开启的。STDIN是标准输入，一般指键盘输入到缓冲区里的东西。</span><br><span class=\"line\">-t 为创建的容器分配一个伪tty终端。</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装Vim  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update &amp;&amp; apt-get install vim #容器中执行</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>退出容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看容器列表</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps     \t\t#列出所有运行中的容器</span><br><span class=\"line\">docker ps -a  \t\t#列出所有容器</span><br><span class=\"line\">docker PS -l  \t\t#列出最后一次运行的容器</span><br><span class=\"line\">docker PS -n x    \t#列出最后一次运行的x个容器</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建指定名称的容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --name reallinxu -i -t ubuntu /bin/bash</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm reallinxu  #可以通过容器名称、CONTAINER ID删除</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start b74cf5d6a711   #启动一个已停止的容器</span><br><span class=\"line\">docker restart b74cf5d6a711 #重新启动容器</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>附着容器会话</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker attach 48db85aa8845</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建守护容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --name daemon_aaa -d ubuntu /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span><br><span class=\"line\">#-d docker会让容器后台运行</span><br><span class=\"line\">#-c 设置容器CPU权重，在CPU共享场景使用</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取容器日志  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker logs daemon_aaa \t\t#输出最后几条log</span><br><span class=\"line\">sudo docker logs -f daemon_aaa\t\t#动态监控log</span><br><span class=\"line\">docker logs --tail 10 daemon_aaa\t#获取日志最后10行</span><br><span class=\"line\">docker logs --tail 0 -f daemon_aaa\t#跟踪容器最新log</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看容器内进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker top daemon_aaa</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在容器内部运行进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker exec -d daemon_aaa touch /etc/new_config_file</span><br><span class=\"line\">#-d 表示需要运行一个后台进程</span><br><span class=\"line\">sudo docker exec -t -i daemon_aaa /bin/bash</span><br><span class=\"line\">#创建一个新的bash会话，通过docker exec可以在运行中的容器中进行操作管理</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>停止守护容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker stop daemon_aaa #向容器发送SIGTERM信号</span><br><span class=\"line\">sudo docker kill daemon_aaa #向容器发送SIGKILL信号,可以快速停止</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>自动重启容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --restart=always --name daemon_ccc -d ubuntu /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span><br><span class=\"line\">#--restart=always 无论退出代码是什么都会自动重启</span><br><span class=\"line\">#--restart=on-failure 退出代码非0时重启</span><br><span class=\"line\">#--restart=on-failure:5 非0时重启，最多重启5次</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取容器信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker inspect daemon_aaa   #查看容器详细信息</span><br><span class=\"line\">docker inspect --format=&apos;&#123;&#123;.State.Running&#125;&#125;&apos; daemon_aaa #查看指定属性，区分大小写</span><br><span class=\"line\">docker inspect --format=&apos;&#123;&#123;.State.Running&#125;&#125; &#123;&#123;.Name&#125;&#125;&apos;  daemon_aaa daemon_bbb #查看多个容器多个属性</span><br><span class=\"line\">#所有容器都放在/var/lib/docker/containers文件夹下</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除所有容器小技巧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm `docker ps -a -q`   #返回所有容器id传给rm</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"使用docker镜像和仓库\"><a href=\"#使用docker镜像和仓库\" class=\"headerlink\" title=\"使用docker镜像和仓库\"></a>使用docker镜像和仓库</h2><ol>\n<li><p>拉取指定仓库的镜像，默认为latest</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull ubuntu</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看本地镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像标签</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -t -u --name haha ubuntu:12.04 /bin/bash</span><br><span class=\"line\">#通过镜像ubuntu:12.04启动一个容器，不指定标签则为latest</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker hub上查找镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search puppet</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker commit方法构建<br> dockerhub注册账号：<a href=\"https://hub.docker.com/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/</a><br> 登录dockerhub</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login #登录dockerhub,个人认证信息保存在$HOME/.dockercfg</span><br><span class=\"line\">sudo docker commit 9de0d8b43b0f reallinxu/ubuntu1  #提交一个镜像</span><br><span class=\"line\">docker commit -m=&quot;test&quot; --author=&quot;reallinxu&quot; 1d61b09d590d reallinxu/hah:hah</span><br><span class=\"line\">#-m 提交信息</span><br><span class=\"line\">#--author 作者</span><br><span class=\"line\">#:hah 标签</span><br><span class=\"line\">#docker commit提交的只是创建的容器与容器的当前状态有差异的部分，这使得更新非常轻量</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>dockerfile方法构建<br> 创建文件</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir static_web</span><br><span class=\"line\">cd static_web</span><br><span class=\"line\">touch Dockerfile</span><br><span class=\"line\">vi Dockerfile</span><br><span class=\"line\"># Version: 0.0.1</span><br><span class=\"line\">FROM ubuntu:14.04  #从指定镜像创建容器</span><br><span class=\"line\">MAINTAINER reallinxu &quot;xxxxx@qq.com&quot; #指定用户名和作者</span><br><span class=\"line\">RUN apt-get update #更新apt-get</span><br><span class=\"line\">RUN apt-get install -y nginx  #安装ngnix</span><br><span class=\"line\">RUN echo &apos;Hi,I am in your container&apos; &gt;/usr/share/nginx/html/index.html</span><br><span class=\"line\">EXPOSE 80 #向外部公开80端口，可以公开多个端口</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker build构建镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web&quot; .\t#默认latest标签</span><br><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web:v1&quot; . #指定标签</span><br><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web:v1&quot; gitURL  #可以通过git根目录下文件构建</span><br><span class=\"line\">#build时会按照文件顺序一步步执行</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像推送到dockerhub</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker commit 9de0d8b43b0f reallinxu/ubuntu1:test #构建镜像的时候最好加上tag，不加可能会报错</span><br><span class=\"line\">sudo docker push 9de0d8b43b0f reallinxu/ubuntu1:test #推送到dockerhub</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi reallinxu/ubuntu1:test</span><br><span class=\"line\">docker rmi `docker images -a -q`  #小技巧，返回所有镜像ID，再移除</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"Docker进阶\"><a href=\"#Docker进阶\" class=\"headerlink\" title=\"Docker进阶\"></a>Docker进阶</h1><h2 id=\"启动阿里云加速\"><a href=\"#启动阿里云加速\" class=\"headerlink\" title=\"启动阿里云加速\"></a>启动阿里云加速</h2><p>docker的镜像仓库在国外，下载会很慢，启用阿里云加速。在/etc/docker目录下创建daemon.json文件，添加如下内容<br>    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;registry-mirrors&quot;: [&quot;https://almtd3fa.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#https://almtd3fa.mirror.aliyuncs.com为阿里云的加速地址。修改后，重启docker</span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">service docker restart</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Docker中运行jar\"><a href=\"#Docker中运行jar\" class=\"headerlink\" title=\"Docker中运行jar\"></a>Docker中运行jar</h2><ol>\n<li><p>下载java8镜像：</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull frolvlad/alpine-oraclejdk8</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建一个简单的spring-boot项目，开放8080端口，生成可执行的jar文件。</p>\n</li>\n<li><p>将demo-0.0.1-SNAPSHOT.jar放到/usr下，执行命令创建容器并执行jar</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8080:8080 -v /usr/demo-0.0.1-SNAPSHOT.jar:/usr/demo-0.0.1-SNAPSHOT.jar --name springboot frolvlad/alpine-oraclejdk8 java -jar /usr/demo-0.0.1-SNAPSHOT.jar</span><br><span class=\"line\">#-d 容器后台运行</span><br><span class=\"line\">#-p 主机端口与容器端口映射</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>浏览器中输入ip:8080验证是否启动成功。</p>\n</li>\n</ol>\n<h2 id=\"docker宿主机与容器文件交互\"><a href=\"#docker宿主机与容器文件交互\" class=\"headerlink\" title=\"docker宿主机与容器文件交互\"></a>docker宿主机与容器文件交互</h2><ol>\n<li><p>从主机复制到容器  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp host_path containerID:container_path</span><br></pre></td></tr></table></figure>\n<p>从容器复制到主机</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp containerID:container_path host_path</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>挂载数据卷</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -v /path/to/hostdir:/mnt $container(image name or image id)  在容器内拷贝  </span><br><span class=\"line\">cp /mnt/sourcefile /path/to/destfile</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Docker入门\"><a href=\"#Docker入门\" class=\"headerlink\" title=\"Docker入门\"></a>Docker入门</h1><h2 id=\"Docker介绍\"><a href=\"#Docker介绍\" class=\"headerlink\" title=\"Docker介绍\"></a>Docker介绍</h2><blockquote>\n<p>关于 Docker 是什么，有个著名的隐喻：集装箱。但是它却起了个“码头工人”（docker 的英文翻译）的名字。这无疑给使用者很多暗示：“快来用吧！用了 Docker，就像世界出现了集装箱，这样你的业务就可以随意的、无拘无束的运行在任何地方（Docker 公司的口号：Build，Ship，and Run Any App，Anywhere），于是码头工人就基本都可以下岗了。”但是人们往往忽略了一个问题，隐喻的好处是方便人理解一个不容易理解的概念，但并不能解释其概念本身。 　　　　　　　　　　　　　　　　　　 　　—————————邹立巍《什么是 Docker?》</p>\n</blockquote>\n<p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>\n<p>Docker主要关键词是容器和镜像，可以从仓库中获取所需要的镜像，通过镜像创建容器。每一个容器都相当于一个完全独立的虚拟机(Docker不是虚拟机)，但是所占用内存消耗和启动时间等都远远小于虚拟机。在容器中可以根据所需安装软件，部署应用服务等。</p>\n<h2 id=\"Docker与Vm对比\"><a href=\"#Docker与Vm对比\" class=\"headerlink\" title=\"Docker与Vm对比\"></a>Docker与Vm对比</h2><p><img src=\"https://i.imgur.com/Vx4ilht.jpg\" alt=\"\"></p>\n<p>图中可以看出docker不需要Hypervisor实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理机的硬件资源。因此在CPU、内存利用率上docker将会在效率上有优势。docker利用的是宿主机的内核，而不需要Guest OS,因此新建一个docker容器只需要几秒钟。docker不需要增加Guest OS，所以在一台物理机上我们可以很容易建立成百上千的容器，而只能建立几个虚拟机。</p>\n<h2 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h2><p>docker的安装非常简单，centOs中直接使用  </p>\n<pre><code>yum install docker\n</code></pre><p>即可安装。</p>\n<h2 id=\"Docker基础命令\"><a href=\"#Docker基础命令\" class=\"headerlink\" title=\"Docker基础命令\"></a>Docker基础命令</h2><ol>\n<li><p>启动docker  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service docker start    \t#启动</span><br><span class=\"line\">service docker stop \t\t#停止</span><br><span class=\"line\">service docker restart \t \t#重启</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>运行创建容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -i -t ubuntu /bin/bash</span><br><span class=\"line\">-i 保证容器中STDIN是开启的。STDIN是标准输入，一般指键盘输入到缓冲区里的东西。</span><br><span class=\"line\">-t 为创建的容器分配一个伪tty终端。</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装Vim  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update &amp;&amp; apt-get install vim #容器中执行</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>退出容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看容器列表</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps     \t\t#列出所有运行中的容器</span><br><span class=\"line\">docker ps -a  \t\t#列出所有容器</span><br><span class=\"line\">docker PS -l  \t\t#列出最后一次运行的容器</span><br><span class=\"line\">docker PS -n x    \t#列出最后一次运行的x个容器</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建指定名称的容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --name reallinxu -i -t ubuntu /bin/bash</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm reallinxu  #可以通过容器名称、CONTAINER ID删除</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动容器</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start b74cf5d6a711   #启动一个已停止的容器</span><br><span class=\"line\">docker restart b74cf5d6a711 #重新启动容器</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>附着容器会话</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker attach 48db85aa8845</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建守护容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --name daemon_aaa -d ubuntu /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span><br><span class=\"line\">#-d docker会让容器后台运行</span><br><span class=\"line\">#-c 设置容器CPU权重，在CPU共享场景使用</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取容器日志  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker logs daemon_aaa \t\t#输出最后几条log</span><br><span class=\"line\">sudo docker logs -f daemon_aaa\t\t#动态监控log</span><br><span class=\"line\">docker logs --tail 10 daemon_aaa\t#获取日志最后10行</span><br><span class=\"line\">docker logs --tail 0 -f daemon_aaa\t#跟踪容器最新log</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看容器内进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker top daemon_aaa</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在容器内部运行进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker exec -d daemon_aaa touch /etc/new_config_file</span><br><span class=\"line\">#-d 表示需要运行一个后台进程</span><br><span class=\"line\">sudo docker exec -t -i daemon_aaa /bin/bash</span><br><span class=\"line\">#创建一个新的bash会话，通过docker exec可以在运行中的容器中进行操作管理</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>停止守护容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker stop daemon_aaa #向容器发送SIGTERM信号</span><br><span class=\"line\">sudo docker kill daemon_aaa #向容器发送SIGKILL信号,可以快速停止</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>自动重启容器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run --restart=always --name daemon_ccc -d ubuntu /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span><br><span class=\"line\">#--restart=always 无论退出代码是什么都会自动重启</span><br><span class=\"line\">#--restart=on-failure 退出代码非0时重启</span><br><span class=\"line\">#--restart=on-failure:5 非0时重启，最多重启5次</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取容器信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker inspect daemon_aaa   #查看容器详细信息</span><br><span class=\"line\">docker inspect --format=&apos;&#123;&#123;.State.Running&#125;&#125;&apos; daemon_aaa #查看指定属性，区分大小写</span><br><span class=\"line\">docker inspect --format=&apos;&#123;&#123;.State.Running&#125;&#125; &#123;&#123;.Name&#125;&#125;&apos;  daemon_aaa daemon_bbb #查看多个容器多个属性</span><br><span class=\"line\">#所有容器都放在/var/lib/docker/containers文件夹下</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除所有容器小技巧</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm `docker ps -a -q`   #返回所有容器id传给rm</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"使用docker镜像和仓库\"><a href=\"#使用docker镜像和仓库\" class=\"headerlink\" title=\"使用docker镜像和仓库\"></a>使用docker镜像和仓库</h2><ol>\n<li><p>拉取指定仓库的镜像，默认为latest</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull ubuntu</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看本地镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像标签</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -t -u --name haha ubuntu:12.04 /bin/bash</span><br><span class=\"line\">#通过镜像ubuntu:12.04启动一个容器，不指定标签则为latest</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker hub上查找镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search puppet</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker commit方法构建<br> dockerhub注册账号：<a href=\"https://hub.docker.com/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/</a><br> 登录dockerhub</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login #登录dockerhub,个人认证信息保存在$HOME/.dockercfg</span><br><span class=\"line\">sudo docker commit 9de0d8b43b0f reallinxu/ubuntu1  #提交一个镜像</span><br><span class=\"line\">docker commit -m=&quot;test&quot; --author=&quot;reallinxu&quot; 1d61b09d590d reallinxu/hah:hah</span><br><span class=\"line\">#-m 提交信息</span><br><span class=\"line\">#--author 作者</span><br><span class=\"line\">#:hah 标签</span><br><span class=\"line\">#docker commit提交的只是创建的容器与容器的当前状态有差异的部分，这使得更新非常轻量</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>dockerfile方法构建<br> 创建文件</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir static_web</span><br><span class=\"line\">cd static_web</span><br><span class=\"line\">touch Dockerfile</span><br><span class=\"line\">vi Dockerfile</span><br><span class=\"line\"># Version: 0.0.1</span><br><span class=\"line\">FROM ubuntu:14.04  #从指定镜像创建容器</span><br><span class=\"line\">MAINTAINER reallinxu &quot;xxxxx@qq.com&quot; #指定用户名和作者</span><br><span class=\"line\">RUN apt-get update #更新apt-get</span><br><span class=\"line\">RUN apt-get install -y nginx  #安装ngnix</span><br><span class=\"line\">RUN echo &apos;Hi,I am in your container&apos; &gt;/usr/share/nginx/html/index.html</span><br><span class=\"line\">EXPOSE 80 #向外部公开80端口，可以公开多个端口</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>docker build构建镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web&quot; .\t#默认latest标签</span><br><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web:v1&quot; . #指定标签</span><br><span class=\"line\">sudo docker build -t=&quot;reallinxu/static_web:v1&quot; gitURL  #可以通过git根目录下文件构建</span><br><span class=\"line\">#build时会按照文件顺序一步步执行</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>镜像推送到dockerhub</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker commit 9de0d8b43b0f reallinxu/ubuntu1:test #构建镜像的时候最好加上tag，不加可能会报错</span><br><span class=\"line\">sudo docker push 9de0d8b43b0f reallinxu/ubuntu1:test #推送到dockerhub</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除镜像</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi reallinxu/ubuntu1:test</span><br><span class=\"line\">docker rmi `docker images -a -q`  #小技巧，返回所有镜像ID，再移除</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"Docker进阶\"><a href=\"#Docker进阶\" class=\"headerlink\" title=\"Docker进阶\"></a>Docker进阶</h1><h2 id=\"启动阿里云加速\"><a href=\"#启动阿里云加速\" class=\"headerlink\" title=\"启动阿里云加速\"></a>启动阿里云加速</h2><p>docker的镜像仓库在国外，下载会很慢，启用阿里云加速。在/etc/docker目录下创建daemon.json文件，添加如下内容<br>    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;registry-mirrors&quot;: [&quot;https://almtd3fa.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#https://almtd3fa.mirror.aliyuncs.com为阿里云的加速地址。修改后，重启docker</span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">service docker restart</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Docker中运行jar\"><a href=\"#Docker中运行jar\" class=\"headerlink\" title=\"Docker中运行jar\"></a>Docker中运行jar</h2><ol>\n<li><p>下载java8镜像：</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull frolvlad/alpine-oraclejdk8</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建一个简单的spring-boot项目，开放8080端口，生成可执行的jar文件。</p>\n</li>\n<li><p>将demo-0.0.1-SNAPSHOT.jar放到/usr下，执行命令创建容器并执行jar</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8080:8080 -v /usr/demo-0.0.1-SNAPSHOT.jar:/usr/demo-0.0.1-SNAPSHOT.jar --name springboot frolvlad/alpine-oraclejdk8 java -jar /usr/demo-0.0.1-SNAPSHOT.jar</span><br><span class=\"line\">#-d 容器后台运行</span><br><span class=\"line\">#-p 主机端口与容器端口映射</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>浏览器中输入ip:8080验证是否启动成功。</p>\n</li>\n</ol>\n<h2 id=\"docker宿主机与容器文件交互\"><a href=\"#docker宿主机与容器文件交互\" class=\"headerlink\" title=\"docker宿主机与容器文件交互\"></a>docker宿主机与容器文件交互</h2><ol>\n<li><p>从主机复制到容器  </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp host_path containerID:container_path</span><br></pre></td></tr></table></figure>\n<p>从容器复制到主机</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp containerID:container_path host_path</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>挂载数据卷</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -v /path/to/hostdir:/mnt $container(image name or image id)  在容器内拷贝  </span><br><span class=\"line\">cp /mnt/sourcefile /path/to/destfile</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":" 微信小程序初探","id":"66","date":"2017-12-22T02:20:31.000Z","_content":"\n>微信小程序，简称小程序，英文名Mini Program，是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或搜一下即可打开应用。2017年1月9日，张小龙在2017微信公开课Pro上发布的小程序正式上线。\n\n# 前言：#\n<font size ='4' >距离微信小程序发布已经过去很长一段时间了，怀着只求一知半解的心态来初探一下小程序，并利用小程序API做出一个小玩意儿，俯身亲耳以请各位大牛提出不足之处。这段时间对于小程序的学习是挺囫囵吞枣的，只是对小程序有着一些初步的了解，下面是对学习过程的一些梳理总结。</font>  \n\n\n# 初探：#\n\n\n1.小程序的组成主要由以下四种类型文件：  \n\n  .js　　　JavaScrip文件  \n  .json　　项目配置文件，负责窗口颜色等等  \n  .wxss　　类似HTML文件  \n  .wxml　　类似CSS文件\n\n2.小程序根目录下用app来命名的上述四种类型文件，就是程序入口文件，四个文件对应介绍如下：\n\n   app.json　　必须要有这个文件，配置文件入口。所有的页面都需要添加在此文件的pages中，第一条记录为 进入的首页。此文件还可以设置窗口的颜色，底部导航菜单等。  \n   app.js　　　必须要有这个文件，可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量等。  \n   app.wxss　　不必须有这个文件，可以定义全局的css样式。  \n   app.wxml　　不必须有这个文件，并不是首页界面。  \n  \n3.小程序的基本函数如下：  \n\nApp函数用来注册一个小程序。接受一个 object 参数，其指定小程序的生命周期函数等。  \n    \n属性|描述|触发时机  \n:-| :- | :-   \nonLaunch|生命周期函数--监听小程序初始化|当小程序初始化完成时，会触发 onLaunch（全局只触发一次）  \nonShow|生命周期函数--监听小程序显示|当小程序启动，或从后台进入前台显示，会触发 onShow  \nonHide|Function|生命周期函数--监听小程序隐藏\t当小程序从前台进入后台，会触发 onHide  \nonError|Function|错误监听函数\t当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息  \n其他||开发者可以添加任意的函数或数据到 Object 参数中，用 this 可以访问 \n<br/>   \n\nPage函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。   \n  \n    \n属性 | 类型 | 描述 \n:- | :- | :-  \ndata | Object | 页面的初始数据 \nonLoad | Function | 生命周期函数--监听页面加载 \nonReady | Function | 生命周期函数--监听页面初次渲染完成 \nonShow | Function | 生命周期函数--监听页面显示 \nonHide | Function | 生命周期函数--监听页面隐藏 \nonUnload | Function | 生命周期函数--监听页面卸载 \nonPullDownRefresh | Function | 页面相关事件处理函数--监听用户下拉动作 \nonReachBottom | Function | 页面上拉触底事件的处理函数 \nonShareAppMessage | Function | 用户点击右上角转发 \nonPageScroll | Function | 页面滚动触发事件的处理函数，其他Any开发者可以添加任意的函数或数据到 object 参数中，在页面的函数中用 this 可以访问   \n<br/>\n\n4.更多小程序API请参考官方文档。  \n   [点击传送门](https://developers.weixin.qq.com/miniprogram/dev/api/)  \n\n# 实践：#\n\n通过实现一个数字爆炸小游戏加深了解，也是对初探小程序的一个完美终结。功能实现有单机版和联网版，单机版只能本地使用，联网版需要后台部分通过简单的spring-boot搭建。\n\n[数字爆炸小程序代码github地址](https://github.com/reallinxu/NumBomb.git)\n\n要点笔记：\n\n1.js文件中page中方法data为初始化数据，可以在wxml文件中通过{{demo}}来获取，也可在js定义的方法中通过setData进行修改。\n\n2.传值，可以通过在wxml中使用data-id传值，在方法中可以获取date-id的值。  \ngetNumJson: function (e){  \n　var numjson = e.currentTarget.dataset.id;  \n}\n\n3.多参传值可以利用json进行传输，方法接收json字符串后通过JSON.parse转换成含有参数的对象。\n\n4.页面跳转，js中使用下面方法进行跳转，此方法会销毁原page。   \nwx.redirectTo({  \n　　url: '../boom/boom'  \n})\n当页面在tabbar时，用此方法不会跳转，应使用：  \nwx.switchTab({   \n　　url: '../index/index'   \n}) \n\n5.图片作为页面背景时，background-image 只能用网络url或者base64，图片的base64可以通过网页在线转换。 \n\n6.隐藏标签布局可以使css样式中 display: none或者在标签中设置 hidden='true'，通过使用class='{{demo}}'在js中设置demo值来指定对应的css，这样可以在function中通过修改demo值来改变成不同的css。\n\n7.普通方法中修改变量使用:  \nbaseInput: function (e) {  \n   　　this.setData({  \n 　　　　baseNum: e.detail.value  \n   　　})  \n}   \nwx.request请求中直接使用this已经是wx.request的this了，所以此时需要在wx.request中使用，则需要在wx.request外部定义 var that = this; 在wx.request中再使用that代替this即可。\n","source":"_posts/P1.md","raw":"---\ntitle: \" 微信小程序初探\"\ntags:\n  - 微信，小程序\nid: 66\ncategories:\n  - WeChat小程序\ndate: 2017-12-22 10:20:31\n---\n\n>微信小程序，简称小程序，英文名Mini Program，是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或搜一下即可打开应用。2017年1月9日，张小龙在2017微信公开课Pro上发布的小程序正式上线。\n\n# 前言：#\n<font size ='4' >距离微信小程序发布已经过去很长一段时间了，怀着只求一知半解的心态来初探一下小程序，并利用小程序API做出一个小玩意儿，俯身亲耳以请各位大牛提出不足之处。这段时间对于小程序的学习是挺囫囵吞枣的，只是对小程序有着一些初步的了解，下面是对学习过程的一些梳理总结。</font>  \n\n\n# 初探：#\n\n\n1.小程序的组成主要由以下四种类型文件：  \n\n  .js　　　JavaScrip文件  \n  .json　　项目配置文件，负责窗口颜色等等  \n  .wxss　　类似HTML文件  \n  .wxml　　类似CSS文件\n\n2.小程序根目录下用app来命名的上述四种类型文件，就是程序入口文件，四个文件对应介绍如下：\n\n   app.json　　必须要有这个文件，配置文件入口。所有的页面都需要添加在此文件的pages中，第一条记录为 进入的首页。此文件还可以设置窗口的颜色，底部导航菜单等。  \n   app.js　　　必须要有这个文件，可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量等。  \n   app.wxss　　不必须有这个文件，可以定义全局的css样式。  \n   app.wxml　　不必须有这个文件，并不是首页界面。  \n  \n3.小程序的基本函数如下：  \n\nApp函数用来注册一个小程序。接受一个 object 参数，其指定小程序的生命周期函数等。  \n    \n属性|描述|触发时机  \n:-| :- | :-   \nonLaunch|生命周期函数--监听小程序初始化|当小程序初始化完成时，会触发 onLaunch（全局只触发一次）  \nonShow|生命周期函数--监听小程序显示|当小程序启动，或从后台进入前台显示，会触发 onShow  \nonHide|Function|生命周期函数--监听小程序隐藏\t当小程序从前台进入后台，会触发 onHide  \nonError|Function|错误监听函数\t当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息  \n其他||开发者可以添加任意的函数或数据到 Object 参数中，用 this 可以访问 \n<br/>   \n\nPage函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。   \n  \n    \n属性 | 类型 | 描述 \n:- | :- | :-  \ndata | Object | 页面的初始数据 \nonLoad | Function | 生命周期函数--监听页面加载 \nonReady | Function | 生命周期函数--监听页面初次渲染完成 \nonShow | Function | 生命周期函数--监听页面显示 \nonHide | Function | 生命周期函数--监听页面隐藏 \nonUnload | Function | 生命周期函数--监听页面卸载 \nonPullDownRefresh | Function | 页面相关事件处理函数--监听用户下拉动作 \nonReachBottom | Function | 页面上拉触底事件的处理函数 \nonShareAppMessage | Function | 用户点击右上角转发 \nonPageScroll | Function | 页面滚动触发事件的处理函数，其他Any开发者可以添加任意的函数或数据到 object 参数中，在页面的函数中用 this 可以访问   \n<br/>\n\n4.更多小程序API请参考官方文档。  \n   [点击传送门](https://developers.weixin.qq.com/miniprogram/dev/api/)  \n\n# 实践：#\n\n通过实现一个数字爆炸小游戏加深了解，也是对初探小程序的一个完美终结。功能实现有单机版和联网版，单机版只能本地使用，联网版需要后台部分通过简单的spring-boot搭建。\n\n[数字爆炸小程序代码github地址](https://github.com/reallinxu/NumBomb.git)\n\n要点笔记：\n\n1.js文件中page中方法data为初始化数据，可以在wxml文件中通过{{demo}}来获取，也可在js定义的方法中通过setData进行修改。\n\n2.传值，可以通过在wxml中使用data-id传值，在方法中可以获取date-id的值。  \ngetNumJson: function (e){  \n　var numjson = e.currentTarget.dataset.id;  \n}\n\n3.多参传值可以利用json进行传输，方法接收json字符串后通过JSON.parse转换成含有参数的对象。\n\n4.页面跳转，js中使用下面方法进行跳转，此方法会销毁原page。   \nwx.redirectTo({  \n　　url: '../boom/boom'  \n})\n当页面在tabbar时，用此方法不会跳转，应使用：  \nwx.switchTab({   \n　　url: '../index/index'   \n}) \n\n5.图片作为页面背景时，background-image 只能用网络url或者base64，图片的base64可以通过网页在线转换。 \n\n6.隐藏标签布局可以使css样式中 display: none或者在标签中设置 hidden='true'，通过使用class='{{demo}}'在js中设置demo值来指定对应的css，这样可以在function中通过修改demo值来改变成不同的css。\n\n7.普通方法中修改变量使用:  \nbaseInput: function (e) {  \n   　　this.setData({  \n 　　　　baseNum: e.detail.value  \n   　　})  \n}   \nwx.request请求中直接使用this已经是wx.request的this了，所以此时需要在wx.request中使用，则需要在wx.request外部定义 var that = this; 在wx.request中再使用that代替this即可。\n","slug":"P1","published":1,"updated":"2018-05-10T02:15:51.065Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtlp000784gp6cc4dl6m","content":"<blockquote>\n<p>微信小程序，简称小程序，英文名Mini Program，是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或搜一下即可打开应用。2017年1月9日，张小龙在2017微信公开课Pro上发布的小程序正式上线。</p>\n</blockquote>\n<h1 id=\"前言：\"><a href=\"#前言：\" class=\"headerlink\" title=\"前言：\"></a>前言：</h1><font size=\"4\">距离微信小程序发布已经过去很长一段时间了，怀着只求一知半解的心态来初探一下小程序，并利用小程序API做出一个小玩意儿，俯身亲耳以请各位大牛提出不足之处。这段时间对于小程序的学习是挺囫囵吞枣的，只是对小程序有着一些初步的了解，下面是对学习过程的一些梳理总结。</font>  \n\n\n<h1 id=\"初探：\"><a href=\"#初探：\" class=\"headerlink\" title=\"初探：\"></a>初探：</h1><p>1.小程序的组成主要由以下四种类型文件：  </p>\n<p>  .js　　　JavaScrip文件<br>  .json　　项目配置文件，负责窗口颜色等等<br>  .wxss　　类似HTML文件<br>  .wxml　　类似CSS文件</p>\n<p>2.小程序根目录下用app来命名的上述四种类型文件，就是程序入口文件，四个文件对应介绍如下：</p>\n<p>   app.json　　必须要有这个文件，配置文件入口。所有的页面都需要添加在此文件的pages中，第一条记录为 进入的首页。此文件还可以设置窗口的颜色，底部导航菜单等。<br>   app.js　　　必须要有这个文件，可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量等。<br>   app.wxss　　不必须有这个文件，可以定义全局的css样式。<br>   app.wxml　　不必须有这个文件，并不是首页界面。  </p>\n<p>3.小程序的基本函数如下：  </p>\n<p>App函数用来注册一个小程序。接受一个 object 参数，其指定小程序的生命周期函数等。  </p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">触发时机  </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">onLaunch</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序初始化</td>\n<td style=\"text-align:left\">当小程序初始化完成时，会触发 onLaunch（全局只触发一次）  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShow</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序显示</td>\n<td style=\"text-align:left\">当小程序启动，或从后台进入前台显示，会触发 onShow  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onHide</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序隐藏    当小程序从前台进入后台，会触发 onHide  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onError</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">错误监听函数    当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">其他</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">开发者可以添加任意的函数或数据到 Object 参数中，用 this 可以访问 </td>\n</tr>\n</tbody>\n</table>\n<p><br>   </p>\n<p>Page函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。   </p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">data</td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">页面的初始数据 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onLoad</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面加载 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onReady</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面初次渲染完成 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShow</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面显示 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onHide</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面隐藏 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onUnload</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面卸载 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onPullDownRefresh</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面相关事件处理函数–监听用户下拉动作 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onReachBottom</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面上拉触底事件的处理函数 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShareAppMessage</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">用户点击右上角转发 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onPageScroll</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面滚动触发事件的处理函数，其他Any开发者可以添加任意的函数或数据到 object 参数中，在页面的函数中用 this 可以访问   </td>\n</tr>\n</tbody>\n</table>\n<p><br></p>\n<p>4.更多小程序API请参考官方文档。<br>   <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/\" target=\"_blank\" rel=\"noopener\">点击传送门</a>  </p>\n<h1 id=\"实践：\"><a href=\"#实践：\" class=\"headerlink\" title=\"实践：\"></a>实践：</h1><p>通过实现一个数字爆炸小游戏加深了解，也是对初探小程序的一个完美终结。功能实现有单机版和联网版，单机版只能本地使用，联网版需要后台部分通过简单的spring-boot搭建。</p>\n<p><a href=\"https://github.com/reallinxu/NumBomb.git\" target=\"_blank\" rel=\"noopener\">数字爆炸小程序代码github地址</a></p>\n<p>要点笔记：</p>\n<p>1.js文件中page中方法data为初始化数据，可以在wxml文件中通过来获取，也可在js定义的方法中通过setData进行修改。</p>\n<p>2.传值，可以通过在wxml中使用data-id传值，在方法中可以获取date-id的值。<br>getNumJson: function (e){<br>　var numjson = e.currentTarget.dataset.id;<br>}</p>\n<p>3.多参传值可以利用json进行传输，方法接收json字符串后通过JSON.parse转换成含有参数的对象。</p>\n<p>4.页面跳转，js中使用下面方法进行跳转，此方法会销毁原page。<br>wx.redirectTo({<br>　　url: ‘../boom/boom’<br>})<br>当页面在tabbar时，用此方法不会跳转，应使用：<br>wx.switchTab({<br>　　url: ‘../index/index’<br>}) </p>\n<p>5.图片作为页面背景时，background-image 只能用网络url或者base64，图片的base64可以通过网页在线转换。 </p>\n<p>6.隐藏标签布局可以使css样式中 display: none或者在标签中设置 hidden=’true’，通过使用class=’‘在js中设置demo值来指定对应的css，这样可以在function中通过修改demo值来改变成不同的css。</p>\n<p>7.普通方法中修改变量使用:<br>baseInput: function (e) {<br>   　　this.setData({<br> 　　　　baseNum: e.detail.value<br>   　　})<br>}<br>wx.request请求中直接使用this已经是wx.request的this了，所以此时需要在wx.request中使用，则需要在wx.request外部定义 var that = this; 在wx.request中再使用that代替this即可。</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>微信小程序，简称小程序，英文名Mini Program，是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或搜一下即可打开应用。2017年1月9日，张小龙在2017微信公开课Pro上发布的小程序正式上线。</p>\n</blockquote>\n<h1 id=\"前言：\"><a href=\"#前言：\" class=\"headerlink\" title=\"前言：\"></a>前言：</h1><font size=\"4\">距离微信小程序发布已经过去很长一段时间了，怀着只求一知半解的心态来初探一下小程序，并利用小程序API做出一个小玩意儿，俯身亲耳以请各位大牛提出不足之处。这段时间对于小程序的学习是挺囫囵吞枣的，只是对小程序有着一些初步的了解，下面是对学习过程的一些梳理总结。</font>  \n\n\n<h1 id=\"初探：\"><a href=\"#初探：\" class=\"headerlink\" title=\"初探：\"></a>初探：</h1><p>1.小程序的组成主要由以下四种类型文件：  </p>\n<p>  .js　　　JavaScrip文件<br>  .json　　项目配置文件，负责窗口颜色等等<br>  .wxss　　类似HTML文件<br>  .wxml　　类似CSS文件</p>\n<p>2.小程序根目录下用app来命名的上述四种类型文件，就是程序入口文件，四个文件对应介绍如下：</p>\n<p>   app.json　　必须要有这个文件，配置文件入口。所有的页面都需要添加在此文件的pages中，第一条记录为 进入的首页。此文件还可以设置窗口的颜色，底部导航菜单等。<br>   app.js　　　必须要有这个文件，可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量等。<br>   app.wxss　　不必须有这个文件，可以定义全局的css样式。<br>   app.wxml　　不必须有这个文件，并不是首页界面。  </p>\n<p>3.小程序的基本函数如下：  </p>\n<p>App函数用来注册一个小程序。接受一个 object 参数，其指定小程序的生命周期函数等。  </p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">触发时机  </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">onLaunch</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序初始化</td>\n<td style=\"text-align:left\">当小程序初始化完成时，会触发 onLaunch（全局只触发一次）  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShow</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序显示</td>\n<td style=\"text-align:left\">当小程序启动，或从后台进入前台显示，会触发 onShow  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onHide</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听小程序隐藏    当小程序从前台进入后台，会触发 onHide  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onError</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">错误监听函数    当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">其他</td>\n<td style=\"text-align:left\"></td>\n<td style=\"text-align:left\">开发者可以添加任意的函数或数据到 Object 参数中，用 this 可以访问 </td>\n</tr>\n</tbody>\n</table>\n<p><br>   </p>\n<p>Page函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。   </p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">data</td>\n<td style=\"text-align:left\">Object</td>\n<td style=\"text-align:left\">页面的初始数据 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onLoad</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面加载 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onReady</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面初次渲染完成 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShow</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面显示 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onHide</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面隐藏 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onUnload</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">生命周期函数–监听页面卸载 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onPullDownRefresh</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面相关事件处理函数–监听用户下拉动作 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onReachBottom</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面上拉触底事件的处理函数 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onShareAppMessage</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">用户点击右上角转发 </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">onPageScroll</td>\n<td style=\"text-align:left\">Function</td>\n<td style=\"text-align:left\">页面滚动触发事件的处理函数，其他Any开发者可以添加任意的函数或数据到 object 参数中，在页面的函数中用 this 可以访问   </td>\n</tr>\n</tbody>\n</table>\n<p><br></p>\n<p>4.更多小程序API请参考官方文档。<br>   <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/\" target=\"_blank\" rel=\"noopener\">点击传送门</a>  </p>\n<h1 id=\"实践：\"><a href=\"#实践：\" class=\"headerlink\" title=\"实践：\"></a>实践：</h1><p>通过实现一个数字爆炸小游戏加深了解，也是对初探小程序的一个完美终结。功能实现有单机版和联网版，单机版只能本地使用，联网版需要后台部分通过简单的spring-boot搭建。</p>\n<p><a href=\"https://github.com/reallinxu/NumBomb.git\" target=\"_blank\" rel=\"noopener\">数字爆炸小程序代码github地址</a></p>\n<p>要点笔记：</p>\n<p>1.js文件中page中方法data为初始化数据，可以在wxml文件中通过来获取，也可在js定义的方法中通过setData进行修改。</p>\n<p>2.传值，可以通过在wxml中使用data-id传值，在方法中可以获取date-id的值。<br>getNumJson: function (e){<br>　var numjson = e.currentTarget.dataset.id;<br>}</p>\n<p>3.多参传值可以利用json进行传输，方法接收json字符串后通过JSON.parse转换成含有参数的对象。</p>\n<p>4.页面跳转，js中使用下面方法进行跳转，此方法会销毁原page。<br>wx.redirectTo({<br>　　url: ‘../boom/boom’<br>})<br>当页面在tabbar时，用此方法不会跳转，应使用：<br>wx.switchTab({<br>　　url: ‘../index/index’<br>}) </p>\n<p>5.图片作为页面背景时，background-image 只能用网络url或者base64，图片的base64可以通过网页在线转换。 </p>\n<p>6.隐藏标签布局可以使css样式中 display: none或者在标签中设置 hidden=’true’，通过使用class=’‘在js中设置demo值来指定对应的css，这样可以在function中通过修改demo值来改变成不同的css。</p>\n<p>7.普通方法中修改变量使用:<br>baseInput: function (e) {<br>   　　this.setData({<br> 　　　　baseNum: e.detail.value<br>   　　})<br>}<br>wx.request请求中直接使用this已经是wx.request的this了，所以此时需要在wx.request中使用，则需要在wx.request外部定义 var that = this; 在wx.request中再使用that代替this即可。</p>\n"},{"title":"Docker容器中搭建rabbitmq集群","id":"522","date":"2018-05-29T10:00:00.000Z","author":["linxu"],"_content":"\n# RabbitMq简介 #\n>AMQP，即Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦，消息的发送者无需知道消息使用者的存在，反之亦然。AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。\n\nRabbitMQ是一个开源的AMQP实现，服务器端用Erlang语言编写，支持多种客户端。使用Rabbitmq可以使程序间不再需要彼此调用，只需要将消息放入消息队列中，通过对队列的监听，对消息进行对应处理，而且消息队列在当消息接收方服务忙或不可用时，提供了一个消息暂存的功能，等服务可用时，继续对消息进行处理。\n\n# RabbitMq几个基本概念 #\n1. Connection、Channel\n\tConnection是RabbitMQ的socket链接，它封装了socket协议相关部分逻辑。Channel是可以定义Queue、定义Exchange、绑定Queue与Exchange、发布消息等的最重要的一个接口。\n2. Queue\n\tQueue（队列）是RabbitMQ的内部对象，生产者将消息投递到queue中，消费者从queue中获取消息。多个消费者可以订阅同一个queue，这时queue的消息会均摊给多个消费者。\n3. Message acknowledgment\n\t消费者收到queue消息后，为了避免没有处理完成就宕机导致消息丢失，在消费者完成后会发送一个回执给rabbitmq，rabbit收到消息回执(ack)才会移除消息,如果rabbitmq检测到消费者已断开但是仍未收到回执，则会将消息发送给其他消费者。\n4. Message durability\n\t如果需要在rabbitmq重启时也不丢失消息，可以将queue和message设置为可持久化的。这种情况可能存在还没有持久化rabbitmq就停的小概率事件，这就需要rabbitmq的事务。\n5. Prefetch count\n\t设置prefetchCount来限制Queue每次发送给每个消费者的消息数，比如我们设置prefetchCount=1，则Queue每次给每个消费者发送一条消息，消费者处理完这条消息后Queue会再给该消费者发送一条消息。\n6. Exchange\n\t生产者通过Exchange将消息投入queue中，由Exchange将消息路由到一个或多个Queue中(或者丢弃)。\n7. routing key\n\t生产者可以在发送消息给Exchange时，通过指定routing key来决定消息流向哪里。\n8. Binding\n\tRabbitMQ中通过Binding将Exchange与Queue关联起来。\n9. Binding key\n\tbinding key与routing key相匹配时，消息将会被路由到对应的Queue中。\n10. Exchange Types\n\tfanout：所有发送到该Exchange的消息路由到所有与它绑定的Queue中。\n\tdirect：消息路由到那些binding key与routing key完全匹配的Queue中。\n\ttopic：topic与direct相似，可以使用*与#做模糊匹配，*匹配一个单词，#匹配多个单词（可以是零个）\n\theaders：不依赖于key的规则，而是根据发送的消息内容中的headers属性进行匹配。在绑定Queue与Exchange时指定一组键值对，当消息发送到Exchange时，RabbitMQ会取到该消息的headers（也是一个键值对的形式），对比其中的键值对是否完全匹配Queue与Exchange绑定时指定的键值对。\n11. RPC\n\t客户端发送请求消息时，在消息的属性（MessageProperties）中设置两个值replyTo（一个Queue名称，用于告诉服务器处理完成后将通知我的消息发送到这个Queue中）和correlationId（此次请求的标识号，服务器处理完成后需要将此属性返还，客户端将根据这个id了解哪条请求被成功执行了或执行失败）。\n\n# Docker容器搭建rabbitmq集群 #\n## Dockerfile文件 ##\n将rabbitmq-signing-key-public.asc，rabbitmq-server-3.3.5-1.noarch.rpm放入Dockerfile同目录\n```\nfrom centos\nMAINTAINER reallinxu\n\nRUN rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\nRUN yum install -y erlang\nCOPY rabbitmq-signing-key-public.asc /usr/software/rabbitmq-signing-key-public.asc\nCOPY rabbitmq-server-3.3.5-1.noarch.rpm /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm\nRUN rpm --import /usr/software/rabbitmq-signing-key-public.asc\nRUN rpm -ivh /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm  --force --nodeps\nRUN rabbitmq-plugins enable rabbitmq_management\nRUN chkconfig --level 3 rabbitmq-server on\nRUN sed -i 's/PID_FILE=\\/var\\/run\\/rabbitmq\\/pid/&\\nexport RABBITMQ_MNESIA=\\/rabbitmq\\/mnesia/' /etc/init.d/rabbitmq-server\nRUN chmod 644 /etc/rabbitmq/enabled_plugins\nRUN rm -rf /usr/software/rabbitmq-signing-key-public.asc\nRUN rm -rf /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm\nEXPOSE 8080 15672 5672\n```\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/rabbit:v1\" .\n```\n## 创建容器 ##\n### 创建第一个容器 ###\n```\ndocker run -p 15672:15672 -i -t --name rabbit1 reallinxu/rabbit:1 \n#查看hosts\ncat /etc/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.3      c0543dbe04fe\n```\n\n### 创建后续容器 ###\n因为要搭建集群，后面的hosts文件需要配置第一台的配置，这时候我们使用-v进行挂载容器，将/etc/hosts指定使用宿主机的/user/hosts文件。\n```\n#/user/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.3      c0543dbe04fe\n```\n创建容器\n```\ndocker run -i -t -p 15670:15672 --name rabbit2 -v /user/hosts:/etc/hosts reallinxu/rabbit:1 \n```\n\n### 实现集群 ###\n第一个容器中启动rabbitmq\n```\nrabbitmq-server -detached # -detached后台运行\nrabbitmqctl add_user admin admin\nrabbitmqctl set_user_tags admin administrator\n```\n将/var/lib/rabbitmq的.erlang.cookie文件拷贝到宿主机中\n```\nsudo docker cp c0543dbe04fe:/var/lib/rabbitmq /user\n```\n将第一个容器中/root下cookie覆盖\n```\ndocker cp /user/rabbitmq/.erlang.cookie c0543dbe04fe:/root\n```\n将宿主机的cookie文件覆盖到其他容器中：\n```\ndocker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/root\ndocker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/var/lib/rabbitmq\n```\n更改.erlang.cookie的访问权限为400\n```\nchmod 400 /var/lib/rabbitmq/.erlang.cookie\n```\n更改.erlang.cookie的文件所有人为rabbitmq\n```\nchown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n```\n启动后续容器并做如下操作：\n```\nrabbitmq-server -detached\nrabbitmqctl stop_app\nrabbitmqctl join_cluster rabbit@c0543dbe04fe\nrabbitmqctl start_app\n```\n查看rabbitmq后台界面，可以发现集群搭建成功。不过因为直接挂载，导致容器自身映射端口并没有生效，所以在后面需要将自己的hosts配置进去，在hosts文件后面追加下面语句\n```\n172.17.0.3\t780f23c07ef7\n```\n容器ID请按照自己创建容器ID来替换。\n\n# 小知识 #\n## sed命令 ##\nsed -i 's/指定的字符/要插入的字符&/'  文件  #前插\nsed -i 's/指定的字符/&要插入的字符/'  文件  #后插\nsed 's/原字符串/替换字符串/' 文件\t\t\t#替换\nsed 's/原字符串/替换字符串/g' 文件\t\t\t#替换所有\n\\n 换行符  \\转义\n\n## 查看容器端口映射 ##\ndocker port <NAME>\n\n## 失败解决 ##\n安装rpm包如果出现“Exiting on user Command”的错误，请在yum命令后加上“-y”选项\n\n## systemctl ##\n不可以使用，尽量避免，网上说可以CMD或者entrypoint设置为/usr/sbin/init，但是创建容器时一直没有反应，所以放弃了","source":"_posts/Docker容器中搭建rabbitmq集群.md","raw":"---\ntitle: \"Docker容器中搭建rabbitmq集群\"\ntags:\n  - noname\nid: 522\ncategories:\n  - noname\ndate: 2018-05-29 18:00:00\nauthor: \n  - linxu\n---\n\n# RabbitMq简介 #\n>AMQP，即Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦，消息的发送者无需知道消息使用者的存在，反之亦然。AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。\n\nRabbitMQ是一个开源的AMQP实现，服务器端用Erlang语言编写，支持多种客户端。使用Rabbitmq可以使程序间不再需要彼此调用，只需要将消息放入消息队列中，通过对队列的监听，对消息进行对应处理，而且消息队列在当消息接收方服务忙或不可用时，提供了一个消息暂存的功能，等服务可用时，继续对消息进行处理。\n\n# RabbitMq几个基本概念 #\n1. Connection、Channel\n\tConnection是RabbitMQ的socket链接，它封装了socket协议相关部分逻辑。Channel是可以定义Queue、定义Exchange、绑定Queue与Exchange、发布消息等的最重要的一个接口。\n2. Queue\n\tQueue（队列）是RabbitMQ的内部对象，生产者将消息投递到queue中，消费者从queue中获取消息。多个消费者可以订阅同一个queue，这时queue的消息会均摊给多个消费者。\n3. Message acknowledgment\n\t消费者收到queue消息后，为了避免没有处理完成就宕机导致消息丢失，在消费者完成后会发送一个回执给rabbitmq，rabbit收到消息回执(ack)才会移除消息,如果rabbitmq检测到消费者已断开但是仍未收到回执，则会将消息发送给其他消费者。\n4. Message durability\n\t如果需要在rabbitmq重启时也不丢失消息，可以将queue和message设置为可持久化的。这种情况可能存在还没有持久化rabbitmq就停的小概率事件，这就需要rabbitmq的事务。\n5. Prefetch count\n\t设置prefetchCount来限制Queue每次发送给每个消费者的消息数，比如我们设置prefetchCount=1，则Queue每次给每个消费者发送一条消息，消费者处理完这条消息后Queue会再给该消费者发送一条消息。\n6. Exchange\n\t生产者通过Exchange将消息投入queue中，由Exchange将消息路由到一个或多个Queue中(或者丢弃)。\n7. routing key\n\t生产者可以在发送消息给Exchange时，通过指定routing key来决定消息流向哪里。\n8. Binding\n\tRabbitMQ中通过Binding将Exchange与Queue关联起来。\n9. Binding key\n\tbinding key与routing key相匹配时，消息将会被路由到对应的Queue中。\n10. Exchange Types\n\tfanout：所有发送到该Exchange的消息路由到所有与它绑定的Queue中。\n\tdirect：消息路由到那些binding key与routing key完全匹配的Queue中。\n\ttopic：topic与direct相似，可以使用*与#做模糊匹配，*匹配一个单词，#匹配多个单词（可以是零个）\n\theaders：不依赖于key的规则，而是根据发送的消息内容中的headers属性进行匹配。在绑定Queue与Exchange时指定一组键值对，当消息发送到Exchange时，RabbitMQ会取到该消息的headers（也是一个键值对的形式），对比其中的键值对是否完全匹配Queue与Exchange绑定时指定的键值对。\n11. RPC\n\t客户端发送请求消息时，在消息的属性（MessageProperties）中设置两个值replyTo（一个Queue名称，用于告诉服务器处理完成后将通知我的消息发送到这个Queue中）和correlationId（此次请求的标识号，服务器处理完成后需要将此属性返还，客户端将根据这个id了解哪条请求被成功执行了或执行失败）。\n\n# Docker容器搭建rabbitmq集群 #\n## Dockerfile文件 ##\n将rabbitmq-signing-key-public.asc，rabbitmq-server-3.3.5-1.noarch.rpm放入Dockerfile同目录\n```\nfrom centos\nMAINTAINER reallinxu\n\nRUN rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\nRUN yum install -y erlang\nCOPY rabbitmq-signing-key-public.asc /usr/software/rabbitmq-signing-key-public.asc\nCOPY rabbitmq-server-3.3.5-1.noarch.rpm /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm\nRUN rpm --import /usr/software/rabbitmq-signing-key-public.asc\nRUN rpm -ivh /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm  --force --nodeps\nRUN rabbitmq-plugins enable rabbitmq_management\nRUN chkconfig --level 3 rabbitmq-server on\nRUN sed -i 's/PID_FILE=\\/var\\/run\\/rabbitmq\\/pid/&\\nexport RABBITMQ_MNESIA=\\/rabbitmq\\/mnesia/' /etc/init.d/rabbitmq-server\nRUN chmod 644 /etc/rabbitmq/enabled_plugins\nRUN rm -rf /usr/software/rabbitmq-signing-key-public.asc\nRUN rm -rf /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm\nEXPOSE 8080 15672 5672\n```\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/rabbit:v1\" .\n```\n## 创建容器 ##\n### 创建第一个容器 ###\n```\ndocker run -p 15672:15672 -i -t --name rabbit1 reallinxu/rabbit:1 \n#查看hosts\ncat /etc/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.3      c0543dbe04fe\n```\n\n### 创建后续容器 ###\n因为要搭建集群，后面的hosts文件需要配置第一台的配置，这时候我们使用-v进行挂载容器，将/etc/hosts指定使用宿主机的/user/hosts文件。\n```\n#/user/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.3      c0543dbe04fe\n```\n创建容器\n```\ndocker run -i -t -p 15670:15672 --name rabbit2 -v /user/hosts:/etc/hosts reallinxu/rabbit:1 \n```\n\n### 实现集群 ###\n第一个容器中启动rabbitmq\n```\nrabbitmq-server -detached # -detached后台运行\nrabbitmqctl add_user admin admin\nrabbitmqctl set_user_tags admin administrator\n```\n将/var/lib/rabbitmq的.erlang.cookie文件拷贝到宿主机中\n```\nsudo docker cp c0543dbe04fe:/var/lib/rabbitmq /user\n```\n将第一个容器中/root下cookie覆盖\n```\ndocker cp /user/rabbitmq/.erlang.cookie c0543dbe04fe:/root\n```\n将宿主机的cookie文件覆盖到其他容器中：\n```\ndocker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/root\ndocker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/var/lib/rabbitmq\n```\n更改.erlang.cookie的访问权限为400\n```\nchmod 400 /var/lib/rabbitmq/.erlang.cookie\n```\n更改.erlang.cookie的文件所有人为rabbitmq\n```\nchown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n```\n启动后续容器并做如下操作：\n```\nrabbitmq-server -detached\nrabbitmqctl stop_app\nrabbitmqctl join_cluster rabbit@c0543dbe04fe\nrabbitmqctl start_app\n```\n查看rabbitmq后台界面，可以发现集群搭建成功。不过因为直接挂载，导致容器自身映射端口并没有生效，所以在后面需要将自己的hosts配置进去，在hosts文件后面追加下面语句\n```\n172.17.0.3\t780f23c07ef7\n```\n容器ID请按照自己创建容器ID来替换。\n\n# 小知识 #\n## sed命令 ##\nsed -i 's/指定的字符/要插入的字符&/'  文件  #前插\nsed -i 's/指定的字符/&要插入的字符/'  文件  #后插\nsed 's/原字符串/替换字符串/' 文件\t\t\t#替换\nsed 's/原字符串/替换字符串/g' 文件\t\t\t#替换所有\n\\n 换行符  \\转义\n\n## 查看容器端口映射 ##\ndocker port <NAME>\n\n## 失败解决 ##\n安装rpm包如果出现“Exiting on user Command”的错误，请在yum命令后加上“-y”选项\n\n## systemctl ##\n不可以使用，尽量避免，网上说可以CMD或者entrypoint设置为/usr/sbin/init，但是创建容器时一直没有反应，所以放弃了","slug":"Docker容器中搭建rabbitmq集群","published":1,"updated":"2018-05-30T08:17:00.173Z","_id":"cjhqzbtlu000984gpqjgoaprd","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"RabbitMq简介\"><a href=\"#RabbitMq简介\" class=\"headerlink\" title=\"RabbitMq简介\"></a>RabbitMq简介</h1><blockquote>\n<p>AMQP，即Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦，消息的发送者无需知道消息使用者的存在，反之亦然。AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。</p>\n</blockquote>\n<p>RabbitMQ是一个开源的AMQP实现，服务器端用Erlang语言编写，支持多种客户端。使用Rabbitmq可以使程序间不再需要彼此调用，只需要将消息放入消息队列中，通过对队列的监听，对消息进行对应处理，而且消息队列在当消息接收方服务忙或不可用时，提供了一个消息暂存的功能，等服务可用时，继续对消息进行处理。</p>\n<h1 id=\"RabbitMq几个基本概念\"><a href=\"#RabbitMq几个基本概念\" class=\"headerlink\" title=\"RabbitMq几个基本概念\"></a>RabbitMq几个基本概念</h1><ol>\n<li>Connection、Channel<br> Connection是RabbitMQ的socket链接，它封装了socket协议相关部分逻辑。Channel是可以定义Queue、定义Exchange、绑定Queue与Exchange、发布消息等的最重要的一个接口。</li>\n<li>Queue<br> Queue（队列）是RabbitMQ的内部对象，生产者将消息投递到queue中，消费者从queue中获取消息。多个消费者可以订阅同一个queue，这时queue的消息会均摊给多个消费者。</li>\n<li>Message acknowledgment<br> 消费者收到queue消息后，为了避免没有处理完成就宕机导致消息丢失，在消费者完成后会发送一个回执给rabbitmq，rabbit收到消息回执(ack)才会移除消息,如果rabbitmq检测到消费者已断开但是仍未收到回执，则会将消息发送给其他消费者。</li>\n<li>Message durability<br> 如果需要在rabbitmq重启时也不丢失消息，可以将queue和message设置为可持久化的。这种情况可能存在还没有持久化rabbitmq就停的小概率事件，这就需要rabbitmq的事务。</li>\n<li>Prefetch count<br> 设置prefetchCount来限制Queue每次发送给每个消费者的消息数，比如我们设置prefetchCount=1，则Queue每次给每个消费者发送一条消息，消费者处理完这条消息后Queue会再给该消费者发送一条消息。</li>\n<li>Exchange<br> 生产者通过Exchange将消息投入queue中，由Exchange将消息路由到一个或多个Queue中(或者丢弃)。</li>\n<li>routing key<br> 生产者可以在发送消息给Exchange时，通过指定routing key来决定消息流向哪里。</li>\n<li>Binding<br> RabbitMQ中通过Binding将Exchange与Queue关联起来。</li>\n<li>Binding key<br> binding key与routing key相匹配时，消息将会被路由到对应的Queue中。</li>\n<li>Exchange Types<br>fanout：所有发送到该Exchange的消息路由到所有与它绑定的Queue中。<br>direct：消息路由到那些binding key与routing key完全匹配的Queue中。<br>topic：topic与direct相似，可以使用<em>与#做模糊匹配，</em>匹配一个单词，#匹配多个单词（可以是零个）<br>headers：不依赖于key的规则，而是根据发送的消息内容中的headers属性进行匹配。在绑定Queue与Exchange时指定一组键值对，当消息发送到Exchange时，RabbitMQ会取到该消息的headers（也是一个键值对的形式），对比其中的键值对是否完全匹配Queue与Exchange绑定时指定的键值对。</li>\n<li>RPC<br>客户端发送请求消息时，在消息的属性（MessageProperties）中设置两个值replyTo（一个Queue名称，用于告诉服务器处理完成后将通知我的消息发送到这个Queue中）和correlationId（此次请求的标识号，服务器处理完成后需要将此属性返还，客户端将根据这个id了解哪条请求被成功执行了或执行失败）。</li>\n</ol>\n<h1 id=\"Docker容器搭建rabbitmq集群\"><a href=\"#Docker容器搭建rabbitmq集群\" class=\"headerlink\" title=\"Docker容器搭建rabbitmq集群\"></a>Docker容器搭建rabbitmq集群</h1><h2 id=\"Dockerfile文件\"><a href=\"#Dockerfile文件\" class=\"headerlink\" title=\"Dockerfile文件\"></a>Dockerfile文件</h2><p>将rabbitmq-signing-key-public.asc，rabbitmq-server-3.3.5-1.noarch.rpm放入Dockerfile同目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">RUN rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</span><br><span class=\"line\">RUN yum install -y erlang</span><br><span class=\"line\">COPY rabbitmq-signing-key-public.asc /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">COPY rabbitmq-server-3.3.5-1.noarch.rpm /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm</span><br><span class=\"line\">RUN rpm --import /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">RUN rpm -ivh /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm  --force --nodeps</span><br><span class=\"line\">RUN rabbitmq-plugins enable rabbitmq_management</span><br><span class=\"line\">RUN chkconfig --level 3 rabbitmq-server on</span><br><span class=\"line\">RUN sed -i &apos;s/PID_FILE=\\/var\\/run\\/rabbitmq\\/pid/&amp;\\nexport RABBITMQ_MNESIA=\\/rabbitmq\\/mnesia/&apos; /etc/init.d/rabbitmq-server</span><br><span class=\"line\">RUN chmod 644 /etc/rabbitmq/enabled_plugins</span><br><span class=\"line\">RUN rm -rf /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">RUN rm -rf /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm</span><br><span class=\"line\">EXPOSE 8080 15672 5672</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/rabbit:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h2><h3 id=\"创建第一个容器\"><a href=\"#创建第一个容器\" class=\"headerlink\" title=\"创建第一个容器\"></a>创建第一个容器</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 15672:15672 -i -t --name rabbit1 reallinxu/rabbit:1 </span><br><span class=\"line\">#查看hosts</span><br><span class=\"line\">cat /etc/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.3      c0543dbe04fe</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建后续容器\"><a href=\"#创建后续容器\" class=\"headerlink\" title=\"创建后续容器\"></a>创建后续容器</h3><p>因为要搭建集群，后面的hosts文件需要配置第一台的配置，这时候我们使用-v进行挂载容器，将/etc/hosts指定使用宿主机的/user/hosts文件。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#/user/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.3      c0543dbe04fe</span><br></pre></td></tr></table></figure></p>\n<p>创建容器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t -p 15670:15672 --name rabbit2 -v /user/hosts:/etc/hosts reallinxu/rabbit:1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"实现集群\"><a href=\"#实现集群\" class=\"headerlink\" title=\"实现集群\"></a>实现集群</h3><p>第一个容器中启动rabbitmq<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-server -detached # -detached后台运行</span><br><span class=\"line\">rabbitmqctl add_user admin admin</span><br><span class=\"line\">rabbitmqctl set_user_tags admin administrator</span><br></pre></td></tr></table></figure></p>\n<p>将/var/lib/rabbitmq的.erlang.cookie文件拷贝到宿主机中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp c0543dbe04fe:/var/lib/rabbitmq /user</span><br></pre></td></tr></table></figure></p>\n<p>将第一个容器中/root下cookie覆盖<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie c0543dbe04fe:/root</span><br></pre></td></tr></table></figure></p>\n<p>将宿主机的cookie文件覆盖到其他容器中：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/root</span><br><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/var/lib/rabbitmq</span><br></pre></td></tr></table></figure></p>\n<p>更改.erlang.cookie的访问权限为400<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 400 /var/lib/rabbitmq/.erlang.cookie</span><br></pre></td></tr></table></figure></p>\n<p>更改.erlang.cookie的文件所有人为rabbitmq<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie</span><br></pre></td></tr></table></figure></p>\n<p>启动后续容器并做如下操作：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-server -detached</span><br><span class=\"line\">rabbitmqctl stop_app</span><br><span class=\"line\">rabbitmqctl join_cluster rabbit@c0543dbe04fe</span><br><span class=\"line\">rabbitmqctl start_app</span><br></pre></td></tr></table></figure></p>\n<p>查看rabbitmq后台界面，可以发现集群搭建成功。不过因为直接挂载，导致容器自身映射端口并没有生效，所以在后面需要将自己的hosts配置进去，在hosts文件后面追加下面语句<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">172.17.0.3\t780f23c07ef7</span><br></pre></td></tr></table></figure></p>\n<p>容器ID请按照自己创建容器ID来替换。</p>\n<h1 id=\"小知识\"><a href=\"#小知识\" class=\"headerlink\" title=\"小知识\"></a>小知识</h1><h2 id=\"sed命令\"><a href=\"#sed命令\" class=\"headerlink\" title=\"sed命令\"></a>sed命令</h2><p>sed -i ‘s/指定的字符/要插入的字符&amp;/‘  文件  #前插<br>sed -i ‘s/指定的字符/&amp;要插入的字符/‘  文件  #后插<br>sed ‘s/原字符串/替换字符串/‘ 文件            #替换<br>sed ‘s/原字符串/替换字符串/g’ 文件            #替换所有<br>\\n 换行符  \\转义</p>\n<h2 id=\"查看容器端口映射\"><a href=\"#查看容器端口映射\" class=\"headerlink\" title=\"查看容器端口映射\"></a>查看容器端口映射</h2><p>docker port <name></name></p>\n<h2 id=\"失败解决\"><a href=\"#失败解决\" class=\"headerlink\" title=\"失败解决\"></a>失败解决</h2><p>安装rpm包如果出现“Exiting on user Command”的错误，请在yum命令后加上“-y”选项</p>\n<h2 id=\"systemctl\"><a href=\"#systemctl\" class=\"headerlink\" title=\"systemctl\"></a>systemctl</h2><p>不可以使用，尽量避免，网上说可以CMD或者entrypoint设置为/usr/sbin/init，但是创建容器时一直没有反应，所以放弃了</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"RabbitMq简介\"><a href=\"#RabbitMq简介\" class=\"headerlink\" title=\"RabbitMq简介\"></a>RabbitMq简介</h1><blockquote>\n<p>AMQP，即Advanced Message Queuing Protocol，高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。消息中间件主要用于组件之间的解耦，消息的发送者无需知道消息使用者的存在，反之亦然。AMQP的主要特征是面向消息、队列、路由（包括点对点和发布/订阅）、可靠性、安全。</p>\n</blockquote>\n<p>RabbitMQ是一个开源的AMQP实现，服务器端用Erlang语言编写，支持多种客户端。使用Rabbitmq可以使程序间不再需要彼此调用，只需要将消息放入消息队列中，通过对队列的监听，对消息进行对应处理，而且消息队列在当消息接收方服务忙或不可用时，提供了一个消息暂存的功能，等服务可用时，继续对消息进行处理。</p>\n<h1 id=\"RabbitMq几个基本概念\"><a href=\"#RabbitMq几个基本概念\" class=\"headerlink\" title=\"RabbitMq几个基本概念\"></a>RabbitMq几个基本概念</h1><ol>\n<li>Connection、Channel<br> Connection是RabbitMQ的socket链接，它封装了socket协议相关部分逻辑。Channel是可以定义Queue、定义Exchange、绑定Queue与Exchange、发布消息等的最重要的一个接口。</li>\n<li>Queue<br> Queue（队列）是RabbitMQ的内部对象，生产者将消息投递到queue中，消费者从queue中获取消息。多个消费者可以订阅同一个queue，这时queue的消息会均摊给多个消费者。</li>\n<li>Message acknowledgment<br> 消费者收到queue消息后，为了避免没有处理完成就宕机导致消息丢失，在消费者完成后会发送一个回执给rabbitmq，rabbit收到消息回执(ack)才会移除消息,如果rabbitmq检测到消费者已断开但是仍未收到回执，则会将消息发送给其他消费者。</li>\n<li>Message durability<br> 如果需要在rabbitmq重启时也不丢失消息，可以将queue和message设置为可持久化的。这种情况可能存在还没有持久化rabbitmq就停的小概率事件，这就需要rabbitmq的事务。</li>\n<li>Prefetch count<br> 设置prefetchCount来限制Queue每次发送给每个消费者的消息数，比如我们设置prefetchCount=1，则Queue每次给每个消费者发送一条消息，消费者处理完这条消息后Queue会再给该消费者发送一条消息。</li>\n<li>Exchange<br> 生产者通过Exchange将消息投入queue中，由Exchange将消息路由到一个或多个Queue中(或者丢弃)。</li>\n<li>routing key<br> 生产者可以在发送消息给Exchange时，通过指定routing key来决定消息流向哪里。</li>\n<li>Binding<br> RabbitMQ中通过Binding将Exchange与Queue关联起来。</li>\n<li>Binding key<br> binding key与routing key相匹配时，消息将会被路由到对应的Queue中。</li>\n<li>Exchange Types<br>fanout：所有发送到该Exchange的消息路由到所有与它绑定的Queue中。<br>direct：消息路由到那些binding key与routing key完全匹配的Queue中。<br>topic：topic与direct相似，可以使用<em>与#做模糊匹配，</em>匹配一个单词，#匹配多个单词（可以是零个）<br>headers：不依赖于key的规则，而是根据发送的消息内容中的headers属性进行匹配。在绑定Queue与Exchange时指定一组键值对，当消息发送到Exchange时，RabbitMQ会取到该消息的headers（也是一个键值对的形式），对比其中的键值对是否完全匹配Queue与Exchange绑定时指定的键值对。</li>\n<li>RPC<br>客户端发送请求消息时，在消息的属性（MessageProperties）中设置两个值replyTo（一个Queue名称，用于告诉服务器处理完成后将通知我的消息发送到这个Queue中）和correlationId（此次请求的标识号，服务器处理完成后需要将此属性返还，客户端将根据这个id了解哪条请求被成功执行了或执行失败）。</li>\n</ol>\n<h1 id=\"Docker容器搭建rabbitmq集群\"><a href=\"#Docker容器搭建rabbitmq集群\" class=\"headerlink\" title=\"Docker容器搭建rabbitmq集群\"></a>Docker容器搭建rabbitmq集群</h1><h2 id=\"Dockerfile文件\"><a href=\"#Dockerfile文件\" class=\"headerlink\" title=\"Dockerfile文件\"></a>Dockerfile文件</h2><p>将rabbitmq-signing-key-public.asc，rabbitmq-server-3.3.5-1.noarch.rpm放入Dockerfile同目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">RUN rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</span><br><span class=\"line\">RUN yum install -y erlang</span><br><span class=\"line\">COPY rabbitmq-signing-key-public.asc /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">COPY rabbitmq-server-3.3.5-1.noarch.rpm /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm</span><br><span class=\"line\">RUN rpm --import /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">RUN rpm -ivh /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm  --force --nodeps</span><br><span class=\"line\">RUN rabbitmq-plugins enable rabbitmq_management</span><br><span class=\"line\">RUN chkconfig --level 3 rabbitmq-server on</span><br><span class=\"line\">RUN sed -i &apos;s/PID_FILE=\\/var\\/run\\/rabbitmq\\/pid/&amp;\\nexport RABBITMQ_MNESIA=\\/rabbitmq\\/mnesia/&apos; /etc/init.d/rabbitmq-server</span><br><span class=\"line\">RUN chmod 644 /etc/rabbitmq/enabled_plugins</span><br><span class=\"line\">RUN rm -rf /usr/software/rabbitmq-signing-key-public.asc</span><br><span class=\"line\">RUN rm -rf /usr/software/rabbitmq-server-3.3.5-1.noarch.rpm</span><br><span class=\"line\">EXPOSE 8080 15672 5672</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/rabbit:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h2><h3 id=\"创建第一个容器\"><a href=\"#创建第一个容器\" class=\"headerlink\" title=\"创建第一个容器\"></a>创建第一个容器</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 15672:15672 -i -t --name rabbit1 reallinxu/rabbit:1 </span><br><span class=\"line\">#查看hosts</span><br><span class=\"line\">cat /etc/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.3      c0543dbe04fe</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建后续容器\"><a href=\"#创建后续容器\" class=\"headerlink\" title=\"创建后续容器\"></a>创建后续容器</h3><p>因为要搭建集群，后面的hosts文件需要配置第一台的配置，这时候我们使用-v进行挂载容器，将/etc/hosts指定使用宿主机的/user/hosts文件。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#/user/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.3      c0543dbe04fe</span><br></pre></td></tr></table></figure></p>\n<p>创建容器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t -p 15670:15672 --name rabbit2 -v /user/hosts:/etc/hosts reallinxu/rabbit:1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"实现集群\"><a href=\"#实现集群\" class=\"headerlink\" title=\"实现集群\"></a>实现集群</h3><p>第一个容器中启动rabbitmq<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-server -detached # -detached后台运行</span><br><span class=\"line\">rabbitmqctl add_user admin admin</span><br><span class=\"line\">rabbitmqctl set_user_tags admin administrator</span><br></pre></td></tr></table></figure></p>\n<p>将/var/lib/rabbitmq的.erlang.cookie文件拷贝到宿主机中<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker cp c0543dbe04fe:/var/lib/rabbitmq /user</span><br></pre></td></tr></table></figure></p>\n<p>将第一个容器中/root下cookie覆盖<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie c0543dbe04fe:/root</span><br></pre></td></tr></table></figure></p>\n<p>将宿主机的cookie文件覆盖到其他容器中：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/root</span><br><span class=\"line\">docker cp /user/rabbitmq/.erlang.cookie 780f23c07ef7:/var/lib/rabbitmq</span><br></pre></td></tr></table></figure></p>\n<p>更改.erlang.cookie的访问权限为400<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 400 /var/lib/rabbitmq/.erlang.cookie</span><br></pre></td></tr></table></figure></p>\n<p>更改.erlang.cookie的文件所有人为rabbitmq<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie</span><br></pre></td></tr></table></figure></p>\n<p>启动后续容器并做如下操作：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-server -detached</span><br><span class=\"line\">rabbitmqctl stop_app</span><br><span class=\"line\">rabbitmqctl join_cluster rabbit@c0543dbe04fe</span><br><span class=\"line\">rabbitmqctl start_app</span><br></pre></td></tr></table></figure></p>\n<p>查看rabbitmq后台界面，可以发现集群搭建成功。不过因为直接挂载，导致容器自身映射端口并没有生效，所以在后面需要将自己的hosts配置进去，在hosts文件后面追加下面语句<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">172.17.0.3\t780f23c07ef7</span><br></pre></td></tr></table></figure></p>\n<p>容器ID请按照自己创建容器ID来替换。</p>\n<h1 id=\"小知识\"><a href=\"#小知识\" class=\"headerlink\" title=\"小知识\"></a>小知识</h1><h2 id=\"sed命令\"><a href=\"#sed命令\" class=\"headerlink\" title=\"sed命令\"></a>sed命令</h2><p>sed -i ‘s/指定的字符/要插入的字符&amp;/‘  文件  #前插<br>sed -i ‘s/指定的字符/&amp;要插入的字符/‘  文件  #后插<br>sed ‘s/原字符串/替换字符串/‘ 文件            #替换<br>sed ‘s/原字符串/替换字符串/g’ 文件            #替换所有<br>\\n 换行符  \\转义</p>\n<h2 id=\"查看容器端口映射\"><a href=\"#查看容器端口映射\" class=\"headerlink\" title=\"查看容器端口映射\"></a>查看容器端口映射</h2><p>docker port <name></name></p>\n<h2 id=\"失败解决\"><a href=\"#失败解决\" class=\"headerlink\" title=\"失败解决\"></a>失败解决</h2><p>安装rpm包如果出现“Exiting on user Command”的错误，请在yum命令后加上“-y”选项</p>\n<h2 id=\"systemctl\"><a href=\"#systemctl\" class=\"headerlink\" title=\"systemctl\"></a>systemctl</h2><p>不可以使用，尽量避免，网上说可以CMD或者entrypoint设置为/usr/sbin/init，但是创建容器时一直没有反应，所以放弃了</p>\n"},{"title":" Redis集群搭建\t\t","id":"108","date":"2018-01-26T06:36:50.000Z","_content":"\nredis安装请参考：\n\nhttp://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/\n\n1.单台机器redis集群搭建  \n\t\n\t[root@linxu ~]# mkdir /usr/local/redis-cluster #创建集群目录\n\t[root@linxu ~]# cd /usr/local/redis-cluster    \n\t[root@linxu redis-cluster]# mkdir -p 9001/data 9002/data 9003/data 9004/data 9005/data 9006/data  #创建六个节点目录\n\t[root@linxu redis-cluster]# mkdir bin\n\t[root@linxu bin]# cd /usr/local/redis/redis-4.0.6/src   #redis安装目录下src\n\t[root@linxu src]# cp * /usr/local/redis-cluster/bin  #将redis安装目录src文件copy到bin中\n\t[root@linxu redis-4.0.6]# cd /usr/local/redis/redis-4.0.6   #redis安装目录\n\t[root@linxu redis-4.0.6]# cp * /usr/local/redis-cluster/9001   #其他9002-9006同样操作\n\t[root@linxu 9001]# cd /usr/local/redis-cluster/9001            #先修改9001，其他几台需要同样操作\n\t[root@linxu redis-4.0.6]# vi redis.conf                        #修改配置文件\n\tport 9001（每个节点的端口号）\n\tdaemonize yes(修改daemonize为yes，即默认以后台程序方式运行，效果同使用&amp;号强制后台运行)\n\tbind 192.168.43.163（绑定当前机器 IP）\n\tdir /usr/local/redis-cluster/9001/data/（数据文件存放位置）\n\tpidfile /var/run/redis_9001.pid（pid 9001和port要对应）\n\tcluster-enabled yes（启动集群模式）\n\tcluster-config-file nodes-9001.conf（9001和port要对应）\n\tcluster-node-timeout 15000\n\tappendonly yes(是否开启AOF，默认关闭no)\n\n\tPS:9002-9006同样修改，只是端口号不同，此处省略，可以将9001的redis.conf拷贝到所有目录，通过vi的:%s/9001/9002替换(此处9001替换为9002)，共四处修改\n\n\t[root@linxu bin]# cd /usr/local/redis-cluster/bin \n\t[root@linxu bin]# ./redis-server  ../9001/redis.conf  #启动六个节点\n\t[root@linxu bin]# ./redis-server  ../9002/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9003/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9004/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9005/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9006/redis.conf\n\t[root@linxu bin]# ps -ef|grep redis  #查看是否启动成功（成功有六个redis进程）\n\t[root@linxu bin]# cd  #返回根目录\n\t[root@linxu ~]# wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz #下载rubby，yum下载为2.0.0版本，redis支持版本需大于2.2.2，此处为官网下载\n\t[root@linxu ~]# tar zxvf ruby-2.5.0.tar.gz \n\t[root@linxu ~]# mv ruby-2.5.0 /usr/local/ruby/\n\t[root@linxu ~]# cd /usr/local/ruby/ruby-2.5.0\n\t[root@linxu ruby-2.5.0]# ./configure\n\t[root@linxu ruby-2.5.0]# make\n\t[root@linxu ruby-2.5.0]# make install\n\t[root@linxu ruby-2.5.0]# ruby -v   #查看版本\n\t[root@linxu ruby-2.5.0]# yum install rubygems  #安装rubygems\n\t[root@linxu ~]# gem install redis\n\n\tPS：此处如果先通过yum安装ruby版本低于2.2.2会报错，可以移除旧版本，再安装新版本,再安装rvm进行，步骤如下\n    [root@linxu ~]# yum install curl  #安装curl\n    [root@linxu ~]# curl -L get.rvm.io | bash -s stable \n    如果执行无法完成，替换为\\curl -sSL https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash\n    [root@linxu ~]#  source /etc/profile.d/rvm.sh\n    此时再执行[root@linxu ~]# gem install redis即可\n\n\t[root@linxu bin]# ./redis-trib.rb create --replicas 1 192.168.43.216:9001 192.168.43.216:9002 192.168.43.216:9003 192.168.43.216:9004 192.168.43.216:9005 192.168.43.216:9006  #搭建集群\n\t[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 9001  #验证\n\t192.168.43.216:9001> set name da\n\t>Redirected to slot [5798] located at 192.168.43.216:9002\n\tOK\n\n\tPS：此处需要加参数-c，否则不会自动跳转到分配的节点，会报错(error) MOVED 5798 192.168.43.216:9002\n\n2.不同机器搭建redis集群\n此处使用两台机器，通过单台机器一样的方法在每台机器各创建三个节点\n第一台  192.168.43.216 节点 10001 10002 10003\n第二台  192.168.43.163 节点 10004 10005 10006\n将六个节点全部启动  \n\n\t[root@linxu bin]# ./redis-server ../10001/redis.conf  #其他节点同样启动\n启动后创建集群  \n\n\t./redis-trib.rb  create  --replicas  1   192.168.43.163:10004 192.168.43.163:10005 192.168.43.163:10006 192.168.43.216:10001 192.168.43.216:10002 192.168.43.216:10003\n\t[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 10001  #验证\n\t192.168.43.216:10001> set a 1\n\t>Redirected to slot [15495] located at 192.168.43.163:10005\n\tOK","source":"_posts/P12.md","raw":"---\ntitle: \" Redis集群搭建\\t\\t\"\nid: 108\ncategories:\n  - Redis\ndate: 2018-01-26 14:36:50\ntags:\n---\n\nredis安装请参考：\n\nhttp://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/\n\n1.单台机器redis集群搭建  \n\t\n\t[root@linxu ~]# mkdir /usr/local/redis-cluster #创建集群目录\n\t[root@linxu ~]# cd /usr/local/redis-cluster    \n\t[root@linxu redis-cluster]# mkdir -p 9001/data 9002/data 9003/data 9004/data 9005/data 9006/data  #创建六个节点目录\n\t[root@linxu redis-cluster]# mkdir bin\n\t[root@linxu bin]# cd /usr/local/redis/redis-4.0.6/src   #redis安装目录下src\n\t[root@linxu src]# cp * /usr/local/redis-cluster/bin  #将redis安装目录src文件copy到bin中\n\t[root@linxu redis-4.0.6]# cd /usr/local/redis/redis-4.0.6   #redis安装目录\n\t[root@linxu redis-4.0.6]# cp * /usr/local/redis-cluster/9001   #其他9002-9006同样操作\n\t[root@linxu 9001]# cd /usr/local/redis-cluster/9001            #先修改9001，其他几台需要同样操作\n\t[root@linxu redis-4.0.6]# vi redis.conf                        #修改配置文件\n\tport 9001（每个节点的端口号）\n\tdaemonize yes(修改daemonize为yes，即默认以后台程序方式运行，效果同使用&amp;号强制后台运行)\n\tbind 192.168.43.163（绑定当前机器 IP）\n\tdir /usr/local/redis-cluster/9001/data/（数据文件存放位置）\n\tpidfile /var/run/redis_9001.pid（pid 9001和port要对应）\n\tcluster-enabled yes（启动集群模式）\n\tcluster-config-file nodes-9001.conf（9001和port要对应）\n\tcluster-node-timeout 15000\n\tappendonly yes(是否开启AOF，默认关闭no)\n\n\tPS:9002-9006同样修改，只是端口号不同，此处省略，可以将9001的redis.conf拷贝到所有目录，通过vi的:%s/9001/9002替换(此处9001替换为9002)，共四处修改\n\n\t[root@linxu bin]# cd /usr/local/redis-cluster/bin \n\t[root@linxu bin]# ./redis-server  ../9001/redis.conf  #启动六个节点\n\t[root@linxu bin]# ./redis-server  ../9002/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9003/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9004/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9005/redis.conf\n\t[root@linxu bin]# ./redis-server  ../9006/redis.conf\n\t[root@linxu bin]# ps -ef|grep redis  #查看是否启动成功（成功有六个redis进程）\n\t[root@linxu bin]# cd  #返回根目录\n\t[root@linxu ~]# wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz #下载rubby，yum下载为2.0.0版本，redis支持版本需大于2.2.2，此处为官网下载\n\t[root@linxu ~]# tar zxvf ruby-2.5.0.tar.gz \n\t[root@linxu ~]# mv ruby-2.5.0 /usr/local/ruby/\n\t[root@linxu ~]# cd /usr/local/ruby/ruby-2.5.0\n\t[root@linxu ruby-2.5.0]# ./configure\n\t[root@linxu ruby-2.5.0]# make\n\t[root@linxu ruby-2.5.0]# make install\n\t[root@linxu ruby-2.5.0]# ruby -v   #查看版本\n\t[root@linxu ruby-2.5.0]# yum install rubygems  #安装rubygems\n\t[root@linxu ~]# gem install redis\n\n\tPS：此处如果先通过yum安装ruby版本低于2.2.2会报错，可以移除旧版本，再安装新版本,再安装rvm进行，步骤如下\n    [root@linxu ~]# yum install curl  #安装curl\n    [root@linxu ~]# curl -L get.rvm.io | bash -s stable \n    如果执行无法完成，替换为\\curl -sSL https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash\n    [root@linxu ~]#  source /etc/profile.d/rvm.sh\n    此时再执行[root@linxu ~]# gem install redis即可\n\n\t[root@linxu bin]# ./redis-trib.rb create --replicas 1 192.168.43.216:9001 192.168.43.216:9002 192.168.43.216:9003 192.168.43.216:9004 192.168.43.216:9005 192.168.43.216:9006  #搭建集群\n\t[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 9001  #验证\n\t192.168.43.216:9001> set name da\n\t>Redirected to slot [5798] located at 192.168.43.216:9002\n\tOK\n\n\tPS：此处需要加参数-c，否则不会自动跳转到分配的节点，会报错(error) MOVED 5798 192.168.43.216:9002\n\n2.不同机器搭建redis集群\n此处使用两台机器，通过单台机器一样的方法在每台机器各创建三个节点\n第一台  192.168.43.216 节点 10001 10002 10003\n第二台  192.168.43.163 节点 10004 10005 10006\n将六个节点全部启动  \n\n\t[root@linxu bin]# ./redis-server ../10001/redis.conf  #其他节点同样启动\n启动后创建集群  \n\n\t./redis-trib.rb  create  --replicas  1   192.168.43.163:10004 192.168.43.163:10005 192.168.43.163:10006 192.168.43.216:10001 192.168.43.216:10002 192.168.43.216:10003\n\t[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 10001  #验证\n\t192.168.43.216:10001> set a 1\n\t>Redirected to slot [15495] located at 192.168.43.163:10005\n\tOK","slug":"P12","published":1,"updated":"2018-05-10T02:39:04.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtlw000b84gpozfwvurn","content":"<p>redis安装请参考：</p>\n<p><a href=\"http://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/\" target=\"_blank\" rel=\"noopener\">http://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/</a></p>\n<p>1.单台机器redis集群搭建  </p>\n<pre><code>[root@linxu ~]# mkdir /usr/local/redis-cluster #创建集群目录\n[root@linxu ~]# cd /usr/local/redis-cluster    \n[root@linxu redis-cluster]# mkdir -p 9001/data 9002/data 9003/data 9004/data 9005/data 9006/data  #创建六个节点目录\n[root@linxu redis-cluster]# mkdir bin\n[root@linxu bin]# cd /usr/local/redis/redis-4.0.6/src   #redis安装目录下src\n[root@linxu src]# cp * /usr/local/redis-cluster/bin  #将redis安装目录src文件copy到bin中\n[root@linxu redis-4.0.6]# cd /usr/local/redis/redis-4.0.6   #redis安装目录\n[root@linxu redis-4.0.6]# cp * /usr/local/redis-cluster/9001   #其他9002-9006同样操作\n[root@linxu 9001]# cd /usr/local/redis-cluster/9001            #先修改9001，其他几台需要同样操作\n[root@linxu redis-4.0.6]# vi redis.conf                        #修改配置文件\nport 9001（每个节点的端口号）\ndaemonize yes(修改daemonize为yes，即默认以后台程序方式运行，效果同使用&amp;amp;号强制后台运行)\nbind 192.168.43.163（绑定当前机器 IP）\ndir /usr/local/redis-cluster/9001/data/（数据文件存放位置）\npidfile /var/run/redis_9001.pid（pid 9001和port要对应）\ncluster-enabled yes（启动集群模式）\ncluster-config-file nodes-9001.conf（9001和port要对应）\ncluster-node-timeout 15000\nappendonly yes(是否开启AOF，默认关闭no)\n\nPS:9002-9006同样修改，只是端口号不同，此处省略，可以将9001的redis.conf拷贝到所有目录，通过vi的:%s/9001/9002替换(此处9001替换为9002)，共四处修改\n\n[root@linxu bin]# cd /usr/local/redis-cluster/bin \n[root@linxu bin]# ./redis-server  ../9001/redis.conf  #启动六个节点\n[root@linxu bin]# ./redis-server  ../9002/redis.conf\n[root@linxu bin]# ./redis-server  ../9003/redis.conf\n[root@linxu bin]# ./redis-server  ../9004/redis.conf\n[root@linxu bin]# ./redis-server  ../9005/redis.conf\n[root@linxu bin]# ./redis-server  ../9006/redis.conf\n[root@linxu bin]# ps -ef|grep redis  #查看是否启动成功（成功有六个redis进程）\n[root@linxu bin]# cd  #返回根目录\n[root@linxu ~]# wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz #下载rubby，yum下载为2.0.0版本，redis支持版本需大于2.2.2，此处为官网下载\n[root@linxu ~]# tar zxvf ruby-2.5.0.tar.gz \n[root@linxu ~]# mv ruby-2.5.0 /usr/local/ruby/\n[root@linxu ~]# cd /usr/local/ruby/ruby-2.5.0\n[root@linxu ruby-2.5.0]# ./configure\n[root@linxu ruby-2.5.0]# make\n[root@linxu ruby-2.5.0]# make install\n[root@linxu ruby-2.5.0]# ruby -v   #查看版本\n[root@linxu ruby-2.5.0]# yum install rubygems  #安装rubygems\n[root@linxu ~]# gem install redis\n\nPS：此处如果先通过yum安装ruby版本低于2.2.2会报错，可以移除旧版本，再安装新版本,再安装rvm进行，步骤如下\n[root@linxu ~]# yum install curl  #安装curl\n[root@linxu ~]# curl -L get.rvm.io | bash -s stable \n如果执行无法完成，替换为\\curl -sSL https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash\n[root@linxu ~]#  source /etc/profile.d/rvm.sh\n此时再执行[root@linxu ~]# gem install redis即可\n\n[root@linxu bin]# ./redis-trib.rb create --replicas 1 192.168.43.216:9001 192.168.43.216:9002 192.168.43.216:9003 192.168.43.216:9004 192.168.43.216:9005 192.168.43.216:9006  #搭建集群\n[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 9001  #验证\n192.168.43.216:9001&gt; set name da\n&gt;Redirected to slot [5798] located at 192.168.43.216:9002\nOK\n\nPS：此处需要加参数-c，否则不会自动跳转到分配的节点，会报错(error) MOVED 5798 192.168.43.216:9002\n</code></pre><p>2.不同机器搭建redis集群<br>此处使用两台机器，通过单台机器一样的方法在每台机器各创建三个节点<br>第一台  192.168.43.216 节点 10001 10002 10003<br>第二台  192.168.43.163 节点 10004 10005 10006<br>将六个节点全部启动  </p>\n<pre><code>[root@linxu bin]# ./redis-server ../10001/redis.conf  #其他节点同样启动\n</code></pre><p>启动后创建集群  </p>\n<pre><code>./redis-trib.rb  create  --replicas  1   192.168.43.163:10004 192.168.43.163:10005 192.168.43.163:10006 192.168.43.216:10001 192.168.43.216:10002 192.168.43.216:10003\n[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 10001  #验证\n192.168.43.216:10001&gt; set a 1\n&gt;Redirected to slot [15495] located at 192.168.43.163:10005\nOK\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>redis安装请参考：</p>\n<p><a href=\"http://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/\" target=\"_blank\" rel=\"noopener\">http://www.reallinxu.com/2018/01/24/redis%E5%85%A5%E9%97%A8/</a></p>\n<p>1.单台机器redis集群搭建  </p>\n<pre><code>[root@linxu ~]# mkdir /usr/local/redis-cluster #创建集群目录\n[root@linxu ~]# cd /usr/local/redis-cluster    \n[root@linxu redis-cluster]# mkdir -p 9001/data 9002/data 9003/data 9004/data 9005/data 9006/data  #创建六个节点目录\n[root@linxu redis-cluster]# mkdir bin\n[root@linxu bin]# cd /usr/local/redis/redis-4.0.6/src   #redis安装目录下src\n[root@linxu src]# cp * /usr/local/redis-cluster/bin  #将redis安装目录src文件copy到bin中\n[root@linxu redis-4.0.6]# cd /usr/local/redis/redis-4.0.6   #redis安装目录\n[root@linxu redis-4.0.6]# cp * /usr/local/redis-cluster/9001   #其他9002-9006同样操作\n[root@linxu 9001]# cd /usr/local/redis-cluster/9001            #先修改9001，其他几台需要同样操作\n[root@linxu redis-4.0.6]# vi redis.conf                        #修改配置文件\nport 9001（每个节点的端口号）\ndaemonize yes(修改daemonize为yes，即默认以后台程序方式运行，效果同使用&amp;amp;号强制后台运行)\nbind 192.168.43.163（绑定当前机器 IP）\ndir /usr/local/redis-cluster/9001/data/（数据文件存放位置）\npidfile /var/run/redis_9001.pid（pid 9001和port要对应）\ncluster-enabled yes（启动集群模式）\ncluster-config-file nodes-9001.conf（9001和port要对应）\ncluster-node-timeout 15000\nappendonly yes(是否开启AOF，默认关闭no)\n\nPS:9002-9006同样修改，只是端口号不同，此处省略，可以将9001的redis.conf拷贝到所有目录，通过vi的:%s/9001/9002替换(此处9001替换为9002)，共四处修改\n\n[root@linxu bin]# cd /usr/local/redis-cluster/bin \n[root@linxu bin]# ./redis-server  ../9001/redis.conf  #启动六个节点\n[root@linxu bin]# ./redis-server  ../9002/redis.conf\n[root@linxu bin]# ./redis-server  ../9003/redis.conf\n[root@linxu bin]# ./redis-server  ../9004/redis.conf\n[root@linxu bin]# ./redis-server  ../9005/redis.conf\n[root@linxu bin]# ./redis-server  ../9006/redis.conf\n[root@linxu bin]# ps -ef|grep redis  #查看是否启动成功（成功有六个redis进程）\n[root@linxu bin]# cd  #返回根目录\n[root@linxu ~]# wget https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.0.tar.gz #下载rubby，yum下载为2.0.0版本，redis支持版本需大于2.2.2，此处为官网下载\n[root@linxu ~]# tar zxvf ruby-2.5.0.tar.gz \n[root@linxu ~]# mv ruby-2.5.0 /usr/local/ruby/\n[root@linxu ~]# cd /usr/local/ruby/ruby-2.5.0\n[root@linxu ruby-2.5.0]# ./configure\n[root@linxu ruby-2.5.0]# make\n[root@linxu ruby-2.5.0]# make install\n[root@linxu ruby-2.5.0]# ruby -v   #查看版本\n[root@linxu ruby-2.5.0]# yum install rubygems  #安装rubygems\n[root@linxu ~]# gem install redis\n\nPS：此处如果先通过yum安装ruby版本低于2.2.2会报错，可以移除旧版本，再安装新版本,再安装rvm进行，步骤如下\n[root@linxu ~]# yum install curl  #安装curl\n[root@linxu ~]# curl -L get.rvm.io | bash -s stable \n如果执行无法完成，替换为\\curl -sSL https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash\n[root@linxu ~]#  source /etc/profile.d/rvm.sh\n此时再执行[root@linxu ~]# gem install redis即可\n\n[root@linxu bin]# ./redis-trib.rb create --replicas 1 192.168.43.216:9001 192.168.43.216:9002 192.168.43.216:9003 192.168.43.216:9004 192.168.43.216:9005 192.168.43.216:9006  #搭建集群\n[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 9001  #验证\n192.168.43.216:9001&gt; set name da\n&gt;Redirected to slot [5798] located at 192.168.43.216:9002\nOK\n\nPS：此处需要加参数-c，否则不会自动跳转到分配的节点，会报错(error) MOVED 5798 192.168.43.216:9002\n</code></pre><p>2.不同机器搭建redis集群<br>此处使用两台机器，通过单台机器一样的方法在每台机器各创建三个节点<br>第一台  192.168.43.216 节点 10001 10002 10003<br>第二台  192.168.43.163 节点 10004 10005 10006<br>将六个节点全部启动  </p>\n<pre><code>[root@linxu bin]# ./redis-server ../10001/redis.conf  #其他节点同样启动\n</code></pre><p>启动后创建集群  </p>\n<pre><code>./redis-trib.rb  create  --replicas  1   192.168.43.163:10004 192.168.43.163:10005 192.168.43.163:10006 192.168.43.216:10001 192.168.43.216:10002 192.168.43.216:10003\n[root@linxu bin]# ./redis-cli  -c -h 192.168.43.216 -p 10001  #验证\n192.168.43.216:10001&gt; set a 1\n&gt;Redirected to slot [15495] located at 192.168.43.163:10005\nOK\n</code></pre>"},{"title":" redis入门\t\t","id":"102","date":"2018-01-24T10:53:33.000Z","_content":"\n# 安装redis #\n\t[root@linxu ~]# wget http://download.redis.io/releases/redis-4.0.6.tar.gz\n\t[root@linxu ~]# tar xzf redis-4.0.6.tar.gz \n\t[root@linxu ~]# mkdir /usr/local/redis\n\t[root@linxu ~]# mv redis-4.0.6 /usr/local/redis\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6  \n\t[root@linxu redis-4.0.6]# make\n\t[root@linxu redis]# cd src\n\t[root@linxu src]# ./redis-server  #运行 \n\t[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n# 测试redis #\n\t第一个窗口:\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n\t[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n\t第二个窗口:\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n\t[root@linxu src]# ./redis-cli\n\t127.0.0.1:6379>set test hahaah  \n\tOK\n\t127.0.0.1:6379>get test\n\t\"hahaah\"\n\n# 利用jedis测试java连接redis #\n\t//pom.xml中添加\n\t<dependency>\n    \t<groupId>redis.clients<groupId>\n    \t<artifactId>jedis<artifactId>\n    \t<version&gt;2.9.0<version>\n\t<dependency>\n测试代码：\n\tpackage com.redis.demo;\n\n\timport redis.clients.jedis.Jedis;\n\n\tpublic class TestRedis {\n    \tpublic static void main(String[] args) {\n        \t//连接本地的 Redis 服务\n        \tJedis jedis = new Jedis(\"192.168.43.163\",6379);\n        \tSystem.out.println(\"连接成功\");\n        \t//查看服务是否运行\n        \tSystem.out.println(\"服务正在运行: \"+jedis.ping());\n    \t}\n\t}\n运行时报异常：  \n\n\tException in thread \"main\" redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command 'CONFIG SET protected-mode no' from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to 'no', and then restarting the server. 3) If you started the server manually just for testing, restart it with the '--protected-mode no' option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.\n此时需要修改配置文件redis.conf，修改如下\n\t1.注释掉bind\n\t#bind 127.0.0.1\n\t2.protected-mode yes\n\t改为\n\tprotected-mode no\n\t重新启动redis即可\n","source":"_posts/P11.md","raw":"---\ntitle: \" redis入门\\t\\t\"\nid: 102\ncategories:\n  - Redis\ndate: 2018-01-24 18:53:33\ntags:\n---\n\n# 安装redis #\n\t[root@linxu ~]# wget http://download.redis.io/releases/redis-4.0.6.tar.gz\n\t[root@linxu ~]# tar xzf redis-4.0.6.tar.gz \n\t[root@linxu ~]# mkdir /usr/local/redis\n\t[root@linxu ~]# mv redis-4.0.6 /usr/local/redis\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6  \n\t[root@linxu redis-4.0.6]# make\n\t[root@linxu redis]# cd src\n\t[root@linxu src]# ./redis-server  #运行 \n\t[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n# 测试redis #\n\t第一个窗口:\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n\t[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n\t第二个窗口:\n\t[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n\t[root@linxu src]# ./redis-cli\n\t127.0.0.1:6379>set test hahaah  \n\tOK\n\t127.0.0.1:6379>get test\n\t\"hahaah\"\n\n# 利用jedis测试java连接redis #\n\t//pom.xml中添加\n\t<dependency>\n    \t<groupId>redis.clients<groupId>\n    \t<artifactId>jedis<artifactId>\n    \t<version&gt;2.9.0<version>\n\t<dependency>\n测试代码：\n\tpackage com.redis.demo;\n\n\timport redis.clients.jedis.Jedis;\n\n\tpublic class TestRedis {\n    \tpublic static void main(String[] args) {\n        \t//连接本地的 Redis 服务\n        \tJedis jedis = new Jedis(\"192.168.43.163\",6379);\n        \tSystem.out.println(\"连接成功\");\n        \t//查看服务是否运行\n        \tSystem.out.println(\"服务正在运行: \"+jedis.ping());\n    \t}\n\t}\n运行时报异常：  \n\n\tException in thread \"main\" redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command 'CONFIG SET protected-mode no' from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to 'no', and then restarting the server. 3) If you started the server manually just for testing, restart it with the '--protected-mode no' option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.\n此时需要修改配置文件redis.conf，修改如下\n\t1.注释掉bind\n\t#bind 127.0.0.1\n\t2.protected-mode yes\n\t改为\n\tprotected-mode no\n\t重新启动redis即可\n","slug":"P11","published":1,"updated":"2018-05-10T02:35:13.578Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtlz000f84gp550etvl7","content":"<h1 id=\"安装redis\"><a href=\"#安装redis\" class=\"headerlink\" title=\"安装redis\"></a>安装redis</h1><pre><code>[root@linxu ~]# wget http://download.redis.io/releases/redis-4.0.6.tar.gz\n[root@linxu ~]# tar xzf redis-4.0.6.tar.gz \n[root@linxu ~]# mkdir /usr/local/redis\n[root@linxu ~]# mv redis-4.0.6 /usr/local/redis\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6  \n[root@linxu redis-4.0.6]# make\n[root@linxu redis]# cd src\n[root@linxu src]# ./redis-server  #运行 \n[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n</code></pre><h1 id=\"测试redis\"><a href=\"#测试redis\" class=\"headerlink\" title=\"测试redis\"></a>测试redis</h1><pre><code>第一个窗口:\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n第二个窗口:\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n[root@linxu src]# ./redis-cli\n127.0.0.1:6379&gt;set test hahaah  \nOK\n127.0.0.1:6379&gt;get test\n&quot;hahaah&quot;\n</code></pre><h1 id=\"利用jedis测试java连接redis\"><a href=\"#利用jedis测试java连接redis\" class=\"headerlink\" title=\"利用jedis测试java连接redis\"></a>利用jedis测试java连接redis</h1><pre><code>//pom.xml中添加\n&lt;dependency&gt;\n    &lt;groupId&gt;redis.clients&lt;groupId&gt;\n    &lt;artifactId&gt;jedis&lt;artifactId&gt;\n    &lt;version&amp;gt;2.9.0&lt;version&gt;\n&lt;dependency&gt;\n</code></pre><p>测试代码：<br>    package com.redis.demo;</p>\n<pre><code>import redis.clients.jedis.Jedis;\n\npublic class TestRedis {\n    public static void main(String[] args) {\n        //连接本地的 Redis 服务\n        Jedis jedis = new Jedis(&quot;192.168.43.163&quot;,6379);\n        System.out.println(&quot;连接成功&quot;);\n        //查看服务是否运行\n        System.out.println(&quot;服务正在运行: &quot;+jedis.ping());\n    }\n}\n</code></pre><p>运行时报异常：  </p>\n<pre><code>Exception in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command &apos;CONFIG SET protected-mode no&apos; from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to &apos;no&apos;, and then restarting the server. 3) If you started the server manually just for testing, restart it with the &apos;--protected-mode no&apos; option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.\n</code></pre><p>此时需要修改配置文件redis.conf，修改如下<br>    1.注释掉bind</p>\n<pre><code>#bind 127.0.0.1\n2.protected-mode yes\n改为\nprotected-mode no\n重新启动redis即可\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"安装redis\"><a href=\"#安装redis\" class=\"headerlink\" title=\"安装redis\"></a>安装redis</h1><pre><code>[root@linxu ~]# wget http://download.redis.io/releases/redis-4.0.6.tar.gz\n[root@linxu ~]# tar xzf redis-4.0.6.tar.gz \n[root@linxu ~]# mkdir /usr/local/redis\n[root@linxu ~]# mv redis-4.0.6 /usr/local/redis\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6  \n[root@linxu redis-4.0.6]# make\n[root@linxu redis]# cd src\n[root@linxu src]# ./redis-server  #运行 \n[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n</code></pre><h1 id=\"测试redis\"><a href=\"#测试redis\" class=\"headerlink\" title=\"测试redis\"></a>测试redis</h1><pre><code>第一个窗口:\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n[root@linxu src]# ./redis-server redis.conf  #使用指定配置文件运行\n第二个窗口:\n[root@linxu ~]# cd /usr/local/redis/redis-4.0.6/src\n[root@linxu src]# ./redis-cli\n127.0.0.1:6379&gt;set test hahaah  \nOK\n127.0.0.1:6379&gt;get test\n&quot;hahaah&quot;\n</code></pre><h1 id=\"利用jedis测试java连接redis\"><a href=\"#利用jedis测试java连接redis\" class=\"headerlink\" title=\"利用jedis测试java连接redis\"></a>利用jedis测试java连接redis</h1><pre><code>//pom.xml中添加\n&lt;dependency&gt;\n    &lt;groupId&gt;redis.clients&lt;groupId&gt;\n    &lt;artifactId&gt;jedis&lt;artifactId&gt;\n    &lt;version&amp;gt;2.9.0&lt;version&gt;\n&lt;dependency&gt;\n</code></pre><p>测试代码：<br>    package com.redis.demo;</p>\n<pre><code>import redis.clients.jedis.Jedis;\n\npublic class TestRedis {\n    public static void main(String[] args) {\n        //连接本地的 Redis 服务\n        Jedis jedis = new Jedis(&quot;192.168.43.163&quot;,6379);\n        System.out.println(&quot;连接成功&quot;);\n        //查看服务是否运行\n        System.out.println(&quot;服务正在运行: &quot;+jedis.ping());\n    }\n}\n</code></pre><p>运行时报异常：  </p>\n<pre><code>Exception in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command &apos;CONFIG SET protected-mode no&apos; from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to &apos;no&apos;, and then restarting the server. 3) If you started the server manually just for testing, restart it with the &apos;--protected-mode no&apos; option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.\n</code></pre><p>此时需要修改配置文件redis.conf，修改如下<br>    1.注释掉bind</p>\n<pre><code>#bind 127.0.0.1\n2.protected-mode yes\n改为\nprotected-mode no\n重新启动redis即可\n</code></pre>"},{"title":" java8初识\t\t","id":"156","date":"2018-03-13T01:19:22.000Z","_content":"\n1. 接口里允许使用default关键字，为接口声明添加非抽象的方法实现。这个特性又被称为扩展方法。默认方法可以直接使用。默认方法无法在lambda表达式内部被访问。(test1)\n\n2. 一个所谓的函数式接口必须要有且仅有一个抽象方法声明。每个与之对应的lambda表达式必须要与抽象方法的声明相匹配。由于默认方法不是抽象的，因此你可以在你的函数式接口里任意添加默认方法。(test1)\n\n3. Java8允许你通过::关键字获取方法或者构造函数的的引用。(test1)\n\n4. 我们通过Person::new来创建一个Person类构造函数的引用。Java编译器会自动地选择合适的构造函数来匹配PersonFactory.create函数的签名，并选择正确的构造函数形式。(test2)\n\n5. lambda表达式可以访问外部的final局部变量，变量并不需要一定是final，然而，在编译的时候被隐式地当做final变量来处理。(test2,test3)\n\n6. lambda表达式可以访问全部变量。(test3)\n\n7. 当一个函数不修改数据流的底层数据源，它就是无干扰的。即没有任何lambda表达式通过添加或删除修改元素。(test4)\n\n8. 当一个函数的操作的执行是确定性的，它就是无状态的。即在上面的例子中，没有任何lambda表达式依赖于外部作用域中任何在操作过程中可变的变量或状态。(test4)\n\n9. 数据流基础操作。(test5)\n\n10. 数据流衔接操作只在终止操作调用时被执行。(test6)\n\n11. 衔接操作是垂直进行的，数据流执行顺序研究.(test6)\n\n12. Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了.(test7)\n\n13. 要克服第10点这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作。(test7)\n\n14. Executors类提供了便利的工厂方法来创建不同类型的 executor services。Executors必须显式的停止。(test8)\n\n15. executor 可以返回一个Future类型的结果，它可以用来在稍后某个时间取出实际的结果。(test9)\n\nPS:括号内为测试代码，代码地址：https://github.com/reallinxu/java8Test","source":"_posts/P10.md","raw":"---\ntitle: \" java8初识\\t\\t\"\nid: 156\ncategories:\n  - 杂项\ndate: 2018-03-13 09:19:22\ntags:\n---\n\n1. 接口里允许使用default关键字，为接口声明添加非抽象的方法实现。这个特性又被称为扩展方法。默认方法可以直接使用。默认方法无法在lambda表达式内部被访问。(test1)\n\n2. 一个所谓的函数式接口必须要有且仅有一个抽象方法声明。每个与之对应的lambda表达式必须要与抽象方法的声明相匹配。由于默认方法不是抽象的，因此你可以在你的函数式接口里任意添加默认方法。(test1)\n\n3. Java8允许你通过::关键字获取方法或者构造函数的的引用。(test1)\n\n4. 我们通过Person::new来创建一个Person类构造函数的引用。Java编译器会自动地选择合适的构造函数来匹配PersonFactory.create函数的签名，并选择正确的构造函数形式。(test2)\n\n5. lambda表达式可以访问外部的final局部变量，变量并不需要一定是final，然而，在编译的时候被隐式地当做final变量来处理。(test2,test3)\n\n6. lambda表达式可以访问全部变量。(test3)\n\n7. 当一个函数不修改数据流的底层数据源，它就是无干扰的。即没有任何lambda表达式通过添加或删除修改元素。(test4)\n\n8. 当一个函数的操作的执行是确定性的，它就是无状态的。即在上面的例子中，没有任何lambda表达式依赖于外部作用域中任何在操作过程中可变的变量或状态。(test4)\n\n9. 数据流基础操作。(test5)\n\n10. 数据流衔接操作只在终止操作调用时被执行。(test6)\n\n11. 衔接操作是垂直进行的，数据流执行顺序研究.(test6)\n\n12. Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了.(test7)\n\n13. 要克服第10点这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作。(test7)\n\n14. Executors类提供了便利的工厂方法来创建不同类型的 executor services。Executors必须显式的停止。(test8)\n\n15. executor 可以返回一个Future类型的结果，它可以用来在稍后某个时间取出实际的结果。(test9)\n\nPS:括号内为测试代码，代码地址：https://github.com/reallinxu/java8Test","slug":"P10","published":1,"updated":"2018-05-10T02:45:56.173Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtm1000h84gp3ynhsb7z","content":"<ol>\n<li><p>接口里允许使用default关键字，为接口声明添加非抽象的方法实现。这个特性又被称为扩展方法。默认方法可以直接使用。默认方法无法在lambda表达式内部被访问。(test1)</p>\n</li>\n<li><p>一个所谓的函数式接口必须要有且仅有一个抽象方法声明。每个与之对应的lambda表达式必须要与抽象方法的声明相匹配。由于默认方法不是抽象的，因此你可以在你的函数式接口里任意添加默认方法。(test1)</p>\n</li>\n<li><p>Java8允许你通过::关键字获取方法或者构造函数的的引用。(test1)</p>\n</li>\n<li><p>我们通过Person::new来创建一个Person类构造函数的引用。Java编译器会自动地选择合适的构造函数来匹配PersonFactory.create函数的签名，并选择正确的构造函数形式。(test2)</p>\n</li>\n<li><p>lambda表达式可以访问外部的final局部变量，变量并不需要一定是final，然而，在编译的时候被隐式地当做final变量来处理。(test2,test3)</p>\n</li>\n<li><p>lambda表达式可以访问全部变量。(test3)</p>\n</li>\n<li><p>当一个函数不修改数据流的底层数据源，它就是无干扰的。即没有任何lambda表达式通过添加或删除修改元素。(test4)</p>\n</li>\n<li><p>当一个函数的操作的执行是确定性的，它就是无状态的。即在上面的例子中，没有任何lambda表达式依赖于外部作用域中任何在操作过程中可变的变量或状态。(test4)</p>\n</li>\n<li><p>数据流基础操作。(test5)</p>\n</li>\n<li><p>数据流衔接操作只在终止操作调用时被执行。(test6)</p>\n</li>\n<li><p>衔接操作是垂直进行的，数据流执行顺序研究.(test6)</p>\n</li>\n<li><p>Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了.(test7)</p>\n</li>\n<li><p>要克服第10点这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作。(test7)</p>\n</li>\n<li><p>Executors类提供了便利的工厂方法来创建不同类型的 executor services。Executors必须显式的停止。(test8)</p>\n</li>\n<li><p>executor 可以返回一个Future类型的结果，它可以用来在稍后某个时间取出实际的结果。(test9)</p>\n</li>\n</ol>\n<p>PS:括号内为测试代码，代码地址：<a href=\"https://github.com/reallinxu/java8Test\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/java8Test</a></p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li><p>接口里允许使用default关键字，为接口声明添加非抽象的方法实现。这个特性又被称为扩展方法。默认方法可以直接使用。默认方法无法在lambda表达式内部被访问。(test1)</p>\n</li>\n<li><p>一个所谓的函数式接口必须要有且仅有一个抽象方法声明。每个与之对应的lambda表达式必须要与抽象方法的声明相匹配。由于默认方法不是抽象的，因此你可以在你的函数式接口里任意添加默认方法。(test1)</p>\n</li>\n<li><p>Java8允许你通过::关键字获取方法或者构造函数的的引用。(test1)</p>\n</li>\n<li><p>我们通过Person::new来创建一个Person类构造函数的引用。Java编译器会自动地选择合适的构造函数来匹配PersonFactory.create函数的签名，并选择正确的构造函数形式。(test2)</p>\n</li>\n<li><p>lambda表达式可以访问外部的final局部变量，变量并不需要一定是final，然而，在编译的时候被隐式地当做final变量来处理。(test2,test3)</p>\n</li>\n<li><p>lambda表达式可以访问全部变量。(test3)</p>\n</li>\n<li><p>当一个函数不修改数据流的底层数据源，它就是无干扰的。即没有任何lambda表达式通过添加或删除修改元素。(test4)</p>\n</li>\n<li><p>当一个函数的操作的执行是确定性的，它就是无状态的。即在上面的例子中，没有任何lambda表达式依赖于外部作用域中任何在操作过程中可变的变量或状态。(test4)</p>\n</li>\n<li><p>数据流基础操作。(test5)</p>\n</li>\n<li><p>数据流衔接操作只在终止操作调用时被执行。(test6)</p>\n</li>\n<li><p>衔接操作是垂直进行的，数据流执行顺序研究.(test6)</p>\n</li>\n<li><p>Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了.(test7)</p>\n</li>\n<li><p>要克服第10点这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作。(test7)</p>\n</li>\n<li><p>Executors类提供了便利的工厂方法来创建不同类型的 executor services。Executors必须显式的停止。(test8)</p>\n</li>\n<li><p>executor 可以返回一个Future类型的结果，它可以用来在稍后某个时间取出实际的结果。(test9)</p>\n</li>\n</ol>\n<p>PS:括号内为测试代码，代码地址：<a href=\"https://github.com/reallinxu/java8Test\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/java8Test</a></p>\n"},{"title":" Spring-batch restart重拉机制\t\t","id":"64","date":"2017-12-22T06:27:28.000Z","_content":"\n对于Spring-batch中的Reader-processor-writer模式，例如   \n\n\t<batch:step id=\"test-01\">\n\t\t<batch:tasklet>\n\t\t\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"1\">\n\t\t\t\t<batch:writer>\n\t\t\t\t\t<bean class=\"com.test.TestW\">\n\t\t\t\t<batch:writer>\n\t\t\t<batch:chunk>\n\t\t<batch:tasklet>\n\t<batch:step>\n如果reader读取为两条数据，第二条数据异常断批，由于commint-interval为1，第一条会执行processor和writer，且成功commit，第二条Processor会回滚，writer不会执行。当restart时，会从第二条数据重新处理，第一条已处理不会再重复处理。\n\n如果此时将  \n\n\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"1\">\n改为  \n\n\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"2\">\n这时，reader读取两条数据，第二条数据异常断批，则两条数据都会回滚掉，restart时会重新执行。\n\n以上，目前已验证Reader-processor-writer模式重拉不会导致数据重复处理。","source":"_posts/P13.md","raw":"---\ntitle: \" Spring-batch restart重拉机制\\t\\t\"\nid: 64\ncategories:\n  - Spring-batch\ndate: 2017-12-22 14:27:28\ntags:\n---\n\n对于Spring-batch中的Reader-processor-writer模式，例如   \n\n\t<batch:step id=\"test-01\">\n\t\t<batch:tasklet>\n\t\t\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"1\">\n\t\t\t\t<batch:writer>\n\t\t\t\t\t<bean class=\"com.test.TestW\">\n\t\t\t\t<batch:writer>\n\t\t\t<batch:chunk>\n\t\t<batch:tasklet>\n\t<batch:step>\n如果reader读取为两条数据，第二条数据异常断批，由于commint-interval为1，第一条会执行processor和writer，且成功commit，第二条Processor会回滚，writer不会执行。当restart时，会从第二条数据重新处理，第一条已处理不会再重复处理。\n\n如果此时将  \n\n\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"1\">\n改为  \n\n\t<batch:chunk reader=\"testR\" processor=\"testP\" commit-interval=\"2\">\n这时，reader读取两条数据，第二条数据异常断批，则两条数据都会回滚掉，restart时会重新执行。\n\n以上，目前已验证Reader-processor-writer模式重拉不会导致数据重复处理。","slug":"P13","published":1,"updated":"2018-05-10T02:41:08.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtm4000l84gp91b8zg7m","content":"<p>对于Spring-batch中的Reader-processor-writer模式，例如   </p>\n<pre><code>&lt;batch:step id=&quot;test-01&quot;&gt;\n    &lt;batch:tasklet&gt;\n        &lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;1&quot;&gt;\n            &lt;batch:writer&gt;\n                &lt;bean class=&quot;com.test.TestW&quot;&gt;\n            &lt;batch:writer&gt;\n        &lt;batch:chunk&gt;\n    &lt;batch:tasklet&gt;\n&lt;batch:step&gt;\n</code></pre><p>如果reader读取为两条数据，第二条数据异常断批，由于commint-interval为1，第一条会执行processor和writer，且成功commit，第二条Processor会回滚，writer不会执行。当restart时，会从第二条数据重新处理，第一条已处理不会再重复处理。</p>\n<p>如果此时将  </p>\n<pre><code>&lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;1&quot;&gt;\n</code></pre><p>改为  </p>\n<pre><code>&lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;2&quot;&gt;\n</code></pre><p>这时，reader读取两条数据，第二条数据异常断批，则两条数据都会回滚掉，restart时会重新执行。</p>\n<p>以上，目前已验证Reader-processor-writer模式重拉不会导致数据重复处理。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>对于Spring-batch中的Reader-processor-writer模式，例如   </p>\n<pre><code>&lt;batch:step id=&quot;test-01&quot;&gt;\n    &lt;batch:tasklet&gt;\n        &lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;1&quot;&gt;\n            &lt;batch:writer&gt;\n                &lt;bean class=&quot;com.test.TestW&quot;&gt;\n            &lt;batch:writer&gt;\n        &lt;batch:chunk&gt;\n    &lt;batch:tasklet&gt;\n&lt;batch:step&gt;\n</code></pre><p>如果reader读取为两条数据，第二条数据异常断批，由于commint-interval为1，第一条会执行processor和writer，且成功commit，第二条Processor会回滚，writer不会执行。当restart时，会从第二条数据重新处理，第一条已处理不会再重复处理。</p>\n<p>如果此时将  </p>\n<pre><code>&lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;1&quot;&gt;\n</code></pre><p>改为  </p>\n<pre><code>&lt;batch:chunk reader=&quot;testR&quot; processor=&quot;testP&quot; commit-interval=&quot;2&quot;&gt;\n</code></pre><p>这时，reader读取两条数据，第二条数据异常断批，则两条数据都会回滚掉，restart时会重新执行。</p>\n<p>以上，目前已验证Reader-processor-writer模式重拉不会导致数据重复处理。</p>\n"},{"title":" WordPress从Apache迁移到nginx\t\t","id":"130","date":"2018-01-29T07:02:48.000Z","_content":"\n1.停掉httpd当前服务，禁用重启  \n\n\tservice httpd stop\n\t#开机重启后，apache服务不再启动p \n\tchkconfig httpd off\n2.安装nginx  \n\n\tyum -y install nginx\n3.安装php-fpm  \n\n\tyum install php-fpm\n\t/etc/init.d/php-fpm start  #该目录下没有执行文件，采用直接下一步设置开机自启\n\tchkconfig php-fpm on\n4.编辑nginx配置文件  \n\n\tvi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n\t#转发给wordpress网站\n\tserver {\n    \tlisten 80;\n    \tserver_name www.reallinxu.com;        \n    \taccess_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    \terror_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n\n    \tlocation / {\n             root /data/www/www.reallinxu.com;\n             index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n             try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    \t}\n\n    \terror_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    \tlocation = /404.html {            #这是一个典型的location\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \terror_page 500 502 503 504 /50x.html;\n    \tlocation = /50x.html {\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \t# 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    \tlocation ~ [^/]\\.php(/|$) {\n             root /data/www/www.reallinxu.com;\n             fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n             if (!-f $document_root$fastcgi_script_name) {\n                     return 404;\n             }\n             #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n             # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n             fastcgi_pass 127.0.0.1:9000;\n             fastcgi_index index.php;\n             fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n             include fastcgi_params;\n    \t}\n    \tlocation ~ /\\.ht {\n             deny all;\n    \t}\n\n    \trewrite /wp-admin$ $scheme://$host$uri/ permanent;\n \t}\n\n5.新建日志目录并赋权限  \n\n\tmkdir -p /var/log/nginx/aaa\n\tchown -R nginx:adm /var/log/nginx/aaa\n6.安装最新的php-mysql  \n\n\tyum update\n\tyum install php-mysql\n7.启动nginx  \n\n\tservice nginx start\n8.此时访问可能会出现数据库错误  \n\n\tvi wp-config.php\n\t#修改以下部分\n\tdefine( 'WP_DEBUG', true );\n再进行访问时，会出现具体错误，此时发现是数据库连接错误，本人是需要修改配置文件如下  \n\n\tdefine( 'DB_HOST', '127.0.0.1' );   #原为localhost\n9.修改线程数，优化内存  \n\n\tvi /etc/php-fpm.d/www.conf   #修改如下\n\t最大线程数\n\tpm.max_children = 3\n\t初始线程数\n\tpm.start_servers = 1\n\t最小空余线程数\n\tpm.min_spare_servers = 1\n\t最大空余线程数\n\tpm.max_spare_servers = 1\n\tphp_admin内存最大限制\n\tphp_admin_value[memory_limit] = 128M\n","source":"_posts/P15.md","raw":"---\ntitle: \" WordPress从Apache迁移到nginx\\t\\t\"\nid: 130\ncategories:\n  - WordPress\ndate: 2018-01-29 15:02:48\ntags:\n---\n\n1.停掉httpd当前服务，禁用重启  \n\n\tservice httpd stop\n\t#开机重启后，apache服务不再启动p \n\tchkconfig httpd off\n2.安装nginx  \n\n\tyum -y install nginx\n3.安装php-fpm  \n\n\tyum install php-fpm\n\t/etc/init.d/php-fpm start  #该目录下没有执行文件，采用直接下一步设置开机自启\n\tchkconfig php-fpm on\n4.编辑nginx配置文件  \n\n\tvi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n\t#转发给wordpress网站\n\tserver {\n    \tlisten 80;\n    \tserver_name www.reallinxu.com;        \n    \taccess_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    \terror_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n\n    \tlocation / {\n             root /data/www/www.reallinxu.com;\n             index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n             try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    \t}\n\n    \terror_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    \tlocation = /404.html {            #这是一个典型的location\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \terror_page 500 502 503 504 /50x.html;\n    \tlocation = /50x.html {\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \t# 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    \tlocation ~ [^/]\\.php(/|$) {\n             root /data/www/www.reallinxu.com;\n             fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n             if (!-f $document_root$fastcgi_script_name) {\n                     return 404;\n             }\n             #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n             # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n             fastcgi_pass 127.0.0.1:9000;\n             fastcgi_index index.php;\n             fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n             include fastcgi_params;\n    \t}\n    \tlocation ~ /\\.ht {\n             deny all;\n    \t}\n\n    \trewrite /wp-admin$ $scheme://$host$uri/ permanent;\n \t}\n\n5.新建日志目录并赋权限  \n\n\tmkdir -p /var/log/nginx/aaa\n\tchown -R nginx:adm /var/log/nginx/aaa\n6.安装最新的php-mysql  \n\n\tyum update\n\tyum install php-mysql\n7.启动nginx  \n\n\tservice nginx start\n8.此时访问可能会出现数据库错误  \n\n\tvi wp-config.php\n\t#修改以下部分\n\tdefine( 'WP_DEBUG', true );\n再进行访问时，会出现具体错误，此时发现是数据库连接错误，本人是需要修改配置文件如下  \n\n\tdefine( 'DB_HOST', '127.0.0.1' );   #原为localhost\n9.修改线程数，优化内存  \n\n\tvi /etc/php-fpm.d/www.conf   #修改如下\n\t最大线程数\n\tpm.max_children = 3\n\t初始线程数\n\tpm.start_servers = 1\n\t最小空余线程数\n\tpm.min_spare_servers = 1\n\t最大空余线程数\n\tpm.max_spare_servers = 1\n\tphp_admin内存最大限制\n\tphp_admin_value[memory_limit] = 128M\n","slug":"P15","published":1,"updated":"2018-05-10T02:45:03.670Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtm7000o84gpp6qlj8zd","content":"<p>1.停掉httpd当前服务，禁用重启  </p>\n<pre><code>service httpd stop\n#开机重启后，apache服务不再启动p \nchkconfig httpd off\n</code></pre><p>2.安装nginx  </p>\n<pre><code>yum -y install nginx\n</code></pre><p>3.安装php-fpm  </p>\n<pre><code>yum install php-fpm\n/etc/init.d/php-fpm start  #该目录下没有执行文件，采用直接下一步设置开机自启\nchkconfig php-fpm on\n</code></pre><p>4.编辑nginx配置文件  </p>\n<pre><code>vi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n#转发给wordpress网站\nserver {\n    listen 80;\n    server_name www.reallinxu.com;        \n    access_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    error_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n\n    location / {\n         root /data/www/www.reallinxu.com;\n         index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n         try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    }\n\n    error_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    location = /404.html {            #这是一个典型的location\n         root /data/www/www.reallinxu.com;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n         root /data/www/www.reallinxu.com;\n    }\n\n    # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    location ~ [^/]\\.php(/|$) {\n         root /data/www/www.reallinxu.com;\n         fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n         if (!-f $document_root$fastcgi_script_name) {\n                 return 404;\n         }\n         #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n         # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n         fastcgi_pass 127.0.0.1:9000;\n         fastcgi_index index.php;\n         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         include fastcgi_params;\n    }\n    location ~ /\\.ht {\n         deny all;\n    }\n\n    rewrite /wp-admin$ $scheme://$host$uri/ permanent;\n }\n</code></pre><p>5.新建日志目录并赋权限  </p>\n<pre><code>mkdir -p /var/log/nginx/aaa\nchown -R nginx:adm /var/log/nginx/aaa\n</code></pre><p>6.安装最新的php-mysql  </p>\n<pre><code>yum update\nyum install php-mysql\n</code></pre><p>7.启动nginx  </p>\n<pre><code>service nginx start\n</code></pre><p>8.此时访问可能会出现数据库错误  </p>\n<pre><code>vi wp-config.php\n#修改以下部分\ndefine( &apos;WP_DEBUG&apos;, true );\n</code></pre><p>再进行访问时，会出现具体错误，此时发现是数据库连接错误，本人是需要修改配置文件如下  </p>\n<pre><code>define( &apos;DB_HOST&apos;, &apos;127.0.0.1&apos; );   #原为localhost\n</code></pre><p>9.修改线程数，优化内存  </p>\n<pre><code>vi /etc/php-fpm.d/www.conf   #修改如下\n最大线程数\npm.max_children = 3\n初始线程数\npm.start_servers = 1\n最小空余线程数\npm.min_spare_servers = 1\n最大空余线程数\npm.max_spare_servers = 1\nphp_admin内存最大限制\nphp_admin_value[memory_limit] = 128M\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p>1.停掉httpd当前服务，禁用重启  </p>\n<pre><code>service httpd stop\n#开机重启后，apache服务不再启动p \nchkconfig httpd off\n</code></pre><p>2.安装nginx  </p>\n<pre><code>yum -y install nginx\n</code></pre><p>3.安装php-fpm  </p>\n<pre><code>yum install php-fpm\n/etc/init.d/php-fpm start  #该目录下没有执行文件，采用直接下一步设置开机自启\nchkconfig php-fpm on\n</code></pre><p>4.编辑nginx配置文件  </p>\n<pre><code>vi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n#转发给wordpress网站\nserver {\n    listen 80;\n    server_name www.reallinxu.com;        \n    access_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    error_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n\n    location / {\n         root /data/www/www.reallinxu.com;\n         index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n         try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    }\n\n    error_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    location = /404.html {            #这是一个典型的location\n         root /data/www/www.reallinxu.com;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n         root /data/www/www.reallinxu.com;\n    }\n\n    # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    location ~ [^/]\\.php(/|$) {\n         root /data/www/www.reallinxu.com;\n         fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n         if (!-f $document_root$fastcgi_script_name) {\n                 return 404;\n         }\n         #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n         # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n         fastcgi_pass 127.0.0.1:9000;\n         fastcgi_index index.php;\n         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         include fastcgi_params;\n    }\n    location ~ /\\.ht {\n         deny all;\n    }\n\n    rewrite /wp-admin$ $scheme://$host$uri/ permanent;\n }\n</code></pre><p>5.新建日志目录并赋权限  </p>\n<pre><code>mkdir -p /var/log/nginx/aaa\nchown -R nginx:adm /var/log/nginx/aaa\n</code></pre><p>6.安装最新的php-mysql  </p>\n<pre><code>yum update\nyum install php-mysql\n</code></pre><p>7.启动nginx  </p>\n<pre><code>service nginx start\n</code></pre><p>8.此时访问可能会出现数据库错误  </p>\n<pre><code>vi wp-config.php\n#修改以下部分\ndefine( &apos;WP_DEBUG&apos;, true );\n</code></pre><p>再进行访问时，会出现具体错误，此时发现是数据库连接错误，本人是需要修改配置文件如下  </p>\n<pre><code>define( &apos;DB_HOST&apos;, &apos;127.0.0.1&apos; );   #原为localhost\n</code></pre><p>9.修改线程数，优化内存  </p>\n<pre><code>vi /etc/php-fpm.d/www.conf   #修改如下\n最大线程数\npm.max_children = 3\n初始线程数\npm.start_servers = 1\n最小空余线程数\npm.min_spare_servers = 1\n最大空余线程数\npm.max_spare_servers = 1\nphp_admin内存最大限制\nphp_admin_value[memory_limit] = 128M\n</code></pre>"},{"title":" vi文件Found a swap file by the name \t\t","id":"105","date":"2018-01-24T10:59:56.000Z","_content":"\n在vi文件时出现  Found a swap file by the name <span class=\"string\">\".Test.java.swp\"</span>   提示，是因为之前vi异常中断.\n\nls -a可以查看隐藏文件*.swap\n\nrm *.swap即可","source":"_posts/P14.md","raw":"---\ntitle: \" vi文件Found\\_a\\_swap\\_file\\_by\\_the\\_name\\_\\t\\t\"\nid: 105\ncategories:\n  - 杂项\ndate: 2018-01-24 18:59:56\ntags:\n---\n\n在vi文件时出现  Found a swap file by the name <span class=\"string\">\".Test.java.swp\"</span>   提示，是因为之前vi异常中断.\n\nls -a可以查看隐藏文件*.swap\n\nrm *.swap即可","slug":"P14","published":1,"updated":"2018-03-22T01:28:03.520Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtma000r84gpz37mnaxp","content":"<p>在vi文件时出现  Found a swap file by the name <span class=\"string\">“.Test.java.swp”</span>   提示，是因为之前vi异常中断.</p>\n<p>ls -a可以查看隐藏文件*.swap</p>\n<p>rm *.swap即可</p>\n","site":{"data":{}},"excerpt":"","more":"<p>在vi文件时出现  Found a swap file by the name <span class=\"string\">“.Test.java.swp”</span>   提示，是因为之前vi异常中断.</p>\n<p>ls -a可以查看隐藏文件*.swap</p>\n<p>rm *.swap即可</p>\n"},{"title":" centos服务器安装mysql","id":"75","date":"2018-01-12T08:14:23.000Z","_content":"\n# 安装mysql #\n\t[root@localhost ~]rpm -qa | grep mysql #搜索指定rpm包是否安装。\n\t[root@localhost ~]yum install mysql #安装客户端\n\t[root@localhost ~]yum install mysql-server #安装服务端(此时安装失败，需要下载)\n\t[root@localhost ~]wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n\t[root@localhost ~]rpm -ivh mysql-community-release-el7-5.noarch.rpm\n\t[root@localhost ~]yum install mysql-community-server #安装server\n\t[root@localhost ~]yum install mysql-devel #服务端安装好后，需要安装 ，包含了所需要的库和文件，如果需要编译其他Mysql客户程序，必须要安装</pre>\n# 添加权限 #\n服务器安装完成后，通过本机DbVisualizer连接时会连接不上，此时需要赋予权限  \n\n\t[root@localhost ~]grant all on *.* to test@'%' identified by '123456';  \n\t*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n\t%，表示所有ip\n\tgrant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘密码’\n# 删除权限 #\n\t[root@localhost ~]grant all on *.* to test@'%' identified by '123456';   \n\t*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n\t%，表示所有ip\n\trevoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址</pre>\n","source":"_posts/P4.md","raw":"---\ntitle: \" centos服务器安装mysql\"\nid: 75\ncategories:\n  - CentOS\ndate: 2018-01-12 16:14:23\ntags:\n---\n\n# 安装mysql #\n\t[root@localhost ~]rpm -qa | grep mysql #搜索指定rpm包是否安装。\n\t[root@localhost ~]yum install mysql #安装客户端\n\t[root@localhost ~]yum install mysql-server #安装服务端(此时安装失败，需要下载)\n\t[root@localhost ~]wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n\t[root@localhost ~]rpm -ivh mysql-community-release-el7-5.noarch.rpm\n\t[root@localhost ~]yum install mysql-community-server #安装server\n\t[root@localhost ~]yum install mysql-devel #服务端安装好后，需要安装 ，包含了所需要的库和文件，如果需要编译其他Mysql客户程序，必须要安装</pre>\n# 添加权限 #\n服务器安装完成后，通过本机DbVisualizer连接时会连接不上，此时需要赋予权限  \n\n\t[root@localhost ~]grant all on *.* to test@'%' identified by '123456';  \n\t*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n\t%，表示所有ip\n\tgrant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘密码’\n# 删除权限 #\n\t[root@localhost ~]grant all on *.* to test@'%' identified by '123456';   \n\t*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n\t%，表示所有ip\n\trevoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址</pre>\n","slug":"P4","published":1,"updated":"2018-05-10T02:21:49.515Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmc000t84gpawjiegio","content":"<h1 id=\"安装mysql\"><a href=\"#安装mysql\" class=\"headerlink\" title=\"安装mysql\"></a>安装mysql</h1><pre><code>[root@localhost ~]rpm -qa | grep mysql #搜索指定rpm包是否安装。\n[root@localhost ~]yum install mysql #安装客户端\n[root@localhost ~]yum install mysql-server #安装服务端(此时安装失败，需要下载)\n[root@localhost ~]wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n[root@localhost ~]rpm -ivh mysql-community-release-el7-5.noarch.rpm\n[root@localhost ~]yum install mysql-community-server #安装server\n[root@localhost ~]yum install mysql-devel #服务端安装好后，需要安装 ，包含了所需要的库和文件，如果需要编译其他Mysql客户程序，必须要安装&lt;/pre&gt;\n</code></pre><h1 id=\"添加权限\"><a href=\"#添加权限\" class=\"headerlink\" title=\"添加权限\"></a>添加权限</h1><p>服务器安装完成后，通过本机DbVisualizer连接时会连接不上，此时需要赋予权限  </p>\n<pre><code>[root@localhost ~]grant all on *.* to test@&apos;%&apos; identified by &apos;123456&apos;;  \n*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n%，表示所有ip\ngrant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘密码’\n</code></pre><h1 id=\"删除权限\"><a href=\"#删除权限\" class=\"headerlink\" title=\"删除权限\"></a>删除权限</h1><pre><code>[root@localhost ~]grant all on *.* to test@&apos;%&apos; identified by &apos;123456&apos;;   \n*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n%，表示所有ip\nrevoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址&lt;/pre&gt;\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"安装mysql\"><a href=\"#安装mysql\" class=\"headerlink\" title=\"安装mysql\"></a>安装mysql</h1><pre><code>[root@localhost ~]rpm -qa | grep mysql #搜索指定rpm包是否安装。\n[root@localhost ~]yum install mysql #安装客户端\n[root@localhost ~]yum install mysql-server #安装服务端(此时安装失败，需要下载)\n[root@localhost ~]wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\n[root@localhost ~]rpm -ivh mysql-community-release-el7-5.noarch.rpm\n[root@localhost ~]yum install mysql-community-server #安装server\n[root@localhost ~]yum install mysql-devel #服务端安装好后，需要安装 ，包含了所需要的库和文件，如果需要编译其他Mysql客户程序，必须要安装&lt;/pre&gt;\n</code></pre><h1 id=\"添加权限\"><a href=\"#添加权限\" class=\"headerlink\" title=\"添加权限\"></a>添加权限</h1><p>服务器安装完成后，通过本机DbVisualizer连接时会连接不上，此时需要赋予权限  </p>\n<pre><code>[root@localhost ~]grant all on *.* to test@&apos;%&apos; identified by &apos;123456&apos;;  \n*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n%，表示所有ip\ngrant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by ‘密码’\n</code></pre><h1 id=\"删除权限\"><a href=\"#删除权限\" class=\"headerlink\" title=\"删除权限\"></a>删除权限</h1><pre><code>[root@localhost ~]grant all on *.* to test@&apos;%&apos; identified by &apos;123456&apos;;   \n*.*，表示赋予用户操作服务器上所有数据库所有表的权限。 \n%，表示所有ip\nrevoke 权限1,权限2,…权限n on 数据库名称.表名称 from 用户名@用户地址&lt;/pre&gt;\n</code></pre>"},{"title":" Dubbo+Zookeeper+Spring-boot+dubbo-simple 搭建入门","id":"80","date":"2018-01-23T08:16:32.000Z","_content":"\n# 安装Zookeeper #\n\t[root@linxu ~]#  wget http://mirrors.shu.edu.cn/apache/zookeeper/zookeeper-3.5.3-beta/zookeeper-3.5.3-beta.tar.gz\n\t[root@linxu ~]#  tar -zxvf zookeeper-3.5.3-beta.tar.gz  #此时可能会报错使用 \n\t[root@linxu ~]#  tar -xvf zookeeper-3.5.3-beta.tar.gz \n\t[root@linxu ~]#  mv zookeeper-3.5.3-beta /usr/local/zookeeper #没有目录请先mkdir\n\t[root@linxu ~]#  cd /usr/local/zookeeper/zookeeper-3.5.3-beta/conf\n\t[root@linxu conf]# cp zoo_sample.cfg zoo.cfg\n\t[root@linxu conf]# vi zoo.cfg \n\t修改配置对应项\n\tdataDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/data\n\tdataLogDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/logs\n\t[root@linxu conf]# vi /etc/profile\n\t末尾添加\n\texport ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.5.3-beta/\n\texport PATH=$ZOOKEEPER_HOME/bin:$PATH\n\texport PATH\n\t[root@linxu conf]# source /etc/profile #使生效\n\t[root@linxu conf]# zkServer.sh start   #启动\n\t[root@linxu conf]# zkServer.sh status  #查看状态\n\t[root@linxu conf]# zkServer.sh stop    #停止\n\t[root@linxu conf]# zkServer.sh restart #重启\n\n\n# 部署dubbo-admin #\n\n从github上下载dubbo源码，编译dubbo-admin(最新版已没有dubbo-admin，下载历史版本)\n\ndubbo地址：https://github.com/alibaba/dubbo/tree/dubbo-2.5.8\n\n编译：mvn package -Dmaven.test.skip=true\n\n编译成功后将target目录下的war包放到tomcat下webapps中，启动tomcat即可访问http://localhost:8080/dubbo-admin-2.5.8/\n\n# 代码实现 #\n本地使用spring-boot创建提供者（provider）和消费者(consume) \n\n代码：https://github.com/reallinxu/spring-boot-dubbo\n\n分别启动provider和consume，查看dubbo主页，可以看到提供者和消费者。\n\nPS：provider和consume的接口位置必须一致\n\n# 搭建dubbo-simple监控 #\n\n从github上下载dubbox源码，编译dubbo-monitor-simple\n\ndubbox地址：https://github.com/reallinxu/dubbox\n\n编译：mvn package -Dmaven.test.skip=true\n\n编译成功后将dubbo-monitor-simple-2.8.4-assembly.tar.gz放入服务器  \n\n\t[root@linxu dubbo-simple]# tar -zxvf dubbo-monitor-simple-2.8.4-assembly.tar.gz\n\t[root@linxu bin]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/conf\n\t修改dubbo.properties\n\tdubbo.container=log4j,spring,registry,jetty\n\tdubbo.application.name=simple-monitor\n\tdubbo.application.owner=\n\t#dubbo.registry.address=multicast://224.5.6.7:1234\n\tdubbo.registry.address=zookeeper://192.168.43.163:2181 #Zookeeper地址\n\t#dubbo.registry.address=redis://127.0.0.1:6379\n\t#dubbo.registry.address=dubbo://127.0.0.1:9090\n\tdubbo.protocol.port=7070\n\tdubbo.jetty.port=7072  #jetty端口，避免冲突\n\tdubbo.jetty.directory=${user.home}/monitor\n\tdubbo.charts.directory=${dubbo.jetty.directory}/charts\n\tdubbo.statistics.directory=${user.home}/monitor/statistics\n\tdubbo.log4j.file=logs/dubbo-monitor-simple.log\n\tdubbo.log4j.level=WARN</pre>\n\t启动dubbo-simple\n\t[root@linxu ~]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/bin\n\t[root@linxu bin]# sh start.sh\n启动成功后登陆访问http://192.168.43.163:7072 (端口为jetty端口)\n\n如果查看不到监控提供者\n\ncom.alibaba.dubbo.monitor.MonitorService\n\n请核对dubbo.properties zookeeper地址和端口是否正确\n","source":"_posts/P3.md","raw":"---\ntitle: \" Dubbo+Zookeeper+Spring-boot+dubbo-simple 搭建入门\"\nid: 80\ncategories:\n  - Dubbo\ndate: 2018-01-23 16:16:32\ntags:\n---\n\n# 安装Zookeeper #\n\t[root@linxu ~]#  wget http://mirrors.shu.edu.cn/apache/zookeeper/zookeeper-3.5.3-beta/zookeeper-3.5.3-beta.tar.gz\n\t[root@linxu ~]#  tar -zxvf zookeeper-3.5.3-beta.tar.gz  #此时可能会报错使用 \n\t[root@linxu ~]#  tar -xvf zookeeper-3.5.3-beta.tar.gz \n\t[root@linxu ~]#  mv zookeeper-3.5.3-beta /usr/local/zookeeper #没有目录请先mkdir\n\t[root@linxu ~]#  cd /usr/local/zookeeper/zookeeper-3.5.3-beta/conf\n\t[root@linxu conf]# cp zoo_sample.cfg zoo.cfg\n\t[root@linxu conf]# vi zoo.cfg \n\t修改配置对应项\n\tdataDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/data\n\tdataLogDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/logs\n\t[root@linxu conf]# vi /etc/profile\n\t末尾添加\n\texport ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.5.3-beta/\n\texport PATH=$ZOOKEEPER_HOME/bin:$PATH\n\texport PATH\n\t[root@linxu conf]# source /etc/profile #使生效\n\t[root@linxu conf]# zkServer.sh start   #启动\n\t[root@linxu conf]# zkServer.sh status  #查看状态\n\t[root@linxu conf]# zkServer.sh stop    #停止\n\t[root@linxu conf]# zkServer.sh restart #重启\n\n\n# 部署dubbo-admin #\n\n从github上下载dubbo源码，编译dubbo-admin(最新版已没有dubbo-admin，下载历史版本)\n\ndubbo地址：https://github.com/alibaba/dubbo/tree/dubbo-2.5.8\n\n编译：mvn package -Dmaven.test.skip=true\n\n编译成功后将target目录下的war包放到tomcat下webapps中，启动tomcat即可访问http://localhost:8080/dubbo-admin-2.5.8/\n\n# 代码实现 #\n本地使用spring-boot创建提供者（provider）和消费者(consume) \n\n代码：https://github.com/reallinxu/spring-boot-dubbo\n\n分别启动provider和consume，查看dubbo主页，可以看到提供者和消费者。\n\nPS：provider和consume的接口位置必须一致\n\n# 搭建dubbo-simple监控 #\n\n从github上下载dubbox源码，编译dubbo-monitor-simple\n\ndubbox地址：https://github.com/reallinxu/dubbox\n\n编译：mvn package -Dmaven.test.skip=true\n\n编译成功后将dubbo-monitor-simple-2.8.4-assembly.tar.gz放入服务器  \n\n\t[root@linxu dubbo-simple]# tar -zxvf dubbo-monitor-simple-2.8.4-assembly.tar.gz\n\t[root@linxu bin]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/conf\n\t修改dubbo.properties\n\tdubbo.container=log4j,spring,registry,jetty\n\tdubbo.application.name=simple-monitor\n\tdubbo.application.owner=\n\t#dubbo.registry.address=multicast://224.5.6.7:1234\n\tdubbo.registry.address=zookeeper://192.168.43.163:2181 #Zookeeper地址\n\t#dubbo.registry.address=redis://127.0.0.1:6379\n\t#dubbo.registry.address=dubbo://127.0.0.1:9090\n\tdubbo.protocol.port=7070\n\tdubbo.jetty.port=7072  #jetty端口，避免冲突\n\tdubbo.jetty.directory=${user.home}/monitor\n\tdubbo.charts.directory=${dubbo.jetty.directory}/charts\n\tdubbo.statistics.directory=${user.home}/monitor/statistics\n\tdubbo.log4j.file=logs/dubbo-monitor-simple.log\n\tdubbo.log4j.level=WARN</pre>\n\t启动dubbo-simple\n\t[root@linxu ~]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/bin\n\t[root@linxu bin]# sh start.sh\n启动成功后登陆访问http://192.168.43.163:7072 (端口为jetty端口)\n\n如果查看不到监控提供者\n\ncom.alibaba.dubbo.monitor.MonitorService\n\n请核对dubbo.properties zookeeper地址和端口是否正确\n","slug":"P3","published":1,"updated":"2018-05-10T02:19:49.760Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtml000w84gpkiksra5m","content":"<h1 id=\"安装Zookeeper\"><a href=\"#安装Zookeeper\" class=\"headerlink\" title=\"安装Zookeeper\"></a>安装Zookeeper</h1><pre><code>[root@linxu ~]#  wget http://mirrors.shu.edu.cn/apache/zookeeper/zookeeper-3.5.3-beta/zookeeper-3.5.3-beta.tar.gz\n[root@linxu ~]#  tar -zxvf zookeeper-3.5.3-beta.tar.gz  #此时可能会报错使用 \n[root@linxu ~]#  tar -xvf zookeeper-3.5.3-beta.tar.gz \n[root@linxu ~]#  mv zookeeper-3.5.3-beta /usr/local/zookeeper #没有目录请先mkdir\n[root@linxu ~]#  cd /usr/local/zookeeper/zookeeper-3.5.3-beta/conf\n[root@linxu conf]# cp zoo_sample.cfg zoo.cfg\n[root@linxu conf]# vi zoo.cfg \n修改配置对应项\ndataDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/data\ndataLogDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/logs\n[root@linxu conf]# vi /etc/profile\n末尾添加\nexport ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.5.3-beta/\nexport PATH=$ZOOKEEPER_HOME/bin:$PATH\nexport PATH\n[root@linxu conf]# source /etc/profile #使生效\n[root@linxu conf]# zkServer.sh start   #启动\n[root@linxu conf]# zkServer.sh status  #查看状态\n[root@linxu conf]# zkServer.sh stop    #停止\n[root@linxu conf]# zkServer.sh restart #重启\n</code></pre><h1 id=\"部署dubbo-admin\"><a href=\"#部署dubbo-admin\" class=\"headerlink\" title=\"部署dubbo-admin\"></a>部署dubbo-admin</h1><p>从github上下载dubbo源码，编译dubbo-admin(最新版已没有dubbo-admin，下载历史版本)</p>\n<p>dubbo地址：<a href=\"https://github.com/alibaba/dubbo/tree/dubbo-2.5.8\" target=\"_blank\" rel=\"noopener\">https://github.com/alibaba/dubbo/tree/dubbo-2.5.8</a></p>\n<p>编译：mvn package -Dmaven.test.skip=true</p>\n<p>编译成功后将target目录下的war包放到tomcat下webapps中，启动tomcat即可访问<a href=\"http://localhost:8080/dubbo-admin-2.5.8/\" target=\"_blank\" rel=\"noopener\">http://localhost:8080/dubbo-admin-2.5.8/</a></p>\n<h1 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h1><p>本地使用spring-boot创建提供者（provider）和消费者(consume) </p>\n<p>代码：<a href=\"https://github.com/reallinxu/spring-boot-dubbo\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/spring-boot-dubbo</a></p>\n<p>分别启动provider和consume，查看dubbo主页，可以看到提供者和消费者。</p>\n<p>PS：provider和consume的接口位置必须一致</p>\n<h1 id=\"搭建dubbo-simple监控\"><a href=\"#搭建dubbo-simple监控\" class=\"headerlink\" title=\"搭建dubbo-simple监控\"></a>搭建dubbo-simple监控</h1><p>从github上下载dubbox源码，编译dubbo-monitor-simple</p>\n<p>dubbox地址：<a href=\"https://github.com/reallinxu/dubbox\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/dubbox</a></p>\n<p>编译：mvn package -Dmaven.test.skip=true</p>\n<p>编译成功后将dubbo-monitor-simple-2.8.4-assembly.tar.gz放入服务器  </p>\n<pre><code>[root@linxu dubbo-simple]# tar -zxvf dubbo-monitor-simple-2.8.4-assembly.tar.gz\n[root@linxu bin]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/conf\n修改dubbo.properties\ndubbo.container=log4j,spring,registry,jetty\ndubbo.application.name=simple-monitor\ndubbo.application.owner=\n#dubbo.registry.address=multicast://224.5.6.7:1234\ndubbo.registry.address=zookeeper://192.168.43.163:2181 #Zookeeper地址\n#dubbo.registry.address=redis://127.0.0.1:6379\n#dubbo.registry.address=dubbo://127.0.0.1:9090\ndubbo.protocol.port=7070\ndubbo.jetty.port=7072  #jetty端口，避免冲突\ndubbo.jetty.directory=${user.home}/monitor\ndubbo.charts.directory=${dubbo.jetty.directory}/charts\ndubbo.statistics.directory=${user.home}/monitor/statistics\ndubbo.log4j.file=logs/dubbo-monitor-simple.log\ndubbo.log4j.level=WARN&lt;/pre&gt;\n启动dubbo-simple\n[root@linxu ~]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/bin\n[root@linxu bin]# sh start.sh\n</code></pre><p>启动成功后登陆访问<a href=\"http://192.168.43.163:7072\" target=\"_blank\" rel=\"noopener\">http://192.168.43.163:7072</a> (端口为jetty端口)</p>\n<p>如果查看不到监控提供者</p>\n<p>com.alibaba.dubbo.monitor.MonitorService</p>\n<p>请核对dubbo.properties zookeeper地址和端口是否正确</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"安装Zookeeper\"><a href=\"#安装Zookeeper\" class=\"headerlink\" title=\"安装Zookeeper\"></a>安装Zookeeper</h1><pre><code>[root@linxu ~]#  wget http://mirrors.shu.edu.cn/apache/zookeeper/zookeeper-3.5.3-beta/zookeeper-3.5.3-beta.tar.gz\n[root@linxu ~]#  tar -zxvf zookeeper-3.5.3-beta.tar.gz  #此时可能会报错使用 \n[root@linxu ~]#  tar -xvf zookeeper-3.5.3-beta.tar.gz \n[root@linxu ~]#  mv zookeeper-3.5.3-beta /usr/local/zookeeper #没有目录请先mkdir\n[root@linxu ~]#  cd /usr/local/zookeeper/zookeeper-3.5.3-beta/conf\n[root@linxu conf]# cp zoo_sample.cfg zoo.cfg\n[root@linxu conf]# vi zoo.cfg \n修改配置对应项\ndataDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/data\ndataLogDir=/usr/local/zookeeper/zookeeper-3.5.3-beta/logs\n[root@linxu conf]# vi /etc/profile\n末尾添加\nexport ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.5.3-beta/\nexport PATH=$ZOOKEEPER_HOME/bin:$PATH\nexport PATH\n[root@linxu conf]# source /etc/profile #使生效\n[root@linxu conf]# zkServer.sh start   #启动\n[root@linxu conf]# zkServer.sh status  #查看状态\n[root@linxu conf]# zkServer.sh stop    #停止\n[root@linxu conf]# zkServer.sh restart #重启\n</code></pre><h1 id=\"部署dubbo-admin\"><a href=\"#部署dubbo-admin\" class=\"headerlink\" title=\"部署dubbo-admin\"></a>部署dubbo-admin</h1><p>从github上下载dubbo源码，编译dubbo-admin(最新版已没有dubbo-admin，下载历史版本)</p>\n<p>dubbo地址：<a href=\"https://github.com/alibaba/dubbo/tree/dubbo-2.5.8\" target=\"_blank\" rel=\"noopener\">https://github.com/alibaba/dubbo/tree/dubbo-2.5.8</a></p>\n<p>编译：mvn package -Dmaven.test.skip=true</p>\n<p>编译成功后将target目录下的war包放到tomcat下webapps中，启动tomcat即可访问<a href=\"http://localhost:8080/dubbo-admin-2.5.8/\" target=\"_blank\" rel=\"noopener\">http://localhost:8080/dubbo-admin-2.5.8/</a></p>\n<h1 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h1><p>本地使用spring-boot创建提供者（provider）和消费者(consume) </p>\n<p>代码：<a href=\"https://github.com/reallinxu/spring-boot-dubbo\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/spring-boot-dubbo</a></p>\n<p>分别启动provider和consume，查看dubbo主页，可以看到提供者和消费者。</p>\n<p>PS：provider和consume的接口位置必须一致</p>\n<h1 id=\"搭建dubbo-simple监控\"><a href=\"#搭建dubbo-simple监控\" class=\"headerlink\" title=\"搭建dubbo-simple监控\"></a>搭建dubbo-simple监控</h1><p>从github上下载dubbox源码，编译dubbo-monitor-simple</p>\n<p>dubbox地址：<a href=\"https://github.com/reallinxu/dubbox\" target=\"_blank\" rel=\"noopener\">https://github.com/reallinxu/dubbox</a></p>\n<p>编译：mvn package -Dmaven.test.skip=true</p>\n<p>编译成功后将dubbo-monitor-simple-2.8.4-assembly.tar.gz放入服务器  </p>\n<pre><code>[root@linxu dubbo-simple]# tar -zxvf dubbo-monitor-simple-2.8.4-assembly.tar.gz\n[root@linxu bin]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/conf\n修改dubbo.properties\ndubbo.container=log4j,spring,registry,jetty\ndubbo.application.name=simple-monitor\ndubbo.application.owner=\n#dubbo.registry.address=multicast://224.5.6.7:1234\ndubbo.registry.address=zookeeper://192.168.43.163:2181 #Zookeeper地址\n#dubbo.registry.address=redis://127.0.0.1:6379\n#dubbo.registry.address=dubbo://127.0.0.1:9090\ndubbo.protocol.port=7070\ndubbo.jetty.port=7072  #jetty端口，避免冲突\ndubbo.jetty.directory=${user.home}/monitor\ndubbo.charts.directory=${dubbo.jetty.directory}/charts\ndubbo.statistics.directory=${user.home}/monitor/statistics\ndubbo.log4j.file=logs/dubbo-monitor-simple.log\ndubbo.log4j.level=WARN&lt;/pre&gt;\n启动dubbo-simple\n[root@linxu ~]# cd /usr/local/dubbo-simple/dubbo-monitor-simple-2.8.4/bin\n[root@linxu bin]# sh start.sh\n</code></pre><p>启动成功后登陆访问<a href=\"http://192.168.43.163:7072\" target=\"_blank\" rel=\"noopener\">http://192.168.43.163:7072</a> (端口为jetty端口)</p>\n<p>如果查看不到监控提供者</p>\n<p>com.alibaba.dubbo.monitor.MonitorService</p>\n<p>请核对dubbo.properties zookeeper地址和端口是否正确</p>\n"},{"title":" WordPress搭建\t\t","id":"62","date":"2017-12-22T06:17:01.000Z","_content":"\n具体参考\n\nhttp://www.bandwagonhost.net/401.html\n\nhttp://www.bandwagonhost.net/403.html","source":"_posts/P16.md","raw":"---\ntitle: \" WordPress搭建\\t\\t\"\nid: 62\ncategories:\n  - WordPress\ndate: 2017-12-22 14:17:01\ntags:\n---\n\n具体参考\n\nhttp://www.bandwagonhost.net/401.html\n\nhttp://www.bandwagonhost.net/403.html","slug":"P16","published":1,"updated":"2018-03-22T01:28:03.520Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmo000x84gpy84yinqk","content":"<p>具体参考</p>\n<p><a href=\"http://www.bandwagonhost.net/401.html\" target=\"_blank\" rel=\"noopener\">http://www.bandwagonhost.net/401.html</a></p>\n<p><a href=\"http://www.bandwagonhost.net/403.html\" target=\"_blank\" rel=\"noopener\">http://www.bandwagonhost.net/403.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>具体参考</p>\n<p><a href=\"http://www.bandwagonhost.net/401.html\" target=\"_blank\" rel=\"noopener\">http://www.bandwagonhost.net/401.html</a></p>\n<p><a href=\"http://www.bandwagonhost.net/403.html\" target=\"_blank\" rel=\"noopener\">http://www.bandwagonhost.net/403.html</a></p>\n"},{"title":" 上传或更新本地代码到github\t\t","id":"93","date":"2018-01-23T08:28:47.000Z","_content":"## 本地代码上传github ##\n**第一步：建立git仓库**  \ncd到你的本地项目根目录下，执行git命令  \n\n\tgit init\n**第二步：将项目的所有文件添加到仓库中**  \n\n\tgit add .\n\t如果想添加某个特定的文件，只需把.换成特定的文件名即可**\n\n**第三步：将add的文件commit到仓库**  \n\n\tgit commit -m \"注释语句\"\n\n**第四步：去github上创建自己的Repository**\n\n**第五步：重点来了，将本地的仓库关联到github上**  \n\n\tgit remote add origin https://github.com/reallinxu/spring-boot-dubbo\n\t后面的https链接地址换成你自己的仓库url地址\n\n**第六步：上传github之前，要先pull一下**  \n\n\tgit pull origin master\n**第七步，也就是最后一步，上传代码到github远程仓库**  \n\n\tgit push -u origin master\n\n## 更新代码到github ##\n**第一步：查看当前的git仓库状态，可以使用git status**\n\n\tgit status\n\n**第二步：更新全部**\n\n\tgit add *\n\n**第三步：接着输入git commit -m \"更新说明\"**\n\n\tgit commit -m \"更新说明\"\n\n**第四步：先git pull,拉取当前分支最新代码**\n\n\tgit pull\n\n**第五步：push到远程master分支上**\n\n\tgit push origin master","source":"_posts/P6.md","raw":"---\ntitle: \" 上传或更新本地代码到github\\t\\t\"\nid: 93\ncategories:\n  - github\ndate: 2018-01-23 16:28:47\ntags:\n---\n## 本地代码上传github ##\n**第一步：建立git仓库**  \ncd到你的本地项目根目录下，执行git命令  \n\n\tgit init\n**第二步：将项目的所有文件添加到仓库中**  \n\n\tgit add .\n\t如果想添加某个特定的文件，只需把.换成特定的文件名即可**\n\n**第三步：将add的文件commit到仓库**  \n\n\tgit commit -m \"注释语句\"\n\n**第四步：去github上创建自己的Repository**\n\n**第五步：重点来了，将本地的仓库关联到github上**  \n\n\tgit remote add origin https://github.com/reallinxu/spring-boot-dubbo\n\t后面的https链接地址换成你自己的仓库url地址\n\n**第六步：上传github之前，要先pull一下**  \n\n\tgit pull origin master\n**第七步，也就是最后一步，上传代码到github远程仓库**  \n\n\tgit push -u origin master\n\n## 更新代码到github ##\n**第一步：查看当前的git仓库状态，可以使用git status**\n\n\tgit status\n\n**第二步：更新全部**\n\n\tgit add *\n\n**第三步：接着输入git commit -m \"更新说明\"**\n\n\tgit commit -m \"更新说明\"\n\n**第四步：先git pull,拉取当前分支最新代码**\n\n\tgit pull\n\n**第五步：push到远程master分支上**\n\n\tgit push origin master","slug":"P6","published":1,"updated":"2018-05-17T06:45:02.087Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmq001084gpwsdhp32n","content":"<h2 id=\"本地代码上传github\"><a href=\"#本地代码上传github\" class=\"headerlink\" title=\"本地代码上传github\"></a>本地代码上传github</h2><p><strong>第一步：建立git仓库</strong><br>cd到你的本地项目根目录下，执行git命令  </p>\n<pre><code>git init\n</code></pre><p><strong>第二步：将项目的所有文件添加到仓库中</strong>  </p>\n<pre><code>git add .\n如果想添加某个特定的文件，只需把.换成特定的文件名即可**\n</code></pre><p><strong>第三步：将add的文件commit到仓库</strong>  </p>\n<pre><code>git commit -m &quot;注释语句&quot;\n</code></pre><p><strong>第四步：去github上创建自己的Repository</strong></p>\n<p><strong>第五步：重点来了，将本地的仓库关联到github上</strong>  </p>\n<pre><code>git remote add origin https://github.com/reallinxu/spring-boot-dubbo\n后面的https链接地址换成你自己的仓库url地址\n</code></pre><p><strong>第六步：上传github之前，要先pull一下</strong>  </p>\n<pre><code>git pull origin master\n</code></pre><p><strong>第七步，也就是最后一步，上传代码到github远程仓库</strong>  </p>\n<pre><code>git push -u origin master\n</code></pre><h2 id=\"更新代码到github\"><a href=\"#更新代码到github\" class=\"headerlink\" title=\"更新代码到github\"></a>更新代码到github</h2><p><strong>第一步：查看当前的git仓库状态，可以使用git status</strong></p>\n<pre><code>git status\n</code></pre><p><strong>第二步：更新全部</strong></p>\n<pre><code>git add *\n</code></pre><p><strong>第三步：接着输入git commit -m “更新说明”</strong></p>\n<pre><code>git commit -m &quot;更新说明&quot;\n</code></pre><p><strong>第四步：先git pull,拉取当前分支最新代码</strong></p>\n<pre><code>git pull\n</code></pre><p><strong>第五步：push到远程master分支上</strong></p>\n<pre><code>git push origin master\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"本地代码上传github\"><a href=\"#本地代码上传github\" class=\"headerlink\" title=\"本地代码上传github\"></a>本地代码上传github</h2><p><strong>第一步：建立git仓库</strong><br>cd到你的本地项目根目录下，执行git命令  </p>\n<pre><code>git init\n</code></pre><p><strong>第二步：将项目的所有文件添加到仓库中</strong>  </p>\n<pre><code>git add .\n如果想添加某个特定的文件，只需把.换成特定的文件名即可**\n</code></pre><p><strong>第三步：将add的文件commit到仓库</strong>  </p>\n<pre><code>git commit -m &quot;注释语句&quot;\n</code></pre><p><strong>第四步：去github上创建自己的Repository</strong></p>\n<p><strong>第五步：重点来了，将本地的仓库关联到github上</strong>  </p>\n<pre><code>git remote add origin https://github.com/reallinxu/spring-boot-dubbo\n后面的https链接地址换成你自己的仓库url地址\n</code></pre><p><strong>第六步：上传github之前，要先pull一下</strong>  </p>\n<pre><code>git pull origin master\n</code></pre><p><strong>第七步，也就是最后一步，上传代码到github远程仓库</strong>  </p>\n<pre><code>git push -u origin master\n</code></pre><h2 id=\"更新代码到github\"><a href=\"#更新代码到github\" class=\"headerlink\" title=\"更新代码到github\"></a>更新代码到github</h2><p><strong>第一步：查看当前的git仓库状态，可以使用git status</strong></p>\n<pre><code>git status\n</code></pre><p><strong>第二步：更新全部</strong></p>\n<pre><code>git add *\n</code></pre><p><strong>第三步：接着输入git commit -m “更新说明”</strong></p>\n<pre><code>git commit -m &quot;更新说明&quot;\n</code></pre><p><strong>第四步：先git pull,拉取当前分支最新代码</strong></p>\n<pre><code>git pull\n</code></pre><p><strong>第五步：push到远程master分支上</strong></p>\n<pre><code>git push origin master\n</code></pre>"},{"title":" CentOS下安装JDK、NEXUS、TOMCAT、RABBITMQ集群\t\t","id":"48","date":"2017-12-22T02:20:31.000Z","_content":"\n# CentOS联网设置 #  \n\t[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33\n\tIntel Corporation 82545EM Gigabit Ethernet Controller (Copper)\n\tTYPE=Ethernet       #网卡类型\n\tDEVICE=eth0         #网卡接口名称\n\tONBOOT=yes          #系统启动时是否自动加载\n\tBOOTPROTO=static    #启用地址协议 --static:静态协议 --bootp协议 --dhcp协议\n\tIPADDR=192.168.1.11      #网卡IP地址\n\tNETMASK=255.255.255.0    #网卡网络地址\n\tGATEWAY=192.168.1.1      #网卡网关地址\n\tDNS1=10.203.104.41       #网卡DNS地址\n\tHWADDR=00:0C:29:13:5D:74 #网卡设备MAC地址\n\tBROADCAST=192.168.1.255  #网卡广播地址 \n\n\tPS:该文件名ifcfg-ens33不固定，找差不多类型文件即可。联网只要设置为自动加载即可，即ONBOOT设置为yes(一般默认为no)。设置完后reboot重启，命令ifconfig查看ip。\n# CentOS安装jdk #\n使用WinSCP连接虚拟机，centOS可以直接通过FTP和SSH连接。将jdk-8u144-linux-x64.tar.gz下载好通过WinSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装jdk。\n## 创建Java文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# mkdir java\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n## 将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下 ##\n\t[root@localhost ~]# tar zxvf jdk-8u144-linux-x64.tar.gz\n\t[root@localhost ~]# mv jdk1.8.0_144 /usr/local/java\n## 设置环境变量 ##\n\t[root@localhost ~]# vi ~/.bashrc\n\t文件末尾加上以下几行：\n\texport JAVA_HOME=/usr/local/java/jdk1.8.0_144\n\texport CLASSPATH=.:${JAVA_HOME}/lib\n\texport PATH=${JAVA_HOME}/bin:$PATH\n\t使生效：\n\t[root@localhost jdk1.8.0_144]# source ~/.bashrc\n## 验证是否安装成功 ##\n\t[root@localhost jdk1.8.0_144]# java\n\t[root@localhost jdk1.8.0_144]# javac\n\t[root@localhost jdk1.8.0_144]# java -version\n# CentOS安装Nexus #\n将nexus-3.5.2-01-unix.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装nexus。\n## 创建Nexus文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n\t[root@localhost local]# mkdir nexus\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src\n## 将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压 ##\n\t[root@localhost ~]# mv nexus-3.5.2-01-unix.tar.gz /usr/local/nexus\n\t[root@localhost ~]# cd /usr/local/nexus\n\t[root@localhost ~]# tar zxvf nexus-3.5.2-01-unix.tar.gz\n## 启动nexus ##\n\t[root@localhost ~]# cd /usr/local/nexus/nexus-3.5.2-01/bin\n\t[root@localhost bin]# ./nexus start\n\tWARNING: ************************************************************\n\tWARNING: Detected execution as \"root\" user.  This is NOT recommended!\n\tWARNING: ************************************************************\n\tStarting nexus\n\t[root@localhost bin]# ./nexus status\n\tWARNING: ************************************************************\n\tWARNING: Detected execution as \"root\" user.  This is NOT recommended!\n\tWARNING: ************************************************************\n\tnexus is running.\n## 验证是否启动成功 ##\n在浏览器中输入{ip}:8081(默认为8081端口)。此时并不能打开，因为防火墙的原因，此处我是关闭防火墙(也可以开放相应端口解决)，为了简单直接关闭啦。关闭防火墙命令如下：  \n\n\t[root@localhost bin]# systemctl stop firewalld.service #停止firewall(此时重启后防火墙会自动开启)\n\t[root@localhost bin]# systemctl disable firewalld.service #禁止firewall开机启动\n\t[root@localhost bin]# firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running）\n此时再通过浏览器进入即可。\n# CentOS安装Tomcat #\n将apache-tomcat-8.5.23.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装tomcat。\n## 创建Tomcat文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# mkdir tomcat\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src  tomcat\n## 将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压 ##\n\t[root@localhost ~]# mv apache-tomcat-8.5.23.tar.gz /usr/local/tomcat/\n\t[root@localhost ~]# cd /usr/local/tomcat/\n\t[root@localhost tomcat]# tar zxvf apache-tomcat-8.5.23.tar.gz \n## 启动Tomcat ##\n\t[root@localhost ~]# cd /usr/local/tomcat/apache-tomcat-8.5.23/bin\n\t[root@localhost bin]# ./startup.sh \n\tUsing CATALINA_BASE:   /usr/local/tomcat/apache-tomcat-8.5.23\n\tUsing CATALINA_HOME:   /usr/local/tomcat/apache-tomcat-8.5.23\n\tUsing CATALINA_TMPDIR: /usr/local/tomcat/apache-tomcat-8.5.23/temp\n\tUsing JRE_HOME:        /usr/local/java/jdk1.8.0_144\n\tUsing CLASSPATH:       /usr/local/tomcat/apache-tomcat-8.5.23/bin/bootstrap.jar:/usr/local/tomcat/apache-tomcat-8.5.23/bin/tomcat-juli.jar\n\tTomcat started.\n## 验证是否安装成功 ##\n用浏览器输入{IP}:8080(默认为8080端口)。 PS：注意防火墙设置。\n# CentOS安装RabbitMq #\n## 安装Erlang ##\n使用SecureCRT连接虚拟机，开始准备安装Erlang。  \n\n\t[root@localhost bin]# rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\n\t[root@localhost bin]# yum install erlang\n\t安装  1 软件包 (+110 依赖软件包)\n\n\t总下载量：51 M\n\t安装大小：117 M\n\tIs this ok [y/d/N]: \n\t输入：y\n\t是否继续？[y/N]：\n\t输入: y\n\n## 安装RabbitMq ##\n将rabbitmq-signing-key-public.asc、rabbitmq-server-3.3.5-1.noarch.rpm通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装RabbitMq。  \n\n\t[root@localhost ~]# rpm --import rabbitmq-signing-key-public.asc\n\t[root@localhost ~]# rpm -ivh rabbitmq-server-3.3.5-1.noarch.rpm\n\t准备中...                          ################################# [100%]\n\t正在升级/安装...\n\t1:rabbitmq-server-3.3.5-1          ################################# [100%]\n\t[root@localhost ~]# rabbitmq-plugins enable rabbitmq_management\n\tThe following plugins have been enabled:\n\tmochiweb\n\twebmachine\n\trabbitmq_web_dispatch\n\tamqp_client\n\trabbitmq_management_agent\n\trabbitmq_management\n\tPlugin configuration has changed. Restart RabbitMQ for changes to take effect.\n\t[root@localhost ~]# chkconfig --level 3 rabbitmq-server on\n配置文件路径  \n\n\t[root@localhost ~]# vi /etc/init.d/rabbitmq-server\n\t寻找行：PID_FILE=/var/run/rabbitmq/pid\n\t在以上内容之下，插入行\n\texport RABBITMQ_MNESIA=/rabbitmq/mnesia\n配置访问权限  \n\n\t[root@localhost ~]# chmod 644 /etc/rabbitmq/enabled_plugins\n启动RabbitMq  \n\n\t[root@localhost ~]# service rabbitmq-server start\n\t[root@localhost ~]# rabbitmqctl add_user admin admin\n\t[root@localhost ~]# rabbitmqctl set_user_tags admin administrator\n验证RabbitMq\n\t用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)\n\n## 配置RabbitMq集群 ##\n修改hosts文件  \n\n\tvi /etc/hosts\n\t将两台虚拟机的Ip配置进去：\n\t192.168.43.69 test1\n\t192.168.43.216 test2\n\t重启两台虚拟机reboot\n启动第一台虚拟机的Rabbitmq:  \n\n    service rabbitmq-server start\n    将/var/lib/rabbitmq的.erlang.cookie文件拷贝到第二台虚拟机相同位置覆盖\n    更改.erlang.cookie的访问权限为400\n    chmod 400 /var/lib/rabbitmq/.erlang.cookie\n    更改.erlang.cookie的文件所有人为rabbitmq\n    chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n    启动第二台虚拟机的Rabbitmq：\n    service rabbitmq-server start\n    rabbitmqctl stop_app\n    rabbitmqctl join_cluster rabbit@test1\n    rabbitmqctl start_app\n验证集群是否成功  \n用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)\nPS：cookie文件会有两处都存在，root目录下cookie可以直接删除。如果使用虚拟机使用桥接模式，主机名hostname会自动修改成和hosts配置一致，如果使用仅主机网络等，hostname没有修改，可以使用hostnamectl set-hostname test1命令就行修改。\n\n软件包地址：[http://download.csdn.net/download/anonymous_l/10021072](http://download.csdn.net/download/anonymous_l/10021072)","source":"_posts/P5.md","raw":"---\ntitle: \" CentOS下安装JDK、NEXUS、TOMCAT、RABBITMQ集群\\t\\t\"\ntags:\n  - CentOS\nid: 48\ncategories:\n  - CentOS\ndate: 2017-12-22 10:20:31\n---\n\n# CentOS联网设置 #  \n\t[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33\n\tIntel Corporation 82545EM Gigabit Ethernet Controller (Copper)\n\tTYPE=Ethernet       #网卡类型\n\tDEVICE=eth0         #网卡接口名称\n\tONBOOT=yes          #系统启动时是否自动加载\n\tBOOTPROTO=static    #启用地址协议 --static:静态协议 --bootp协议 --dhcp协议\n\tIPADDR=192.168.1.11      #网卡IP地址\n\tNETMASK=255.255.255.0    #网卡网络地址\n\tGATEWAY=192.168.1.1      #网卡网关地址\n\tDNS1=10.203.104.41       #网卡DNS地址\n\tHWADDR=00:0C:29:13:5D:74 #网卡设备MAC地址\n\tBROADCAST=192.168.1.255  #网卡广播地址 \n\n\tPS:该文件名ifcfg-ens33不固定，找差不多类型文件即可。联网只要设置为自动加载即可，即ONBOOT设置为yes(一般默认为no)。设置完后reboot重启，命令ifconfig查看ip。\n# CentOS安装jdk #\n使用WinSCP连接虚拟机，centOS可以直接通过FTP和SSH连接。将jdk-8u144-linux-x64.tar.gz下载好通过WinSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装jdk。\n## 创建Java文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# mkdir java\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n## 将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下 ##\n\t[root@localhost ~]# tar zxvf jdk-8u144-linux-x64.tar.gz\n\t[root@localhost ~]# mv jdk1.8.0_144 /usr/local/java\n## 设置环境变量 ##\n\t[root@localhost ~]# vi ~/.bashrc\n\t文件末尾加上以下几行：\n\texport JAVA_HOME=/usr/local/java/jdk1.8.0_144\n\texport CLASSPATH=.:${JAVA_HOME}/lib\n\texport PATH=${JAVA_HOME}/bin:$PATH\n\t使生效：\n\t[root@localhost jdk1.8.0_144]# source ~/.bashrc\n## 验证是否安装成功 ##\n\t[root@localhost jdk1.8.0_144]# java\n\t[root@localhost jdk1.8.0_144]# javac\n\t[root@localhost jdk1.8.0_144]# java -version\n# CentOS安装Nexus #\n将nexus-3.5.2-01-unix.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装nexus。\n## 创建Nexus文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n\t[root@localhost local]# mkdir nexus\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src\n## 将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压 ##\n\t[root@localhost ~]# mv nexus-3.5.2-01-unix.tar.gz /usr/local/nexus\n\t[root@localhost ~]# cd /usr/local/nexus\n\t[root@localhost ~]# tar zxvf nexus-3.5.2-01-unix.tar.gz\n## 启动nexus ##\n\t[root@localhost ~]# cd /usr/local/nexus/nexus-3.5.2-01/bin\n\t[root@localhost bin]# ./nexus start\n\tWARNING: ************************************************************\n\tWARNING: Detected execution as \"root\" user.  This is NOT recommended!\n\tWARNING: ************************************************************\n\tStarting nexus\n\t[root@localhost bin]# ./nexus status\n\tWARNING: ************************************************************\n\tWARNING: Detected execution as \"root\" user.  This is NOT recommended!\n\tWARNING: ************************************************************\n\tnexus is running.\n## 验证是否启动成功 ##\n在浏览器中输入{ip}:8081(默认为8081端口)。此时并不能打开，因为防火墙的原因，此处我是关闭防火墙(也可以开放相应端口解决)，为了简单直接关闭啦。关闭防火墙命令如下：  \n\n\t[root@localhost bin]# systemctl stop firewalld.service #停止firewall(此时重启后防火墙会自动开启)\n\t[root@localhost bin]# systemctl disable firewalld.service #禁止firewall开机启动\n\t[root@localhost bin]# firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running）\n此时再通过浏览器进入即可。\n# CentOS安装Tomcat #\n将apache-tomcat-8.5.23.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装tomcat。\n## 创建Tomcat文件夹 ##\n\t[root@localhost ~]# cd /usr/local\n\t[root@localhost local]# mkdir tomcat\n\t[root@localhost local]# ls\n\tbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src  tomcat\n## 将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压 ##\n\t[root@localhost ~]# mv apache-tomcat-8.5.23.tar.gz /usr/local/tomcat/\n\t[root@localhost ~]# cd /usr/local/tomcat/\n\t[root@localhost tomcat]# tar zxvf apache-tomcat-8.5.23.tar.gz \n## 启动Tomcat ##\n\t[root@localhost ~]# cd /usr/local/tomcat/apache-tomcat-8.5.23/bin\n\t[root@localhost bin]# ./startup.sh \n\tUsing CATALINA_BASE:   /usr/local/tomcat/apache-tomcat-8.5.23\n\tUsing CATALINA_HOME:   /usr/local/tomcat/apache-tomcat-8.5.23\n\tUsing CATALINA_TMPDIR: /usr/local/tomcat/apache-tomcat-8.5.23/temp\n\tUsing JRE_HOME:        /usr/local/java/jdk1.8.0_144\n\tUsing CLASSPATH:       /usr/local/tomcat/apache-tomcat-8.5.23/bin/bootstrap.jar:/usr/local/tomcat/apache-tomcat-8.5.23/bin/tomcat-juli.jar\n\tTomcat started.\n## 验证是否安装成功 ##\n用浏览器输入{IP}:8080(默认为8080端口)。 PS：注意防火墙设置。\n# CentOS安装RabbitMq #\n## 安装Erlang ##\n使用SecureCRT连接虚拟机，开始准备安装Erlang。  \n\n\t[root@localhost bin]# rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\n\t[root@localhost bin]# yum install erlang\n\t安装  1 软件包 (+110 依赖软件包)\n\n\t总下载量：51 M\n\t安装大小：117 M\n\tIs this ok [y/d/N]: \n\t输入：y\n\t是否继续？[y/N]：\n\t输入: y\n\n## 安装RabbitMq ##\n将rabbitmq-signing-key-public.asc、rabbitmq-server-3.3.5-1.noarch.rpm通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装RabbitMq。  \n\n\t[root@localhost ~]# rpm --import rabbitmq-signing-key-public.asc\n\t[root@localhost ~]# rpm -ivh rabbitmq-server-3.3.5-1.noarch.rpm\n\t准备中...                          ################################# [100%]\n\t正在升级/安装...\n\t1:rabbitmq-server-3.3.5-1          ################################# [100%]\n\t[root@localhost ~]# rabbitmq-plugins enable rabbitmq_management\n\tThe following plugins have been enabled:\n\tmochiweb\n\twebmachine\n\trabbitmq_web_dispatch\n\tamqp_client\n\trabbitmq_management_agent\n\trabbitmq_management\n\tPlugin configuration has changed. Restart RabbitMQ for changes to take effect.\n\t[root@localhost ~]# chkconfig --level 3 rabbitmq-server on\n配置文件路径  \n\n\t[root@localhost ~]# vi /etc/init.d/rabbitmq-server\n\t寻找行：PID_FILE=/var/run/rabbitmq/pid\n\t在以上内容之下，插入行\n\texport RABBITMQ_MNESIA=/rabbitmq/mnesia\n配置访问权限  \n\n\t[root@localhost ~]# chmod 644 /etc/rabbitmq/enabled_plugins\n启动RabbitMq  \n\n\t[root@localhost ~]# service rabbitmq-server start\n\t[root@localhost ~]# rabbitmqctl add_user admin admin\n\t[root@localhost ~]# rabbitmqctl set_user_tags admin administrator\n验证RabbitMq\n\t用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)\n\n## 配置RabbitMq集群 ##\n修改hosts文件  \n\n\tvi /etc/hosts\n\t将两台虚拟机的Ip配置进去：\n\t192.168.43.69 test1\n\t192.168.43.216 test2\n\t重启两台虚拟机reboot\n启动第一台虚拟机的Rabbitmq:  \n\n    service rabbitmq-server start\n    将/var/lib/rabbitmq的.erlang.cookie文件拷贝到第二台虚拟机相同位置覆盖\n    更改.erlang.cookie的访问权限为400\n    chmod 400 /var/lib/rabbitmq/.erlang.cookie\n    更改.erlang.cookie的文件所有人为rabbitmq\n    chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n    启动第二台虚拟机的Rabbitmq：\n    service rabbitmq-server start\n    rabbitmqctl stop_app\n    rabbitmqctl join_cluster rabbit@test1\n    rabbitmqctl start_app\n验证集群是否成功  \n用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)\nPS：cookie文件会有两处都存在，root目录下cookie可以直接删除。如果使用虚拟机使用桥接模式，主机名hostname会自动修改成和hosts配置一致，如果使用仅主机网络等，hostname没有修改，可以使用hostnamectl set-hostname test1命令就行修改。\n\n软件包地址：[http://download.csdn.net/download/anonymous_l/10021072](http://download.csdn.net/download/anonymous_l/10021072)","slug":"P5","published":1,"updated":"2018-05-10T02:12:19.634Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmr001184gphpb0obet","content":"<h1 id=\"CentOS联网设置\"><a href=\"#CentOS联网设置\" class=\"headerlink\" title=\"CentOS联网设置\"></a>CentOS联网设置</h1><pre><code>[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33\nIntel Corporation 82545EM Gigabit Ethernet Controller (Copper)\nTYPE=Ethernet       #网卡类型\nDEVICE=eth0         #网卡接口名称\nONBOOT=yes          #系统启动时是否自动加载\nBOOTPROTO=static    #启用地址协议 --static:静态协议 --bootp协议 --dhcp协议\nIPADDR=192.168.1.11      #网卡IP地址\nNETMASK=255.255.255.0    #网卡网络地址\nGATEWAY=192.168.1.1      #网卡网关地址\nDNS1=10.203.104.41       #网卡DNS地址\nHWADDR=00:0C:29:13:5D:74 #网卡设备MAC地址\nBROADCAST=192.168.1.255  #网卡广播地址 \n\nPS:该文件名ifcfg-ens33不固定，找差不多类型文件即可。联网只要设置为自动加载即可，即ONBOOT设置为yes(一般默认为no)。设置完后reboot重启，命令ifconfig查看ip。\n</code></pre><h1 id=\"CentOS安装jdk\"><a href=\"#CentOS安装jdk\" class=\"headerlink\" title=\"CentOS安装jdk\"></a>CentOS安装jdk</h1><p>使用WinSCP连接虚拟机，centOS可以直接通过FTP和SSH连接。将jdk-8u144-linux-x64.tar.gz下载好通过WinSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装jdk。</p>\n<h2 id=\"创建Java文件夹\"><a href=\"#创建Java文件夹\" class=\"headerlink\" title=\"创建Java文件夹\"></a>创建Java文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# mkdir java\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n</code></pre><h2 id=\"将jdk-8u144-linux-x64-tar-gz解压，再移到java文件夹下\"><a href=\"#将jdk-8u144-linux-x64-tar-gz解压，再移到java文件夹下\" class=\"headerlink\" title=\"将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下\"></a>将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下</h2><pre><code>[root@localhost ~]# tar zxvf jdk-8u144-linux-x64.tar.gz\n[root@localhost ~]# mv jdk1.8.0_144 /usr/local/java\n</code></pre><h2 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h2><pre><code>[root@localhost ~]# vi ~/.bashrc\n文件末尾加上以下几行：\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_144\nexport CLASSPATH=.:${JAVA_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n使生效：\n[root@localhost jdk1.8.0_144]# source ~/.bashrc\n</code></pre><h2 id=\"验证是否安装成功\"><a href=\"#验证是否安装成功\" class=\"headerlink\" title=\"验证是否安装成功\"></a>验证是否安装成功</h2><pre><code>[root@localhost jdk1.8.0_144]# java\n[root@localhost jdk1.8.0_144]# javac\n[root@localhost jdk1.8.0_144]# java -version\n</code></pre><h1 id=\"CentOS安装Nexus\"><a href=\"#CentOS安装Nexus\" class=\"headerlink\" title=\"CentOS安装Nexus\"></a>CentOS安装Nexus</h1><p>将nexus-3.5.2-01-unix.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装nexus。</p>\n<h2 id=\"创建Nexus文件夹\"><a href=\"#创建Nexus文件夹\" class=\"headerlink\" title=\"创建Nexus文件夹\"></a>创建Nexus文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n[root@localhost local]# mkdir nexus\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src\n</code></pre><h2 id=\"将nexus-3-5-2-01-unix-tar-gz移到nexus文件夹下再解压\"><a href=\"#将nexus-3-5-2-01-unix-tar-gz移到nexus文件夹下再解压\" class=\"headerlink\" title=\"将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压\"></a>将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压</h2><pre><code>[root@localhost ~]# mv nexus-3.5.2-01-unix.tar.gz /usr/local/nexus\n[root@localhost ~]# cd /usr/local/nexus\n[root@localhost ~]# tar zxvf nexus-3.5.2-01-unix.tar.gz\n</code></pre><h2 id=\"启动nexus\"><a href=\"#启动nexus\" class=\"headerlink\" title=\"启动nexus\"></a>启动nexus</h2><pre><code>[root@localhost ~]# cd /usr/local/nexus/nexus-3.5.2-01/bin\n[root@localhost bin]# ./nexus start\nWARNING: ************************************************************\nWARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!\nWARNING: ************************************************************\nStarting nexus\n[root@localhost bin]# ./nexus status\nWARNING: ************************************************************\nWARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!\nWARNING: ************************************************************\nnexus is running.\n</code></pre><h2 id=\"验证是否启动成功\"><a href=\"#验证是否启动成功\" class=\"headerlink\" title=\"验证是否启动成功\"></a>验证是否启动成功</h2><p>在浏览器中输入{ip}:8081(默认为8081端口)。此时并不能打开，因为防火墙的原因，此处我是关闭防火墙(也可以开放相应端口解决)，为了简单直接关闭啦。关闭防火墙命令如下：  </p>\n<pre><code>[root@localhost bin]# systemctl stop firewalld.service #停止firewall(此时重启后防火墙会自动开启)\n[root@localhost bin]# systemctl disable firewalld.service #禁止firewall开机启动\n[root@localhost bin]# firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running）\n</code></pre><p>此时再通过浏览器进入即可。</p>\n<h1 id=\"CentOS安装Tomcat\"><a href=\"#CentOS安装Tomcat\" class=\"headerlink\" title=\"CentOS安装Tomcat\"></a>CentOS安装Tomcat</h1><p>将apache-tomcat-8.5.23.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装tomcat。</p>\n<h2 id=\"创建Tomcat文件夹\"><a href=\"#创建Tomcat文件夹\" class=\"headerlink\" title=\"创建Tomcat文件夹\"></a>创建Tomcat文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# mkdir tomcat\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src  tomcat\n</code></pre><h2 id=\"将apache-tomcat-8-5-23-tar-gz移到tomcat文件夹下再解压\"><a href=\"#将apache-tomcat-8-5-23-tar-gz移到tomcat文件夹下再解压\" class=\"headerlink\" title=\"将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压\"></a>将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压</h2><pre><code>[root@localhost ~]# mv apache-tomcat-8.5.23.tar.gz /usr/local/tomcat/\n[root@localhost ~]# cd /usr/local/tomcat/\n[root@localhost tomcat]# tar zxvf apache-tomcat-8.5.23.tar.gz \n</code></pre><h2 id=\"启动Tomcat\"><a href=\"#启动Tomcat\" class=\"headerlink\" title=\"启动Tomcat\"></a>启动Tomcat</h2><pre><code>[root@localhost ~]# cd /usr/local/tomcat/apache-tomcat-8.5.23/bin\n[root@localhost bin]# ./startup.sh \nUsing CATALINA_BASE:   /usr/local/tomcat/apache-tomcat-8.5.23\nUsing CATALINA_HOME:   /usr/local/tomcat/apache-tomcat-8.5.23\nUsing CATALINA_TMPDIR: /usr/local/tomcat/apache-tomcat-8.5.23/temp\nUsing JRE_HOME:        /usr/local/java/jdk1.8.0_144\nUsing CLASSPATH:       /usr/local/tomcat/apache-tomcat-8.5.23/bin/bootstrap.jar:/usr/local/tomcat/apache-tomcat-8.5.23/bin/tomcat-juli.jar\nTomcat started.\n</code></pre><h2 id=\"验证是否安装成功-1\"><a href=\"#验证是否安装成功-1\" class=\"headerlink\" title=\"验证是否安装成功\"></a>验证是否安装成功</h2><p>用浏览器输入{IP}:8080(默认为8080端口)。 PS：注意防火墙设置。</p>\n<h1 id=\"CentOS安装RabbitMq\"><a href=\"#CentOS安装RabbitMq\" class=\"headerlink\" title=\"CentOS安装RabbitMq\"></a>CentOS安装RabbitMq</h1><h2 id=\"安装Erlang\"><a href=\"#安装Erlang\" class=\"headerlink\" title=\"安装Erlang\"></a>安装Erlang</h2><p>使用SecureCRT连接虚拟机，开始准备安装Erlang。  </p>\n<pre><code>[root@localhost bin]# rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\n[root@localhost bin]# yum install erlang\n安装  1 软件包 (+110 依赖软件包)\n\n总下载量：51 M\n安装大小：117 M\nIs this ok [y/d/N]: \n输入：y\n是否继续？[y/N]：\n输入: y\n</code></pre><h2 id=\"安装RabbitMq\"><a href=\"#安装RabbitMq\" class=\"headerlink\" title=\"安装RabbitMq\"></a>安装RabbitMq</h2><p>将rabbitmq-signing-key-public.asc、rabbitmq-server-3.3.5-1.noarch.rpm通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装RabbitMq。  </p>\n<pre><code>[root@localhost ~]# rpm --import rabbitmq-signing-key-public.asc\n[root@localhost ~]# rpm -ivh rabbitmq-server-3.3.5-1.noarch.rpm\n准备中...                          ################################# [100%]\n正在升级/安装...\n1:rabbitmq-server-3.3.5-1          ################################# [100%]\n[root@localhost ~]# rabbitmq-plugins enable rabbitmq_management\nThe following plugins have been enabled:\nmochiweb\nwebmachine\nrabbitmq_web_dispatch\namqp_client\nrabbitmq_management_agent\nrabbitmq_management\nPlugin configuration has changed. Restart RabbitMQ for changes to take effect.\n[root@localhost ~]# chkconfig --level 3 rabbitmq-server on\n</code></pre><p>配置文件路径  </p>\n<pre><code>[root@localhost ~]# vi /etc/init.d/rabbitmq-server\n寻找行：PID_FILE=/var/run/rabbitmq/pid\n在以上内容之下，插入行\nexport RABBITMQ_MNESIA=/rabbitmq/mnesia\n</code></pre><p>配置访问权限  </p>\n<pre><code>[root@localhost ~]# chmod 644 /etc/rabbitmq/enabled_plugins\n</code></pre><p>启动RabbitMq  </p>\n<pre><code>[root@localhost ~]# service rabbitmq-server start\n[root@localhost ~]# rabbitmqctl add_user admin admin\n[root@localhost ~]# rabbitmqctl set_user_tags admin administrator\n</code></pre><p>验证RabbitMq<br>    用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)</p>\n<h2 id=\"配置RabbitMq集群\"><a href=\"#配置RabbitMq集群\" class=\"headerlink\" title=\"配置RabbitMq集群\"></a>配置RabbitMq集群</h2><p>修改hosts文件  </p>\n<pre><code>vi /etc/hosts\n将两台虚拟机的Ip配置进去：\n192.168.43.69 test1\n192.168.43.216 test2\n重启两台虚拟机reboot\n</code></pre><p>启动第一台虚拟机的Rabbitmq:  </p>\n<pre><code>service rabbitmq-server start\n将/var/lib/rabbitmq的.erlang.cookie文件拷贝到第二台虚拟机相同位置覆盖\n更改.erlang.cookie的访问权限为400\nchmod 400 /var/lib/rabbitmq/.erlang.cookie\n更改.erlang.cookie的文件所有人为rabbitmq\nchown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n启动第二台虚拟机的Rabbitmq：\nservice rabbitmq-server start\nrabbitmqctl stop_app\nrabbitmqctl join_cluster rabbit@test1\nrabbitmqctl start_app\n</code></pre><p>验证集群是否成功<br>用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)<br>PS：cookie文件会有两处都存在，root目录下cookie可以直接删除。如果使用虚拟机使用桥接模式，主机名hostname会自动修改成和hosts配置一致，如果使用仅主机网络等，hostname没有修改，可以使用hostnamectl set-hostname test1命令就行修改。</p>\n<p>软件包地址：<a href=\"http://download.csdn.net/download/anonymous_l/10021072\" target=\"_blank\" rel=\"noopener\">http://download.csdn.net/download/anonymous_l/10021072</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"CentOS联网设置\"><a href=\"#CentOS联网设置\" class=\"headerlink\" title=\"CentOS联网设置\"></a>CentOS联网设置</h1><pre><code>[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33\nIntel Corporation 82545EM Gigabit Ethernet Controller (Copper)\nTYPE=Ethernet       #网卡类型\nDEVICE=eth0         #网卡接口名称\nONBOOT=yes          #系统启动时是否自动加载\nBOOTPROTO=static    #启用地址协议 --static:静态协议 --bootp协议 --dhcp协议\nIPADDR=192.168.1.11      #网卡IP地址\nNETMASK=255.255.255.0    #网卡网络地址\nGATEWAY=192.168.1.1      #网卡网关地址\nDNS1=10.203.104.41       #网卡DNS地址\nHWADDR=00:0C:29:13:5D:74 #网卡设备MAC地址\nBROADCAST=192.168.1.255  #网卡广播地址 \n\nPS:该文件名ifcfg-ens33不固定，找差不多类型文件即可。联网只要设置为自动加载即可，即ONBOOT设置为yes(一般默认为no)。设置完后reboot重启，命令ifconfig查看ip。\n</code></pre><h1 id=\"CentOS安装jdk\"><a href=\"#CentOS安装jdk\" class=\"headerlink\" title=\"CentOS安装jdk\"></a>CentOS安装jdk</h1><p>使用WinSCP连接虚拟机，centOS可以直接通过FTP和SSH连接。将jdk-8u144-linux-x64.tar.gz下载好通过WinSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装jdk。</p>\n<h2 id=\"创建Java文件夹\"><a href=\"#创建Java文件夹\" class=\"headerlink\" title=\"创建Java文件夹\"></a>创建Java文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# mkdir java\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n</code></pre><h2 id=\"将jdk-8u144-linux-x64-tar-gz解压，再移到java文件夹下\"><a href=\"#将jdk-8u144-linux-x64-tar-gz解压，再移到java文件夹下\" class=\"headerlink\" title=\"将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下\"></a>将jdk-8u144-linux-x64.tar.gz解压，再移到java文件夹下</h2><pre><code>[root@localhost ~]# tar zxvf jdk-8u144-linux-x64.tar.gz\n[root@localhost ~]# mv jdk1.8.0_144 /usr/local/java\n</code></pre><h2 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h2><pre><code>[root@localhost ~]# vi ~/.bashrc\n文件末尾加上以下几行：\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_144\nexport CLASSPATH=.:${JAVA_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n使生效：\n[root@localhost jdk1.8.0_144]# source ~/.bashrc\n</code></pre><h2 id=\"验证是否安装成功\"><a href=\"#验证是否安装成功\" class=\"headerlink\" title=\"验证是否安装成功\"></a>验证是否安装成功</h2><pre><code>[root@localhost jdk1.8.0_144]# java\n[root@localhost jdk1.8.0_144]# javac\n[root@localhost jdk1.8.0_144]# java -version\n</code></pre><h1 id=\"CentOS安装Nexus\"><a href=\"#CentOS安装Nexus\" class=\"headerlink\" title=\"CentOS安装Nexus\"></a>CentOS安装Nexus</h1><p>将nexus-3.5.2-01-unix.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装nexus。</p>\n<h2 id=\"创建Nexus文件夹\"><a href=\"#创建Nexus文件夹\" class=\"headerlink\" title=\"创建Nexus文件夹\"></a>创建Nexus文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  sbin  share  src\n[root@localhost local]# mkdir nexus\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src\n</code></pre><h2 id=\"将nexus-3-5-2-01-unix-tar-gz移到nexus文件夹下再解压\"><a href=\"#将nexus-3-5-2-01-unix-tar-gz移到nexus文件夹下再解压\" class=\"headerlink\" title=\"将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压\"></a>将nexus-3.5.2-01-unix.tar.gz移到nexus文件夹下再解压</h2><pre><code>[root@localhost ~]# mv nexus-3.5.2-01-unix.tar.gz /usr/local/nexus\n[root@localhost ~]# cd /usr/local/nexus\n[root@localhost ~]# tar zxvf nexus-3.5.2-01-unix.tar.gz\n</code></pre><h2 id=\"启动nexus\"><a href=\"#启动nexus\" class=\"headerlink\" title=\"启动nexus\"></a>启动nexus</h2><pre><code>[root@localhost ~]# cd /usr/local/nexus/nexus-3.5.2-01/bin\n[root@localhost bin]# ./nexus start\nWARNING: ************************************************************\nWARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!\nWARNING: ************************************************************\nStarting nexus\n[root@localhost bin]# ./nexus status\nWARNING: ************************************************************\nWARNING: Detected execution as &quot;root&quot; user.  This is NOT recommended!\nWARNING: ************************************************************\nnexus is running.\n</code></pre><h2 id=\"验证是否启动成功\"><a href=\"#验证是否启动成功\" class=\"headerlink\" title=\"验证是否启动成功\"></a>验证是否启动成功</h2><p>在浏览器中输入{ip}:8081(默认为8081端口)。此时并不能打开，因为防火墙的原因，此处我是关闭防火墙(也可以开放相应端口解决)，为了简单直接关闭啦。关闭防火墙命令如下：  </p>\n<pre><code>[root@localhost bin]# systemctl stop firewalld.service #停止firewall(此时重启后防火墙会自动开启)\n[root@localhost bin]# systemctl disable firewalld.service #禁止firewall开机启动\n[root@localhost bin]# firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running）\n</code></pre><p>此时再通过浏览器进入即可。</p>\n<h1 id=\"CentOS安装Tomcat\"><a href=\"#CentOS安装Tomcat\" class=\"headerlink\" title=\"CentOS安装Tomcat\"></a>CentOS安装Tomcat</h1><p>将apache-tomcat-8.5.23.tar.gz通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装tomcat。</p>\n<h2 id=\"创建Tomcat文件夹\"><a href=\"#创建Tomcat文件夹\" class=\"headerlink\" title=\"创建Tomcat文件夹\"></a>创建Tomcat文件夹</h2><pre><code>[root@localhost ~]# cd /usr/local\n[root@localhost local]# mkdir tomcat\n[root@localhost local]# ls\nbin  etc  games  include  java  lib  lib64  libexec  nexus  sbin  share  src  tomcat\n</code></pre><h2 id=\"将apache-tomcat-8-5-23-tar-gz移到tomcat文件夹下再解压\"><a href=\"#将apache-tomcat-8-5-23-tar-gz移到tomcat文件夹下再解压\" class=\"headerlink\" title=\"将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压\"></a>将apache-tomcat-8.5.23.tar.gz移到tomcat文件夹下再解压</h2><pre><code>[root@localhost ~]# mv apache-tomcat-8.5.23.tar.gz /usr/local/tomcat/\n[root@localhost ~]# cd /usr/local/tomcat/\n[root@localhost tomcat]# tar zxvf apache-tomcat-8.5.23.tar.gz \n</code></pre><h2 id=\"启动Tomcat\"><a href=\"#启动Tomcat\" class=\"headerlink\" title=\"启动Tomcat\"></a>启动Tomcat</h2><pre><code>[root@localhost ~]# cd /usr/local/tomcat/apache-tomcat-8.5.23/bin\n[root@localhost bin]# ./startup.sh \nUsing CATALINA_BASE:   /usr/local/tomcat/apache-tomcat-8.5.23\nUsing CATALINA_HOME:   /usr/local/tomcat/apache-tomcat-8.5.23\nUsing CATALINA_TMPDIR: /usr/local/tomcat/apache-tomcat-8.5.23/temp\nUsing JRE_HOME:        /usr/local/java/jdk1.8.0_144\nUsing CLASSPATH:       /usr/local/tomcat/apache-tomcat-8.5.23/bin/bootstrap.jar:/usr/local/tomcat/apache-tomcat-8.5.23/bin/tomcat-juli.jar\nTomcat started.\n</code></pre><h2 id=\"验证是否安装成功-1\"><a href=\"#验证是否安装成功-1\" class=\"headerlink\" title=\"验证是否安装成功\"></a>验证是否安装成功</h2><p>用浏览器输入{IP}:8080(默认为8080端口)。 PS：注意防火墙设置。</p>\n<h1 id=\"CentOS安装RabbitMq\"><a href=\"#CentOS安装RabbitMq\" class=\"headerlink\" title=\"CentOS安装RabbitMq\"></a>CentOS安装RabbitMq</h1><h2 id=\"安装Erlang\"><a href=\"#安装Erlang\" class=\"headerlink\" title=\"安装Erlang\"></a>安装Erlang</h2><p>使用SecureCRT连接虚拟机，开始准备安装Erlang。  </p>\n<pre><code>[root@localhost bin]# rpm -ivh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm\n[root@localhost bin]# yum install erlang\n安装  1 软件包 (+110 依赖软件包)\n\n总下载量：51 M\n安装大小：117 M\nIs this ok [y/d/N]: \n输入：y\n是否继续？[y/N]：\n输入: y\n</code></pre><h2 id=\"安装RabbitMq\"><a href=\"#安装RabbitMq\" class=\"headerlink\" title=\"安装RabbitMq\"></a>安装RabbitMq</h2><p>将rabbitmq-signing-key-public.asc、rabbitmq-server-3.3.5-1.noarch.rpm通过WInSCP放入root目录下。使用SecureCRT连接虚拟机，开始准备安装RabbitMq。  </p>\n<pre><code>[root@localhost ~]# rpm --import rabbitmq-signing-key-public.asc\n[root@localhost ~]# rpm -ivh rabbitmq-server-3.3.5-1.noarch.rpm\n准备中...                          ################################# [100%]\n正在升级/安装...\n1:rabbitmq-server-3.3.5-1          ################################# [100%]\n[root@localhost ~]# rabbitmq-plugins enable rabbitmq_management\nThe following plugins have been enabled:\nmochiweb\nwebmachine\nrabbitmq_web_dispatch\namqp_client\nrabbitmq_management_agent\nrabbitmq_management\nPlugin configuration has changed. Restart RabbitMQ for changes to take effect.\n[root@localhost ~]# chkconfig --level 3 rabbitmq-server on\n</code></pre><p>配置文件路径  </p>\n<pre><code>[root@localhost ~]# vi /etc/init.d/rabbitmq-server\n寻找行：PID_FILE=/var/run/rabbitmq/pid\n在以上内容之下，插入行\nexport RABBITMQ_MNESIA=/rabbitmq/mnesia\n</code></pre><p>配置访问权限  </p>\n<pre><code>[root@localhost ~]# chmod 644 /etc/rabbitmq/enabled_plugins\n</code></pre><p>启动RabbitMq  </p>\n<pre><code>[root@localhost ~]# service rabbitmq-server start\n[root@localhost ~]# rabbitmqctl add_user admin admin\n[root@localhost ~]# rabbitmqctl set_user_tags admin administrator\n</code></pre><p>验证RabbitMq<br>    用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)</p>\n<h2 id=\"配置RabbitMq集群\"><a href=\"#配置RabbitMq集群\" class=\"headerlink\" title=\"配置RabbitMq集群\"></a>配置RabbitMq集群</h2><p>修改hosts文件  </p>\n<pre><code>vi /etc/hosts\n将两台虚拟机的Ip配置进去：\n192.168.43.69 test1\n192.168.43.216 test2\n重启两台虚拟机reboot\n</code></pre><p>启动第一台虚拟机的Rabbitmq:  </p>\n<pre><code>service rabbitmq-server start\n将/var/lib/rabbitmq的.erlang.cookie文件拷贝到第二台虚拟机相同位置覆盖\n更改.erlang.cookie的访问权限为400\nchmod 400 /var/lib/rabbitmq/.erlang.cookie\n更改.erlang.cookie的文件所有人为rabbitmq\nchown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie\n启动第二台虚拟机的Rabbitmq：\nservice rabbitmq-server start\nrabbitmqctl stop_app\nrabbitmqctl join_cluster rabbit@test1\nrabbitmqctl start_app\n</code></pre><p>验证集群是否成功<br>用浏览器输入{Ip}:15672查看后管。(PS：注意防火墙)<br>PS：cookie文件会有两处都存在，root目录下cookie可以直接删除。如果使用虚拟机使用桥接模式，主机名hostname会自动修改成和hosts配置一致，如果使用仅主机网络等，hostname没有修改，可以使用hostnamectl set-hostname test1命令就行修改。</p>\n<p>软件包地址：<a href=\"http://download.csdn.net/download/anonymous_l/10021072\" target=\"_blank\" rel=\"noopener\">http://download.csdn.net/download/anonymous_l/10021072</a></p>\n"},{"title":" Hello，World！\t\t","id":"1","date":"2017-12-18T09:28:35.000Z","_content":"\n第一次搭建，有点小激动，感谢夏某某的服务器和指导。","source":"_posts/P9.md","raw":"---\ntitle: \" Hello，World！\\t\\t\"\nid: 1\ncategories:\n  - CentOS\n  - 杂项\ndate: 2017-12-18 17:28:35\ntags:\n---\n\n第一次搭建，有点小激动，感谢夏某某的服务器和指导。","slug":"P9","published":1,"updated":"2018-03-22T01:28:03.519Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmt001384gp5qqhf033","content":"<p>第一次搭建，有点小激动，感谢夏某某的服务器和指导。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>第一次搭建，有点小激动，感谢夏某某的服务器和指导。</p>\n"},{"title":"a=a++引发的思考","id":"67","date":"2018-04-26T02:20:31.000Z","author":["linxu"],"_content":"# 前言 #\n\n最近越来越感觉到java基础的重要性，开始重新拾起封存已久的《Thinking in java》,偶然的一个小案例引发了此次的思考。\n\n# Demo #\n\n首先一个小的demo：\n\n\tpublic class Test {\n\t\tpublic static void main(String[] args) {\n\t\t\tint a = 1;\n\t\t\tSystem.out.println(\"1:\"+ a);\n\t\t\ta++;\n\t\t\tSystem.out.println(\"2:\"+ a);\n\t\t\t++a;\n\t\t\tSystem.out.println(\"3:\"+ a);\n\t\t\ta = ++a;\n\t\t\tSystem.out.println(\"4:\"+ a);\n\t\t\ta = a++;\n\t\t\tSystem.out.println(\"5:\"+ a);\n\t\t\ta = a++ + ++a;\n\t\t\tSystem.out.println(\"6:\"+ a);\n\t\t\tint b = a++;\n\t\t\tSystem.out.println(\"7:\"+ a);\n\t\t\tSystem.out.println(\"8:\"+ b);\n\t\t}\n\t}\n\njava入门时都会遇到过的小案例，前三个答案相信都会随口而出，但是第四个才是此次探索的问题所在，上面答案如下：\n\t1:1\n\t2:2\n\t3:3\n\t4:4\n\t5:4\n\t6:10\n\t7:11\n\t8:10\n回答正确的可以绕过本篇文章，回答错误的跟笔者一起探索下去吧。\n\n# 代码分析 #\n1. a++ 和 ++a 区别不在过多赘述，a++是先执行表达式后++，++a是先++再执行表达式。\n2. a = ++a; 从上的结果可以得出a=3，此时a先++等于4，再赋值给a。此时a=4无异议。\n3. a = a++; 从上的结果可以得出a=4，此时a先被赋值为4，再执行++，此时a=5。为什么++未生效呢？这篇文章主要就是这个问题的探讨，具体原因可以参考下面对jVM的分析。\n4. a = a++ + a++; 从上的结果可以得出a=4，运算时第一个a仍为4，然后经过a++为5，又因为++a先执行++，此时a=6，所以结果4+6=10。\n5. b = a++; 从上的结果可以得出a=10，此时b先被a赋值为10,a再执行++为11。对比上面的第三点，此时++也生效，什么原因？见JVM分析。\n\n# JVM分析 #\n\n上述Demo可以通过java自带的javap查看字节码文件，命令如下：\n\tjavac Test.java\n\tjavap -c Test.class\n觉得分不清的可以分别对语句进行查看字节码文件，以下是笔者的探索过程。\n1. a++和++a的字节码分析(两个字节码基本相同)：\n\t   0: iconst_1\t\t\t\t\t1压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(1)存入局部变量1(a)\n       2: iinc          1, 1\t\t  变量1自加（a++或++a操作，自加后变量1的值为2）  \n\n2. a=++a的字节码分析：\n\t   0: iconst_3\t\t\t\t\t3压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(3)存入局部变量1(a)\n       2: iinc          1, 1\t\t  变量1自加（++a操作，自加后变量1的值为4）\n       5: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为4）\n       6: istore_1\t\t\t\t\t将栈顶值（4）存入变量1（=操作）\n\t\t\t\t\n3. a=a++的字节码分析：\n       0: iconst_4\t\t\t\t\t4压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(4)存入局部变量1(a)\n       2: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为4）\n       3: iinc          1, 1\t\t  变量1自加（a++操作，自加后变量1的值为5）\n       6: istore_1\t\t\t\t\t将栈顶值（4）存入变量1（=操作）  \n\n4. b=a++的字节码分析：\n       0: bipush        10\t\t\t10压入栈顶\n       2: istore_1\t\t\t\t\t栈顶值(10)存入局部变量1(a)\n       3: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为10）\n       4: iinc          1, 1\t\t  变量1自加（a++操作，自加后变量1的值为11）\n       7: istore_2\t\t\t\t\t栈顶值(10)存入局部变量2(b)（=操作）\n        \n从3可以看出a=a++,a++操作后并没有压入栈，返回a的值为栈顶值4，所以a从5又被赋值为4。对于1,2本质上只是对变量操作，并没有计算的赋值逻辑，对于4，变量b被赋值栈顶值为10，变量a自加后为11。以上为思考全过程，如果不足请指正。\n\n\n\n\n\n","source":"_posts/java a=a++引发的思考.md","raw":"---\ntitle: \"a=a++引发的思考\"\ntags:\n  - java基础\nid: 67\ncategories:\n  - java\ndate: 2018-04-26 10:20:31\nauthor: \n  - linxu\n---\n# 前言 #\n\n最近越来越感觉到java基础的重要性，开始重新拾起封存已久的《Thinking in java》,偶然的一个小案例引发了此次的思考。\n\n# Demo #\n\n首先一个小的demo：\n\n\tpublic class Test {\n\t\tpublic static void main(String[] args) {\n\t\t\tint a = 1;\n\t\t\tSystem.out.println(\"1:\"+ a);\n\t\t\ta++;\n\t\t\tSystem.out.println(\"2:\"+ a);\n\t\t\t++a;\n\t\t\tSystem.out.println(\"3:\"+ a);\n\t\t\ta = ++a;\n\t\t\tSystem.out.println(\"4:\"+ a);\n\t\t\ta = a++;\n\t\t\tSystem.out.println(\"5:\"+ a);\n\t\t\ta = a++ + ++a;\n\t\t\tSystem.out.println(\"6:\"+ a);\n\t\t\tint b = a++;\n\t\t\tSystem.out.println(\"7:\"+ a);\n\t\t\tSystem.out.println(\"8:\"+ b);\n\t\t}\n\t}\n\njava入门时都会遇到过的小案例，前三个答案相信都会随口而出，但是第四个才是此次探索的问题所在，上面答案如下：\n\t1:1\n\t2:2\n\t3:3\n\t4:4\n\t5:4\n\t6:10\n\t7:11\n\t8:10\n回答正确的可以绕过本篇文章，回答错误的跟笔者一起探索下去吧。\n\n# 代码分析 #\n1. a++ 和 ++a 区别不在过多赘述，a++是先执行表达式后++，++a是先++再执行表达式。\n2. a = ++a; 从上的结果可以得出a=3，此时a先++等于4，再赋值给a。此时a=4无异议。\n3. a = a++; 从上的结果可以得出a=4，此时a先被赋值为4，再执行++，此时a=5。为什么++未生效呢？这篇文章主要就是这个问题的探讨，具体原因可以参考下面对jVM的分析。\n4. a = a++ + a++; 从上的结果可以得出a=4，运算时第一个a仍为4，然后经过a++为5，又因为++a先执行++，此时a=6，所以结果4+6=10。\n5. b = a++; 从上的结果可以得出a=10，此时b先被a赋值为10,a再执行++为11。对比上面的第三点，此时++也生效，什么原因？见JVM分析。\n\n# JVM分析 #\n\n上述Demo可以通过java自带的javap查看字节码文件，命令如下：\n\tjavac Test.java\n\tjavap -c Test.class\n觉得分不清的可以分别对语句进行查看字节码文件，以下是笔者的探索过程。\n1. a++和++a的字节码分析(两个字节码基本相同)：\n\t   0: iconst_1\t\t\t\t\t1压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(1)存入局部变量1(a)\n       2: iinc          1, 1\t\t  变量1自加（a++或++a操作，自加后变量1的值为2）  \n\n2. a=++a的字节码分析：\n\t   0: iconst_3\t\t\t\t\t3压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(3)存入局部变量1(a)\n       2: iinc          1, 1\t\t  变量1自加（++a操作，自加后变量1的值为4）\n       5: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为4）\n       6: istore_1\t\t\t\t\t将栈顶值（4）存入变量1（=操作）\n\t\t\t\t\n3. a=a++的字节码分析：\n       0: iconst_4\t\t\t\t\t4压入栈顶\n       1: istore_1\t\t\t\t\t栈顶值(4)存入局部变量1(a)\n       2: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为4）\n       3: iinc          1, 1\t\t  变量1自加（a++操作，自加后变量1的值为5）\n       6: istore_1\t\t\t\t\t将栈顶值（4）存入变量1（=操作）  \n\n4. b=a++的字节码分析：\n       0: bipush        10\t\t\t10压入栈顶\n       2: istore_1\t\t\t\t\t栈顶值(10)存入局部变量1(a)\n       3: iload_1\t\t\t\t\t 变量1的值压入栈顶（值为10）\n       4: iinc          1, 1\t\t  变量1自加（a++操作，自加后变量1的值为11）\n       7: istore_2\t\t\t\t\t栈顶值(10)存入局部变量2(b)（=操作）\n        \n从3可以看出a=a++,a++操作后并没有压入栈，返回a的值为栈顶值4，所以a从5又被赋值为4。对于1,2本质上只是对变量操作，并没有计算的赋值逻辑，对于4，变量b被赋值栈顶值为10，变量a自加后为11。以上为思考全过程，如果不足请指正。\n\n\n\n\n\n","slug":"java a=a++引发的思考","published":1,"updated":"2018-04-28T03:19:35.145Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmu001684gpw1vldhyj","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>最近越来越感觉到java基础的重要性，开始重新拾起封存已久的《Thinking in java》,偶然的一个小案例引发了此次的思考。</p>\n<h1 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h1><p>首先一个小的demo：</p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        int a = 1;\n        System.out.println(&quot;1:&quot;+ a);\n        a++;\n        System.out.println(&quot;2:&quot;+ a);\n        ++a;\n        System.out.println(&quot;3:&quot;+ a);\n        a = ++a;\n        System.out.println(&quot;4:&quot;+ a);\n        a = a++;\n        System.out.println(&quot;5:&quot;+ a);\n        a = a++ + ++a;\n        System.out.println(&quot;6:&quot;+ a);\n        int b = a++;\n        System.out.println(&quot;7:&quot;+ a);\n        System.out.println(&quot;8:&quot;+ b);\n    }\n}\n</code></pre><p>java入门时都会遇到过的小案例，前三个答案相信都会随口而出，但是第四个才是此次探索的问题所在，上面答案如下：<br>    1:1<br>    2:2<br>    3:3<br>    4:4<br>    5:4<br>    6:10<br>    7:11<br>    8:10<br>回答正确的可以绕过本篇文章，回答错误的跟笔者一起探索下去吧。</p>\n<h1 id=\"代码分析\"><a href=\"#代码分析\" class=\"headerlink\" title=\"代码分析\"></a>代码分析</h1><ol>\n<li>a++ 和 ++a 区别不在过多赘述，a++是先执行表达式后++，++a是先++再执行表达式。</li>\n<li>a = ++a; 从上的结果可以得出a=3，此时a先++等于4，再赋值给a。此时a=4无异议。</li>\n<li>a = a++; 从上的结果可以得出a=4，此时a先被赋值为4，再执行++，此时a=5。为什么++未生效呢？这篇文章主要就是这个问题的探讨，具体原因可以参考下面对jVM的分析。</li>\n<li>a = a++ + a++; 从上的结果可以得出a=4，运算时第一个a仍为4，然后经过a++为5，又因为++a先执行++，此时a=6，所以结果4+6=10。</li>\n<li>b = a++; 从上的结果可以得出a=10，此时b先被a赋值为10,a再执行++为11。对比上面的第三点，此时++也生效，什么原因？见JVM分析。</li>\n</ol>\n<h1 id=\"JVM分析\"><a href=\"#JVM分析\" class=\"headerlink\" title=\"JVM分析\"></a>JVM分析</h1><p>上述Demo可以通过java自带的javap查看字节码文件，命令如下：<br>    javac Test.java<br>    javap -c Test.class<br>觉得分不清的可以分别对语句进行查看字节码文件，以下是笔者的探索过程。</p>\n<ol>\n<li><p>a++和++a的字节码分析(两个字节码基本相同)：</p>\n<pre><code>0: iconst_1                    1压入栈顶\n1: istore_1                    栈顶值(1)存入局部变量1(a)\n2: iinc          1, 1          变量1自加（a++或++a操作，自加后变量1的值为2）  \n</code></pre></li>\n<li><p>a=++a的字节码分析：</p>\n<pre><code>0: iconst_3                    3压入栈顶\n1: istore_1                    栈顶值(3)存入局部变量1(a)\n2: iinc          1, 1          变量1自加（++a操作，自加后变量1的值为4）\n5: iload_1                     变量1的值压入栈顶（值为4）\n6: istore_1                    将栈顶值（4）存入变量1（=操作）\n</code></pre></li>\n<li><p>a=a++的字节码分析：</p>\n<pre><code>0: iconst_4                    4压入栈顶\n1: istore_1                    栈顶值(4)存入局部变量1(a)\n2: iload_1                     变量1的值压入栈顶（值为4）\n3: iinc          1, 1          变量1自加（a++操作，自加后变量1的值为5）\n6: istore_1                    将栈顶值（4）存入变量1（=操作）  \n</code></pre></li>\n<li><p>b=a++的字节码分析：</p>\n<pre><code>0: bipush        10            10压入栈顶\n2: istore_1                    栈顶值(10)存入局部变量1(a)\n3: iload_1                     变量1的值压入栈顶（值为10）\n4: iinc          1, 1          变量1自加（a++操作，自加后变量1的值为11）\n7: istore_2                    栈顶值(10)存入局部变量2(b)（=操作）\n</code></pre></li>\n</ol>\n<p>从3可以看出a=a++,a++操作后并没有压入栈，返回a的值为栈顶值4，所以a从5又被赋值为4。对于1,2本质上只是对变量操作，并没有计算的赋值逻辑，对于4，变量b被赋值栈顶值为10，变量a自加后为11。以上为思考全过程，如果不足请指正。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>最近越来越感觉到java基础的重要性，开始重新拾起封存已久的《Thinking in java》,偶然的一个小案例引发了此次的思考。</p>\n<h1 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h1><p>首先一个小的demo：</p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        int a = 1;\n        System.out.println(&quot;1:&quot;+ a);\n        a++;\n        System.out.println(&quot;2:&quot;+ a);\n        ++a;\n        System.out.println(&quot;3:&quot;+ a);\n        a = ++a;\n        System.out.println(&quot;4:&quot;+ a);\n        a = a++;\n        System.out.println(&quot;5:&quot;+ a);\n        a = a++ + ++a;\n        System.out.println(&quot;6:&quot;+ a);\n        int b = a++;\n        System.out.println(&quot;7:&quot;+ a);\n        System.out.println(&quot;8:&quot;+ b);\n    }\n}\n</code></pre><p>java入门时都会遇到过的小案例，前三个答案相信都会随口而出，但是第四个才是此次探索的问题所在，上面答案如下：<br>    1:1<br>    2:2<br>    3:3<br>    4:4<br>    5:4<br>    6:10<br>    7:11<br>    8:10<br>回答正确的可以绕过本篇文章，回答错误的跟笔者一起探索下去吧。</p>\n<h1 id=\"代码分析\"><a href=\"#代码分析\" class=\"headerlink\" title=\"代码分析\"></a>代码分析</h1><ol>\n<li>a++ 和 ++a 区别不在过多赘述，a++是先执行表达式后++，++a是先++再执行表达式。</li>\n<li>a = ++a; 从上的结果可以得出a=3，此时a先++等于4，再赋值给a。此时a=4无异议。</li>\n<li>a = a++; 从上的结果可以得出a=4，此时a先被赋值为4，再执行++，此时a=5。为什么++未生效呢？这篇文章主要就是这个问题的探讨，具体原因可以参考下面对jVM的分析。</li>\n<li>a = a++ + a++; 从上的结果可以得出a=4，运算时第一个a仍为4，然后经过a++为5，又因为++a先执行++，此时a=6，所以结果4+6=10。</li>\n<li>b = a++; 从上的结果可以得出a=10，此时b先被a赋值为10,a再执行++为11。对比上面的第三点，此时++也生效，什么原因？见JVM分析。</li>\n</ol>\n<h1 id=\"JVM分析\"><a href=\"#JVM分析\" class=\"headerlink\" title=\"JVM分析\"></a>JVM分析</h1><p>上述Demo可以通过java自带的javap查看字节码文件，命令如下：<br>    javac Test.java<br>    javap -c Test.class<br>觉得分不清的可以分别对语句进行查看字节码文件，以下是笔者的探索过程。</p>\n<ol>\n<li><p>a++和++a的字节码分析(两个字节码基本相同)：</p>\n<pre><code>0: iconst_1                    1压入栈顶\n1: istore_1                    栈顶值(1)存入局部变量1(a)\n2: iinc          1, 1          变量1自加（a++或++a操作，自加后变量1的值为2）  \n</code></pre></li>\n<li><p>a=++a的字节码分析：</p>\n<pre><code>0: iconst_3                    3压入栈顶\n1: istore_1                    栈顶值(3)存入局部变量1(a)\n2: iinc          1, 1          变量1自加（++a操作，自加后变量1的值为4）\n5: iload_1                     变量1的值压入栈顶（值为4）\n6: istore_1                    将栈顶值（4）存入变量1（=操作）\n</code></pre></li>\n<li><p>a=a++的字节码分析：</p>\n<pre><code>0: iconst_4                    4压入栈顶\n1: istore_1                    栈顶值(4)存入局部变量1(a)\n2: iload_1                     变量1的值压入栈顶（值为4）\n3: iinc          1, 1          变量1自加（a++操作，自加后变量1的值为5）\n6: istore_1                    将栈顶值（4）存入变量1（=操作）  \n</code></pre></li>\n<li><p>b=a++的字节码分析：</p>\n<pre><code>0: bipush        10            10压入栈顶\n2: istore_1                    栈顶值(10)存入局部变量1(a)\n3: iload_1                     变量1的值压入栈顶（值为10）\n4: iinc          1, 1          变量1自加（a++操作，自加后变量1的值为11）\n7: istore_2                    栈顶值(10)存入局部变量2(b)（=操作）\n</code></pre></li>\n</ol>\n<p>从3可以看出a=a++,a++操作后并没有压入栈，返回a的值为栈顶值4，所以a从5又被赋值为4。对于1,2本质上只是对变量操作，并没有计算的赋值逻辑，对于4，变量b被赋值栈顶值为10，变量a自加后为11。以上为思考全过程，如果不足请指正。</p>\n"},{"title":" 网站同时支持http和https访问\t\t","id":"133","date":"2018-01-29T07:08:53.000Z","_content":"\n1.在腾讯云申请SSL证书https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。\n\n2.证书申请成功后，下载证书上传到服务器，将crt和key两个文件放到/usr/local/httpscrt文件夹中\n\n3.修改nginx配置文件如下：  \n\n\tvi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n\t#转发给wordpress网站\n\tserver {\n    \tlisten 80;\n    \tlisten 443 ssl;     #此处监听443端口，https默认443，下面注释ssl on同时支持http和https\n    \tserver_name www.reallinxu.com;        \n    \taccess_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    \terror_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n    \t#ssl on;    #此处注释\n    \tssl_certificate /usr/local/httpscrt/1_www.reallinxu.com_bundle.crt;  #证书位置\n    \tssl_certificate_key /usr/local/httpscrt/2_www.reallinxu.com.key;   #key位置\n\n    \tlocation / {\n             root /data/www/www.reallinxu.com;\n             index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n             try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    \t}\n\n    \terror_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    \tlocation = /404.html {            #这是一个典型的location\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \terror_page 500 502 503 504 /50x.html;\n    \tlocation = /50x.html {\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \t# 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    \tlocation ~ [^/]\\.php(/|$) {\n             root /data/www/www.reallinxu.com;\n             fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n             if (!-f $document_root$fastcgi_script_name) {\n                     return 404;\n             }\n             #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n             # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n             fastcgi_pass 127.0.0.1:9000;\n             fastcgi_index index.php;\n             fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n             include fastcgi_params;\n    \t}\n    \tlocation ~ /\\.ht {\n             deny all;\n    \t}\n\n    \trewrite /wp-admin$ $scheme://$host$uri/ permanent;\n \t}\n\n4.重启nginx即可。","source":"_posts/P8.md","raw":"---\ntitle: \" 网站同时支持http和https访问\\t\\t\"\nid: 133\ncategories:\n  - WordPress\ndate: 2018-01-29 15:08:53\ntags:\n---\n\n1.在腾讯云申请SSL证书https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。\n\n2.证书申请成功后，下载证书上传到服务器，将crt和key两个文件放到/usr/local/httpscrt文件夹中\n\n3.修改nginx配置文件如下：  \n\n\tvi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n\t#转发给wordpress网站\n\tserver {\n    \tlisten 80;\n    \tlisten 443 ssl;     #此处监听443端口，https默认443，下面注释ssl on同时支持http和https\n    \tserver_name www.reallinxu.com;        \n    \taccess_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    \terror_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n    \t#ssl on;    #此处注释\n    \tssl_certificate /usr/local/httpscrt/1_www.reallinxu.com_bundle.crt;  #证书位置\n    \tssl_certificate_key /usr/local/httpscrt/2_www.reallinxu.com.key;   #key位置\n\n    \tlocation / {\n             root /data/www/www.reallinxu.com;\n             index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n             try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    \t}\n\n    \terror_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    \tlocation = /404.html {            #这是一个典型的location\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \terror_page 500 502 503 504 /50x.html;\n    \tlocation = /50x.html {\n             root /data/www/www.reallinxu.com;\n    \t}\n\n    \t# 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    \tlocation ~ [^/]\\.php(/|$) {\n             root /data/www/www.reallinxu.com;\n             fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n             if (!-f $document_root$fastcgi_script_name) {\n                     return 404;\n             }\n             #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n             # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n             fastcgi_pass 127.0.0.1:9000;\n             fastcgi_index index.php;\n             fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n             include fastcgi_params;\n    \t}\n    \tlocation ~ /\\.ht {\n             deny all;\n    \t}\n\n    \trewrite /wp-admin$ $scheme://$host$uri/ permanent;\n \t}\n\n4.重启nginx即可。","slug":"P8","published":1,"updated":"2018-05-10T02:27:55.781Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjhqzbtmx001784gpic007nn2","content":"<p>1.在腾讯云申请SSL证书<a href=\"https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。\" target=\"_blank\" rel=\"noopener\">https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。</a></p>\n<p>2.证书申请成功后，下载证书上传到服务器，将crt和key两个文件放到/usr/local/httpscrt文件夹中</p>\n<p>3.修改nginx配置文件如下：  </p>\n<pre><code>vi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n#转发给wordpress网站\nserver {\n    listen 80;\n    listen 443 ssl;     #此处监听443端口，https默认443，下面注释ssl on同时支持http和https\n    server_name www.reallinxu.com;        \n    access_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    error_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n    #ssl on;    #此处注释\n    ssl_certificate /usr/local/httpscrt/1_www.reallinxu.com_bundle.crt;  #证书位置\n    ssl_certificate_key /usr/local/httpscrt/2_www.reallinxu.com.key;   #key位置\n\n    location / {\n         root /data/www/www.reallinxu.com;\n         index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n         try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    }\n\n    error_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    location = /404.html {            #这是一个典型的location\n         root /data/www/www.reallinxu.com;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n         root /data/www/www.reallinxu.com;\n    }\n\n    # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    location ~ [^/]\\.php(/|$) {\n         root /data/www/www.reallinxu.com;\n         fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n         if (!-f $document_root$fastcgi_script_name) {\n                 return 404;\n         }\n         #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n         # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n         fastcgi_pass 127.0.0.1:9000;\n         fastcgi_index index.php;\n         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         include fastcgi_params;\n    }\n    location ~ /\\.ht {\n         deny all;\n    }\n\n    rewrite /wp-admin$ $scheme://$host$uri/ permanent;\n }\n</code></pre><p>4.重启nginx即可。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.在腾讯云申请SSL证书<a href=\"https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。\" target=\"_blank\" rel=\"noopener\">https://buy.cloud.tencent.com/ssl?fromSource=ssl，此时选择了个人配置DNS，具体使用方法请参照官网说明。</a></p>\n<p>2.证书申请成功后，下载证书上传到服务器，将crt和key两个文件放到/usr/local/httpscrt文件夹中</p>\n<p>3.修改nginx配置文件如下：  </p>\n<pre><code>vi /etc/nginx/conf.d/virtual.conf     #没有该文件，直接新建，内容如下\n#转发给wordpress网站\nserver {\n    listen 80;\n    listen 443 ssl;     #此处监听443端口，https默认443，下面注释ssl on同时支持http和https\n    server_name www.reallinxu.com;        \n    access_log /var/log/nginx/aaa/access.log;   #access_log属于ngx_http_log_module的设置, 缺省level为info\n    error_log /var/log/nginx/aaa/error.log;     #error_log属于core module, 缺省的level是error \n    #ssl on;    #此处注释\n    ssl_certificate /usr/local/httpscrt/1_www.reallinxu.com_bundle.crt;  #证书位置\n    ssl_certificate_key /usr/local/httpscrt/2_www.reallinxu.com.key;   #key位置\n\n    location / {\n         root /data/www/www.reallinxu.com;\n         index index.php index.html index.htm;     #由于是PHP类型的动态页面为主，所以把index.php放在前面效率会更高些\n         try_files $uri $uri/ /index.php?$args;   #普通php网站因为没有rewrite的话，这个不需要\n    }\n\n    error_page 404 /404.html;         #error_page errcode uri (也就是说出现了404错误，会请求/404.html)\n    location = /404.html {            #这是一个典型的location\n         root /data/www/www.reallinxu.com;\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n         root /data/www/www.reallinxu.com;\n    }\n\n    # 这种写法可以防止把恶意程序伪装成.jpg之类的攻击，（其实有个更简单的方法，就是把php.ini中的cgi.fix_pathinfo=0，但有时候简单的修改cgi.fix_pathinfo会造成有的php脚本出错)\n    location ~ [^/]\\.php(/|$) {\n         root /data/www/www.reallinxu.com;\n         fastcgi_split_path_info ^(.+?\\.php)(/.*)$;\n         if (!-f $document_root$fastcgi_script_name) {\n                 return 404;\n         }\n         #try_files $uri =404;         #这个try_files说明：对于.php文件，直接执行$uri, 如果找不到这个$uri,直接给出404错误，（和 location / 定义不同！），主要是为了防止 伪装成图片的攻击  (目前看，最安全的方式，是用上面那一句话，官方推荐的）\n         # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n         fastcgi_pass 127.0.0.1:9000;\n         fastcgi_index index.php;\n         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         include fastcgi_params;\n    }\n    location ~ /\\.ht {\n         deny all;\n    }\n\n    rewrite /wp-admin$ $scheme://$host$uri/ permanent;\n }\n</code></pre><p>4.重启nginx即可。</p>\n"},{"title":"Docker容器中搭建Redis集群","id":"523","date":"2018-05-30T10:00:00.000Z","author":["linxu"],"_content":"\n# Redis简介 #\nRedis为传说中的内存数据库的一种，运行在内存中，性能强大，还可以用作缓存和消息中间件。Redis支持多种数据结构的存储，提供了大部分平台的客户端，使用方便。\n\n# Redis优缺点 #\n## 优点 ##\n1. 性能极高：Redis能读的速度是110000次/s,写的速度是81000次/s。\n2. 丰富的数据类型：Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。\n3. 原子：Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。\n4. 丰富的特性：Redis还支持 publish/subscribe, 通知, key 过期等等特性。\n\n## 缺点 ##\n1. Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。\n2. 主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。\n3. redis的主从复制采用全量复制，从机新加入集群或者从机和主机网络断开重连时都会进行，复制过程中主机会fork出一个子进程对内存做一份快照，并将内存快照保存为文件发送给从机，需要保证主机的内存足够。若快照文件较大，将影响集群的服务能力。\n4. Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。所以运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。\n\n# Docker中搭建Redis集群 #\n## Dockerfile文件 ##\n将redis-4.0.6.tar.gz,ruby-2.5.0.tar.gz,openssl-1.1.1-pre7.tar.gz文件放入Dockerfile同目录\n```\nfrom centos\nMAINTAINER reallinxu\n\nCOPY redis-4.0.6.tar.gz /usr/software/redis-4.0.6.tar.gz\nRUN mkdir /usr/redis\nRUN tar xzf /usr/software/redis-4.0.6.tar.gz -C /usr/redis\nRUN yum -y install gcc automake autoconf libtool make\nRUN cd /usr/redis/redis-4.0.6 && make\nCOPY ruby-2.5.0.tar.gz /usr/software/ruby-2.5.0.tar.gz\nRUN mkdir /usr/ruby\nRUN tar xzf /usr/software/ruby-2.5.0.tar.gz -C /usr/ruby\nRUN cd /usr/ruby/ruby-2.5.0 && ./configure && ls Makefile && make && make install\nRUN yum install -y rubygems\nRUN yum install -y zlib-devel\nCOPY openssl-1.1.1-pre7.tar.gz /usr/software/openssl-1.1.1-pre7.tar.gz\nRUN mkdir /usr/openssl\nRUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl\nRUN cd /usr/openssl/openssl-1.1.1-pre7 && ./config -fPIC --prefix=/usr/local/openssl enable-shared && ./config -t && make && make install\nRUN cd /usr/ruby/ruby-2.5.0/ext/zlib && ruby ./extconf.rb && sed -i 's/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/' Makefile && make && make install \nRUN cd /usr/ruby/ruby-2.5.0/ext/openssl && ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib && sed -i 's/$(top_srcdir)/..\\/../g' Makefile && make && make install\nRUN gem install redis\nRUN sed -i 's/daemonize no/daemonize yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/dir .\\//dir \\/usr\\/redis\\//' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-enabled yes/cluster-enabled yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-config-file nodes-6379.conf/cluster-config-file nodes-6379.conf/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-node-timeout 15000/cluster-node-timeout 15000/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/appendonly no/appendonly yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN rm -rf /usr/software/redis-4.0.6.tar.gz\nRUN rm -rf /usr/software/ruby-2.5.0.tar.gz\nRUN rm -rf /usr/software/openssl-1.1.1-pre7.tar.gz\nEXPOSE 6379\n```\n\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/redis:v1\" .\n```\n## 创建容器 ##\nredis集群需要最少6个节点，3+3模式,所以用以下命令创建6个容器\n```\ndocker run -i -t --name redis1 reallinxu/redis:v1\ndocker run -i -t --name redis2 reallinxu/redis:v1\ndocker run -i -t --name redis3 reallinxu/redis:v1\ndocker run -i -t --name redis4 reallinxu/redis:v1\ndocker run -i -t --name redis5 reallinxu/redis:v1\ndocker run -i -t --name redis6 reallinxu/redis:v1\n```\n## 构建集群 ##\n分别对六台做以下操作：\n1. 查看容器ip\n```\ncat /etc/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.2      263989ddf7e2\n```\n2. 修改redis配置\n```\nvi /usr/redis/redis-4.0.6/redis.conf\n找到 bind 127.0.0.1\n改为 bind 172.17.0.2 #对应容器的ip\n```\n3. 启动redis\n```\ncd /usr/redis/redis-4.0.6/src\n./redis-server ../redis.conf\n```\n\n启动六台后实现集群\n```\n./redis-trib.rb create --replicas 1 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 172.17.0.5:6379 172.17.0.6:6379 172.17.0.7:6379  \n```\n## 测试redis集群 ##\n```\n./redis-cli  -c -h 172.17.0.3 -p 6379  \n172.17.0.3:6379> set a 1\n-> Redirected to slot [15495] located at 172.17.0.4:6379\nOK\n172.17.0.3:6379> get a\n-> Redirected to slot [15495] located at 172.17.0.4:6379\n\"1\"\n172.17.0.4:6379> exit\n```\n\n## 遇到的错误 ##\n1. -bash: make: command not found\n解决：安装gcc \n```\nyum -y install gcc automake autoconf libtool make\n```\n2. ERROR:  Loading command: install (LoadError) cannot load such file -- zlib\n解决：需要依赖zlib工具\n```\nyum install -y zlib-devel\n```\n3. Could not create Makefile due to some reason, probably lack of necessary\n解决：zlib需要安装到本地运行库\n```\ncd /usr/ruby/ruby-2.5.0/ext/zlib \nruby ./extconf.rb\nmake\nmake install \n```\n4. make: *** No rule to make target `/include/ruby.h', needed by `zlib.o'.  Stop\n解决：修改makefile文件\n```\nsed -i 's/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/' Makefile \nmake\nmake install\n```\n5. while executing gem ...(Gem:Exception) Unable to require openssl\n解决：需要安装openssl\n```\nwget https://www.openssl.org/source/openssl-1.1.1-pre7.tar.gz\nRUN mkdir /usr/openssl\nRUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl\nRUN cd /usr/openssl/openssl-1.1.1-pre7\n./config -fPIC --prefix=/usr/local/openssl enable-shared  \n./config -t  \nmake  \nmake install\n还需要安装到本地库\ncd /usr/ruby/ruby-2.5.0/ext/openssl\nruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib\nmake\nmake install\n```\n6. make: *** No rule to make target `/include/ruby.h', needed by `ossl.o'.  Stop\n解决：修改makefile文件\n```\nsed -i 's/$(top_srcdir)/..\\/../g' Makefile\nmake\nmake install\n```","source":"_posts/Docker容器中搭建Redis集群.md","raw":"---\ntitle: \"Docker容器中搭建Redis集群\"\ntags:\n  - noname\nid: 523\ncategories:\n  - noname\ndate: 2018-05-30 18:00:00\nauthor: \n  - linxu\n---\n\n# Redis简介 #\nRedis为传说中的内存数据库的一种，运行在内存中，性能强大，还可以用作缓存和消息中间件。Redis支持多种数据结构的存储，提供了大部分平台的客户端，使用方便。\n\n# Redis优缺点 #\n## 优点 ##\n1. 性能极高：Redis能读的速度是110000次/s,写的速度是81000次/s。\n2. 丰富的数据类型：Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。\n3. 原子：Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。\n4. 丰富的特性：Redis还支持 publish/subscribe, 通知, key 过期等等特性。\n\n## 缺点 ##\n1. Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。\n2. 主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。\n3. redis的主从复制采用全量复制，从机新加入集群或者从机和主机网络断开重连时都会进行，复制过程中主机会fork出一个子进程对内存做一份快照，并将内存快照保存为文件发送给从机，需要保证主机的内存足够。若快照文件较大，将影响集群的服务能力。\n4. Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。所以运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。\n\n# Docker中搭建Redis集群 #\n## Dockerfile文件 ##\n将redis-4.0.6.tar.gz,ruby-2.5.0.tar.gz,openssl-1.1.1-pre7.tar.gz文件放入Dockerfile同目录\n```\nfrom centos\nMAINTAINER reallinxu\n\nCOPY redis-4.0.6.tar.gz /usr/software/redis-4.0.6.tar.gz\nRUN mkdir /usr/redis\nRUN tar xzf /usr/software/redis-4.0.6.tar.gz -C /usr/redis\nRUN yum -y install gcc automake autoconf libtool make\nRUN cd /usr/redis/redis-4.0.6 && make\nCOPY ruby-2.5.0.tar.gz /usr/software/ruby-2.5.0.tar.gz\nRUN mkdir /usr/ruby\nRUN tar xzf /usr/software/ruby-2.5.0.tar.gz -C /usr/ruby\nRUN cd /usr/ruby/ruby-2.5.0 && ./configure && ls Makefile && make && make install\nRUN yum install -y rubygems\nRUN yum install -y zlib-devel\nCOPY openssl-1.1.1-pre7.tar.gz /usr/software/openssl-1.1.1-pre7.tar.gz\nRUN mkdir /usr/openssl\nRUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl\nRUN cd /usr/openssl/openssl-1.1.1-pre7 && ./config -fPIC --prefix=/usr/local/openssl enable-shared && ./config -t && make && make install\nRUN cd /usr/ruby/ruby-2.5.0/ext/zlib && ruby ./extconf.rb && sed -i 's/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/' Makefile && make && make install \nRUN cd /usr/ruby/ruby-2.5.0/ext/openssl && ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib && sed -i 's/$(top_srcdir)/..\\/../g' Makefile && make && make install\nRUN gem install redis\nRUN sed -i 's/daemonize no/daemonize yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/dir .\\//dir \\/usr\\/redis\\//' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-enabled yes/cluster-enabled yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-config-file nodes-6379.conf/cluster-config-file nodes-6379.conf/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/# cluster-node-timeout 15000/cluster-node-timeout 15000/' /usr/redis/redis-4.0.6/redis.conf\nRUN sed -i 's/appendonly no/appendonly yes/' /usr/redis/redis-4.0.6/redis.conf\nRUN rm -rf /usr/software/redis-4.0.6.tar.gz\nRUN rm -rf /usr/software/ruby-2.5.0.tar.gz\nRUN rm -rf /usr/software/openssl-1.1.1-pre7.tar.gz\nEXPOSE 6379\n```\n\n## 构建镜像 ##\n```\ndocker build -t=\"reallinxu/redis:v1\" .\n```\n## 创建容器 ##\nredis集群需要最少6个节点，3+3模式,所以用以下命令创建6个容器\n```\ndocker run -i -t --name redis1 reallinxu/redis:v1\ndocker run -i -t --name redis2 reallinxu/redis:v1\ndocker run -i -t --name redis3 reallinxu/redis:v1\ndocker run -i -t --name redis4 reallinxu/redis:v1\ndocker run -i -t --name redis5 reallinxu/redis:v1\ndocker run -i -t --name redis6 reallinxu/redis:v1\n```\n## 构建集群 ##\n分别对六台做以下操作：\n1. 查看容器ip\n```\ncat /etc/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.2      263989ddf7e2\n```\n2. 修改redis配置\n```\nvi /usr/redis/redis-4.0.6/redis.conf\n找到 bind 127.0.0.1\n改为 bind 172.17.0.2 #对应容器的ip\n```\n3. 启动redis\n```\ncd /usr/redis/redis-4.0.6/src\n./redis-server ../redis.conf\n```\n\n启动六台后实现集群\n```\n./redis-trib.rb create --replicas 1 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 172.17.0.5:6379 172.17.0.6:6379 172.17.0.7:6379  \n```\n## 测试redis集群 ##\n```\n./redis-cli  -c -h 172.17.0.3 -p 6379  \n172.17.0.3:6379> set a 1\n-> Redirected to slot [15495] located at 172.17.0.4:6379\nOK\n172.17.0.3:6379> get a\n-> Redirected to slot [15495] located at 172.17.0.4:6379\n\"1\"\n172.17.0.4:6379> exit\n```\n\n## 遇到的错误 ##\n1. -bash: make: command not found\n解决：安装gcc \n```\nyum -y install gcc automake autoconf libtool make\n```\n2. ERROR:  Loading command: install (LoadError) cannot load such file -- zlib\n解决：需要依赖zlib工具\n```\nyum install -y zlib-devel\n```\n3. Could not create Makefile due to some reason, probably lack of necessary\n解决：zlib需要安装到本地运行库\n```\ncd /usr/ruby/ruby-2.5.0/ext/zlib \nruby ./extconf.rb\nmake\nmake install \n```\n4. make: *** No rule to make target `/include/ruby.h', needed by `zlib.o'.  Stop\n解决：修改makefile文件\n```\nsed -i 's/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/' Makefile \nmake\nmake install\n```\n5. while executing gem ...(Gem:Exception) Unable to require openssl\n解决：需要安装openssl\n```\nwget https://www.openssl.org/source/openssl-1.1.1-pre7.tar.gz\nRUN mkdir /usr/openssl\nRUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl\nRUN cd /usr/openssl/openssl-1.1.1-pre7\n./config -fPIC --prefix=/usr/local/openssl enable-shared  \n./config -t  \nmake  \nmake install\n还需要安装到本地库\ncd /usr/ruby/ruby-2.5.0/ext/openssl\nruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib\nmake\nmake install\n```\n6. make: *** No rule to make target `/include/ruby.h', needed by `ossl.o'.  Stop\n解决：修改makefile文件\n```\nsed -i 's/$(top_srcdir)/..\\/../g' Makefile\nmake\nmake install\n```","slug":"Docker容器中搭建Redis集群","published":1,"updated":"2018-05-30T10:13:13.384Z","_id":"cjhseoe5f0000k4gpa4f83472","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Redis简介\"><a href=\"#Redis简介\" class=\"headerlink\" title=\"Redis简介\"></a>Redis简介</h1><p>Redis为传说中的内存数据库的一种，运行在内存中，性能强大，还可以用作缓存和消息中间件。Redis支持多种数据结构的存储，提供了大部分平台的客户端，使用方便。</p>\n<h1 id=\"Redis优缺点\"><a href=\"#Redis优缺点\" class=\"headerlink\" title=\"Redis优缺点\"></a>Redis优缺点</h1><h2 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h2><ol>\n<li>性能极高：Redis能读的速度是110000次/s,写的速度是81000次/s。</li>\n<li>丰富的数据类型：Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li>\n<li>原子：Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</li>\n<li>丰富的特性：Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>\n</ol>\n<h2 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h2><ol>\n<li>Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。</li>\n<li>主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。</li>\n<li>redis的主从复制采用全量复制，从机新加入集群或者从机和主机网络断开重连时都会进行，复制过程中主机会fork出一个子进程对内存做一份快照，并将内存快照保存为文件发送给从机，需要保证主机的内存足够。若快照文件较大，将影响集群的服务能力。</li>\n<li>Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。所以运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。</li>\n</ol>\n<h1 id=\"Docker中搭建Redis集群\"><a href=\"#Docker中搭建Redis集群\" class=\"headerlink\" title=\"Docker中搭建Redis集群\"></a>Docker中搭建Redis集群</h1><h2 id=\"Dockerfile文件\"><a href=\"#Dockerfile文件\" class=\"headerlink\" title=\"Dockerfile文件\"></a>Dockerfile文件</h2><p>将redis-4.0.6.tar.gz,ruby-2.5.0.tar.gz,openssl-1.1.1-pre7.tar.gz文件放入Dockerfile同目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">COPY redis-4.0.6.tar.gz /usr/software/redis-4.0.6.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/redis</span><br><span class=\"line\">RUN tar xzf /usr/software/redis-4.0.6.tar.gz -C /usr/redis</span><br><span class=\"line\">RUN yum -y install gcc automake autoconf libtool make</span><br><span class=\"line\">RUN cd /usr/redis/redis-4.0.6 &amp;&amp; make</span><br><span class=\"line\">COPY ruby-2.5.0.tar.gz /usr/software/ruby-2.5.0.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/ruby</span><br><span class=\"line\">RUN tar xzf /usr/software/ruby-2.5.0.tar.gz -C /usr/ruby</span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0 &amp;&amp; ./configure &amp;&amp; ls Makefile &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN yum install -y rubygems</span><br><span class=\"line\">RUN yum install -y zlib-devel</span><br><span class=\"line\">COPY openssl-1.1.1-pre7.tar.gz /usr/software/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/openssl</span><br><span class=\"line\">RUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl</span><br><span class=\"line\">RUN cd /usr/openssl/openssl-1.1.1-pre7 &amp;&amp; ./config -fPIC --prefix=/usr/local/openssl enable-shared &amp;&amp; ./config -t &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0/ext/zlib &amp;&amp; ruby ./extconf.rb &amp;&amp; sed -i &apos;s/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/&apos; Makefile &amp;&amp; make &amp;&amp; make install </span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0/ext/openssl &amp;&amp; ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib &amp;&amp; sed -i &apos;s/$(top_srcdir)/..\\/../g&apos; Makefile &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN gem install redis</span><br><span class=\"line\">RUN sed -i &apos;s/daemonize no/daemonize yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/dir .\\//dir \\/usr\\/redis\\//&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-enabled yes/cluster-enabled yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-config-file nodes-6379.conf/cluster-config-file nodes-6379.conf/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-node-timeout 15000/cluster-node-timeout 15000/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/appendonly no/appendonly yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN rm -rf /usr/software/redis-4.0.6.tar.gz</span><br><span class=\"line\">RUN rm -rf /usr/software/ruby-2.5.0.tar.gz</span><br><span class=\"line\">RUN rm -rf /usr/software/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">EXPOSE 6379</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/redis:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h2><p>redis集群需要最少6个节点，3+3模式,所以用以下命令创建6个容器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t --name redis1 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis2 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis3 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis4 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis5 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis6 reallinxu/redis:v1</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建集群\"><a href=\"#构建集群\" class=\"headerlink\" title=\"构建集群\"></a>构建集群</h2><p>分别对六台做以下操作：</p>\n<ol>\n<li><p>查看容器ip</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.2      263989ddf7e2</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改redis配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">找到 bind 127.0.0.1</span><br><span class=\"line\">改为 bind 172.17.0.2 #对应容器的ip</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动redis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/redis/redis-4.0.6/src</span><br><span class=\"line\">./redis-server ../redis.conf</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>启动六台后实现集群<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./redis-trib.rb create --replicas 1 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 172.17.0.5:6379 172.17.0.6:6379 172.17.0.7:6379</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"测试redis集群\"><a href=\"#测试redis集群\" class=\"headerlink\" title=\"测试redis集群\"></a>测试redis集群</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./redis-cli  -c -h 172.17.0.3 -p 6379  </span><br><span class=\"line\">172.17.0.3:6379&gt; set a 1</span><br><span class=\"line\">-&gt; Redirected to slot [15495] located at 172.17.0.4:6379</span><br><span class=\"line\">OK</span><br><span class=\"line\">172.17.0.3:6379&gt; get a</span><br><span class=\"line\">-&gt; Redirected to slot [15495] located at 172.17.0.4:6379</span><br><span class=\"line\">&quot;1&quot;</span><br><span class=\"line\">172.17.0.4:6379&gt; exit</span><br></pre></td></tr></table></figure>\n<h2 id=\"遇到的错误\"><a href=\"#遇到的错误\" class=\"headerlink\" title=\"遇到的错误\"></a>遇到的错误</h2><ol>\n<li><p>-bash: make: command not found<br>解决：安装gcc </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc automake autoconf libtool make</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ERROR:  Loading command: install (LoadError) cannot load such file – zlib<br>解决：需要依赖zlib工具</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib-devel</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Could not create Makefile due to some reason, probably lack of necessary<br>解决：zlib需要安装到本地运行库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/ruby/ruby-2.5.0/ext/zlib </span><br><span class=\"line\">ruby ./extconf.rb</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>make: *** No rule to make target <code>/include/ruby.h&#39;, needed by</code>zlib.o’.  Stop<br>解决：修改makefile文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &apos;s/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/&apos; Makefile </span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>while executing gem …(Gem:Exception) Unable to require openssl<br>解决：需要安装openssl</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.openssl.org/source/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/openssl</span><br><span class=\"line\">RUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl</span><br><span class=\"line\">RUN cd /usr/openssl/openssl-1.1.1-pre7</span><br><span class=\"line\">./config -fPIC --prefix=/usr/local/openssl enable-shared  </span><br><span class=\"line\">./config -t  </span><br><span class=\"line\">make  </span><br><span class=\"line\">make install</span><br><span class=\"line\">还需要安装到本地库</span><br><span class=\"line\">cd /usr/ruby/ruby-2.5.0/ext/openssl</span><br><span class=\"line\">ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>make: *** No rule to make target <code>/include/ruby.h&#39;, needed by</code>ossl.o’.  Stop<br>解决：修改makefile文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &apos;s/$(top_srcdir)/..\\/../g&apos; Makefile</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Redis简介\"><a href=\"#Redis简介\" class=\"headerlink\" title=\"Redis简介\"></a>Redis简介</h1><p>Redis为传说中的内存数据库的一种，运行在内存中，性能强大，还可以用作缓存和消息中间件。Redis支持多种数据结构的存储，提供了大部分平台的客户端，使用方便。</p>\n<h1 id=\"Redis优缺点\"><a href=\"#Redis优缺点\" class=\"headerlink\" title=\"Redis优缺点\"></a>Redis优缺点</h1><h2 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h2><ol>\n<li>性能极高：Redis能读的速度是110000次/s,写的速度是81000次/s。</li>\n<li>丰富的数据类型：Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li>\n<li>原子：Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</li>\n<li>丰富的特性：Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>\n</ol>\n<h2 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h2><ol>\n<li>Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。</li>\n<li>主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。</li>\n<li>redis的主从复制采用全量复制，从机新加入集群或者从机和主机网络断开重连时都会进行，复制过程中主机会fork出一个子进程对内存做一份快照，并将内存快照保存为文件发送给从机，需要保证主机的内存足够。若快照文件较大，将影响集群的服务能力。</li>\n<li>Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。所以运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。</li>\n</ol>\n<h1 id=\"Docker中搭建Redis集群\"><a href=\"#Docker中搭建Redis集群\" class=\"headerlink\" title=\"Docker中搭建Redis集群\"></a>Docker中搭建Redis集群</h1><h2 id=\"Dockerfile文件\"><a href=\"#Dockerfile文件\" class=\"headerlink\" title=\"Dockerfile文件\"></a>Dockerfile文件</h2><p>将redis-4.0.6.tar.gz,ruby-2.5.0.tar.gz,openssl-1.1.1-pre7.tar.gz文件放入Dockerfile同目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from centos</span><br><span class=\"line\">MAINTAINER reallinxu</span><br><span class=\"line\"></span><br><span class=\"line\">COPY redis-4.0.6.tar.gz /usr/software/redis-4.0.6.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/redis</span><br><span class=\"line\">RUN tar xzf /usr/software/redis-4.0.6.tar.gz -C /usr/redis</span><br><span class=\"line\">RUN yum -y install gcc automake autoconf libtool make</span><br><span class=\"line\">RUN cd /usr/redis/redis-4.0.6 &amp;&amp; make</span><br><span class=\"line\">COPY ruby-2.5.0.tar.gz /usr/software/ruby-2.5.0.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/ruby</span><br><span class=\"line\">RUN tar xzf /usr/software/ruby-2.5.0.tar.gz -C /usr/ruby</span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0 &amp;&amp; ./configure &amp;&amp; ls Makefile &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN yum install -y rubygems</span><br><span class=\"line\">RUN yum install -y zlib-devel</span><br><span class=\"line\">COPY openssl-1.1.1-pre7.tar.gz /usr/software/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/openssl</span><br><span class=\"line\">RUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl</span><br><span class=\"line\">RUN cd /usr/openssl/openssl-1.1.1-pre7 &amp;&amp; ./config -fPIC --prefix=/usr/local/openssl enable-shared &amp;&amp; ./config -t &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0/ext/zlib &amp;&amp; ruby ./extconf.rb &amp;&amp; sed -i &apos;s/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/&apos; Makefile &amp;&amp; make &amp;&amp; make install </span><br><span class=\"line\">RUN cd /usr/ruby/ruby-2.5.0/ext/openssl &amp;&amp; ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib &amp;&amp; sed -i &apos;s/$(top_srcdir)/..\\/../g&apos; Makefile &amp;&amp; make &amp;&amp; make install</span><br><span class=\"line\">RUN gem install redis</span><br><span class=\"line\">RUN sed -i &apos;s/daemonize no/daemonize yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/dir .\\//dir \\/usr\\/redis\\//&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-enabled yes/cluster-enabled yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-config-file nodes-6379.conf/cluster-config-file nodes-6379.conf/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/# cluster-node-timeout 15000/cluster-node-timeout 15000/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN sed -i &apos;s/appendonly no/appendonly yes/&apos; /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">RUN rm -rf /usr/software/redis-4.0.6.tar.gz</span><br><span class=\"line\">RUN rm -rf /usr/software/ruby-2.5.0.tar.gz</span><br><span class=\"line\">RUN rm -rf /usr/software/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">EXPOSE 6379</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建镜像\"><a href=\"#构建镜像\" class=\"headerlink\" title=\"构建镜像\"></a>构建镜像</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t=&quot;reallinxu/redis:v1&quot; .</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建容器\"><a href=\"#创建容器\" class=\"headerlink\" title=\"创建容器\"></a>创建容器</h2><p>redis集群需要最少6个节点，3+3模式,所以用以下命令创建6个容器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -i -t --name redis1 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis2 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis3 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis4 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis5 reallinxu/redis:v1</span><br><span class=\"line\">docker run -i -t --name redis6 reallinxu/redis:v1</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"构建集群\"><a href=\"#构建集群\" class=\"headerlink\" title=\"构建集群\"></a>构建集群</h2><p>分别对六台做以下操作：</p>\n<ol>\n<li><p>查看容器ip</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/hosts</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">::1     localhost ip6-localhost ip6-loopback</span><br><span class=\"line\">fe00::0 ip6-localnet</span><br><span class=\"line\">ff00::0 ip6-mcastprefix</span><br><span class=\"line\">ff02::1 ip6-allnodes</span><br><span class=\"line\">ff02::2 ip6-allrouters</span><br><span class=\"line\">172.17.0.2      263989ddf7e2</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改redis配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/redis/redis-4.0.6/redis.conf</span><br><span class=\"line\">找到 bind 127.0.0.1</span><br><span class=\"line\">改为 bind 172.17.0.2 #对应容器的ip</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动redis</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/redis/redis-4.0.6/src</span><br><span class=\"line\">./redis-server ../redis.conf</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>启动六台后实现集群<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./redis-trib.rb create --replicas 1 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 172.17.0.5:6379 172.17.0.6:6379 172.17.0.7:6379</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"测试redis集群\"><a href=\"#测试redis集群\" class=\"headerlink\" title=\"测试redis集群\"></a>测试redis集群</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./redis-cli  -c -h 172.17.0.3 -p 6379  </span><br><span class=\"line\">172.17.0.3:6379&gt; set a 1</span><br><span class=\"line\">-&gt; Redirected to slot [15495] located at 172.17.0.4:6379</span><br><span class=\"line\">OK</span><br><span class=\"line\">172.17.0.3:6379&gt; get a</span><br><span class=\"line\">-&gt; Redirected to slot [15495] located at 172.17.0.4:6379</span><br><span class=\"line\">&quot;1&quot;</span><br><span class=\"line\">172.17.0.4:6379&gt; exit</span><br></pre></td></tr></table></figure>\n<h2 id=\"遇到的错误\"><a href=\"#遇到的错误\" class=\"headerlink\" title=\"遇到的错误\"></a>遇到的错误</h2><ol>\n<li><p>-bash: make: command not found<br>解决：安装gcc </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc automake autoconf libtool make</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ERROR:  Loading command: install (LoadError) cannot load such file – zlib<br>解决：需要依赖zlib工具</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib-devel</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Could not create Makefile due to some reason, probably lack of necessary<br>解决：zlib需要安装到本地运行库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/ruby/ruby-2.5.0/ext/zlib </span><br><span class=\"line\">ruby ./extconf.rb</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>make: *** No rule to make target <code>/include/ruby.h&#39;, needed by</code>zlib.o’.  Stop<br>解决：修改makefile文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &apos;s/zlib.o: $(top_srcdir)\\/include\\/ruby.h/zlib.o: ..\\/..\\/include\\/ruby.h/&apos; Makefile </span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>while executing gem …(Gem:Exception) Unable to require openssl<br>解决：需要安装openssl</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.openssl.org/source/openssl-1.1.1-pre7.tar.gz</span><br><span class=\"line\">RUN mkdir /usr/openssl</span><br><span class=\"line\">RUN tar xzf /usr/software/openssl-1.1.1-pre7.tar.gz -C /usr/openssl</span><br><span class=\"line\">RUN cd /usr/openssl/openssl-1.1.1-pre7</span><br><span class=\"line\">./config -fPIC --prefix=/usr/local/openssl enable-shared  </span><br><span class=\"line\">./config -t  </span><br><span class=\"line\">make  </span><br><span class=\"line\">make install</span><br><span class=\"line\">还需要安装到本地库</span><br><span class=\"line\">cd /usr/ruby/ruby-2.5.0/ext/openssl</span><br><span class=\"line\">ruby extconf.rb  --with-openssl-include=/usr/local/openssl/include/ --with-openssl-lib=/usr/local/openssl/lib</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>make: *** No rule to make target <code>/include/ruby.h&#39;, needed by</code>ossl.o’.  Stop<br>解决：修改makefile文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &apos;s/$(top_srcdir)/..\\/../g&apos; Makefile</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure></li>\n</ol>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjhqzbtlu000984gpqjgoaprd","category_id":"cjhqzbtli000484gpfsrn7lbe","_id":"cjhqzbtm2000i84gp1yu4oy48"},{"post_id":"cjhqzbtl6000184gpg2mn357m","category_id":"cjhqzbtli000484gpfsrn7lbe","_id":"cjhqzbtm6000m84gpu9gdq61r"},{"post_id":"cjhqzbtlf000384gpj73yegvt","category_id":"cjhqzbtlx000c84gpatvs9rpu","_id":"cjhqzbtm9000p84gpurv7rf56"},{"post_id":"cjhqzbtlp000784gp6cc4dl6m","category_id":"cjhqzbtm3000j84gpr9d581tx","_id":"cjhqzbtmk000u84gp7u7p41e3"},{"post_id":"cjhqzbtlw000b84gpozfwvurn","category_id":"cjhqzbtma000q84gp526mm3fq","_id":"cjhqzbtmq000z84gpvdsh3is3"},{"post_id":"cjhqzbtlz000f84gp550etvl7","category_id":"cjhqzbtma000q84gp526mm3fq","_id":"cjhqzbtms001284gpkysnk22k"},{"post_id":"cjhqzbtm1000h84gp3ynhsb7z","category_id":"cjhqzbtmp000y84gpl91ogy81","_id":"cjhqzbtmy001884gpcw42eqoz"},{"post_id":"cjhqzbtm4000l84gp91b8zg7m","category_id":"cjhqzbtmt001484gp1dxhf233","_id":"cjhqzbtn2001d84gpyro1ahb9"},{"post_id":"cjhqzbtm7000o84gpp6qlj8zd","category_id":"cjhqzbtmy001984gpr2239dkd","_id":"cjhqzbtn4001j84gp0ofwfqfz"},{"post_id":"cjhqzbtma000r84gpz37mnaxp","category_id":"cjhqzbtmp000y84gpl91ogy81","_id":"cjhqzbtn4001k84gpt0hp0etp"},{"post_id":"cjhqzbtmc000t84gpawjiegio","category_id":"cjhqzbtn3001i84gpeyamvyck","_id":"cjhqzbtn5001m84gp0fxd09wm"},{"post_id":"cjhqzbtml000w84gpkiksra5m","category_id":"cjhqzbtn4001l84gpfzvktw83","_id":"cjhqzbtn6001p84gppps4rp0v"},{"post_id":"cjhqzbtmo000x84gpy84yinqk","category_id":"cjhqzbtmy001984gpr2239dkd","_id":"cjhqzbtn9001q84gpyiewrxqf"},{"post_id":"cjhqzbtmq001084gpwsdhp32n","category_id":"cjhqzbtn6001o84gpok97mp5c","_id":"cjhqzbtnd001t84gpluhz5cha"},{"post_id":"cjhqzbtmr001184gphpb0obet","category_id":"cjhqzbtn3001i84gpeyamvyck","_id":"cjhqzbtnf001v84gpqw234wdx"},{"post_id":"cjhqzbtmu001684gpw1vldhyj","category_id":"cjhqzbtne001u84gp47qilb9j","_id":"cjhqzbtnj001y84gp1gy43qpc"},{"post_id":"cjhqzbtmx001784gpic007nn2","category_id":"cjhqzbtmy001984gpr2239dkd","_id":"cjhqzbtnj001z84gpagzmgqfu"},{"post_id":"cjhqzbtmt001384gp5qqhf033","category_id":"cjhqzbtn3001i84gpeyamvyck","_id":"cjhqzbtnk002084gpibjrj9p6"},{"post_id":"cjhqzbtmt001384gp5qqhf033","category_id":"cjhqzbtni001x84gpaditwqjn","_id":"cjhqzbtnk002184gp1zgq2yyy"},{"post_id":"cjhseoe5f0000k4gpa4f83472","category_id":"cjhqzbtli000484gpfsrn7lbe","_id":"cjhseoe5m0002k4gph367x9rw"}],"PostTag":[{"post_id":"cjhqzbtlu000984gpqjgoaprd","tag_id":"cjhqzbtlm000584gptnafi086","_id":"cjhqzbtlz000e84gp3mwrl4r6"},{"post_id":"cjhqzbtl6000184gpg2mn357m","tag_id":"cjhqzbtlm000584gptnafi086","_id":"cjhqzbtm1000g84gplsm0sxsh"},{"post_id":"cjhqzbtlf000384gpj73yegvt","tag_id":"cjhqzbtly000d84gpvs3iuhnx","_id":"cjhqzbtm6000n84gphiflw656"},{"post_id":"cjhqzbtlp000784gp6cc4dl6m","tag_id":"cjhqzbtm3000k84gpq0ep4tgp","_id":"cjhqzbtmc000s84gpqzlkfmqk"},{"post_id":"cjhqzbtmr001184gphpb0obet","tag_id":"cjhqzbtmu001584gpoyniqr5g","_id":"cjhqzbtn1001c84gpdz1c446u"},{"post_id":"cjhqzbtmu001684gpw1vldhyj","tag_id":"cjhqzbtn1001b84gpo3fe0z9y","_id":"cjhqzbtn3001h84gpla8xcysh"},{"post_id":"cjhseoe5f0000k4gpa4f83472","tag_id":"cjhqzbtlm000584gptnafi086","_id":"cjhseoe5l0001k4gpytjdisss"}],"Tag":[{"name":"noname","_id":"cjhqzbtlm000584gptnafi086"},{"name":"Docker","_id":"cjhqzbtly000d84gpvs3iuhnx"},{"name":"微信，小程序","_id":"cjhqzbtm3000k84gpq0ep4tgp"},{"name":"CentOS","_id":"cjhqzbtmu001584gpoyniqr5g"},{"name":"java基础","_id":"cjhqzbtn1001b84gpo3fe0z9y"}]}}